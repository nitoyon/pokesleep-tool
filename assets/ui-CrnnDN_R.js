import{e as a,j as e,u as w,f as Us,g as Xs,h as Q,r as B,i as Lt,k as At}from"./react-Cczsdgho.js";import{A as sn,g as us,R as Qe,c as ye,f as O,a as Pt,P as We,b as Ne,l as Ot,d as xs,S as Ks,e as $t,N as ve,B as ce,M as En,h as Ht,w as Oe,n as rs,i as ls,m as pe,j as Is,k as Wt,o as Ze,p as Js,q as $e,r as _t,s as Vt,t as Gt,u as qt,v as Ys,x as fn,y as Qs,z as hs,C as $,D as ie,E as Ut,F as Bs,G as Zs,H as Re,I as Ts,J as Ns,K as Le,L as Fn,O as is,Q as Xt,T as Kt,U as Jt,V as Yt,W as Qt,X as et,Y as Zt,Z as nt,_ as er,$ as Sn}from"./util-BMY2nK47.js";import{f as je,g as Ms,M as nr,a as Ee,i as gs,P as Ve,t as sr,S as ps,I as zn,b as st,p as fs,e as Es,c as tr,d as tt,n as rr}from"./data-CNMMcXcJ.js";import{s as S,D as me,T as J,e as R,f as _,B as T,g as G,h as Y,i as lr,C as we,j as ir,k as or,l as Fs,m as ar,P as rt,n as cr,o as dr,I as lt,p as Ae,E as mr,q,r as ur,t as it,u as xr,A as hr,v as gr,w as f,x as xe,y as de,F as In,z as ot,G as ue,L as oe,H as tn,J as js,K as jn,N as Ge,O as re,Q as at,R as bs,U as pr,V as fr,W as jr,X as br,Y as kn,Z as en,_ as Rn,$ as kr,a0 as yr,a1 as Dn,a2 as ct,a3 as vr,a4 as Cr,a5 as Sr,a6 as zs,a7 as wr,a8 as Gn,a9 as Ir,aa as Br,ab as te,ac as ge,ad as dt,ae as Rs,af as Tr,ag as Nr,ah as Mr,ai as Er,aj as Fr,ak as zr,al as Ln,am as Rr,an as Dr,ao as Lr,ap as os,aq as Ar,ar as Pr,as as ks,at as Se,au as Pe,av as qn,aw as Or,ax as $r,ay as Hr,az as Wr,aA as ys,aB as _r}from"./mui-dX9JJppx.js";import"./i18n-DhY9d84U.js";import{p as Un}from"./pokemon-icon-bxid0uBM.js";import{T as Vr,a as Gr,S as qr,b as Ur,P as Xr,c as Kr,O as Jr,M as Yr,d as Qr,L as Zr,H as el,e as nl,G as sl,E as tl,C as rl,f as ll,g as il,A as ol,h as al,i as Ds,j as cl,D as Bn,k as dl,I as ml,l as Xn,m as Me,n as Ke,R as ul,o as xl,p as hl}from"./svg-icon-BXutqTmu.js";function An(n){return new sn(Math.max(0,Math.ceil((n-.5)/100*8.5*60)))}function yn(n){return new sn(Math.min(510,Math.ceil((n+1-.5)/100*8.5*60)-1))}function on(n,s){const t=gn(n,s,100),r=je[s.fieldIndex].powers,l={firstSleep:t,secondSleep:null,nextStrength:null};if(!s.secondSleep||!t.canGet||t.tooMuch||t.minScore===100)return l;const i=(100-t.minScore)*s.strength*s.bonus,c=us(r,i),d=gn(c,s,100-t.minScore);l.firstSleep.maxScore=Math.min(t.maxScore,100-d.minScore),l.firstSleep.maxTime=yn(l.firstSleep.maxScore),l.firstSleep.maxPower=l.firstSleep.maxScore*s.strength*s.bonus;let m=null;if(d.count<8){const u=d.count+1;m=gn(u,s,100-t.minScore).requiredStrength}return{firstSleep:t,secondSleep:d,nextStrength:m}}function gn(n,s,t){const r=s.strength*s.bonus,l=je[s.fieldIndex].powers,i=l[n-3],o=Math.ceil(i/s.bonus/t),c=Math.max(1,Math.ceil(i/r)),d=c<=t;let m=t;if(!(n===8)){const x=l[n-2];m=Math.max(0,Math.ceil(x/r)-1),m=Math.min(t,m)}return{count:n,power:i,canGet:d,tooMuch:m===0,requiredStrength:o,minScore:c,minTime:An(c),minPower:c*r,maxScore:m,maxTime:yn(m),maxPower:m*r}}const xn=5,gl=10,pl=15,Ls=16;class fl{start;score;constructor(s){this.start=new Date(s.start*1e3),this.score=s.score}calculateStage(){const s=this._calculateStageImpl(),t=s[s.length-1];return s.push({type:"finish",start:t.end,startMinute:t.endMinute,end:new Date(864e13),endMinute:Number.MAX_VALUE}),s}_calculateStageImpl(){const s=Tn(this.score),t=s+xn,r=this.getDateFromMinute(xn),l=[];let i=this.start,o=0,c=xn,d=r;return l.push({type:"init",start:i,startMinute:o,end:d,endMinute:c}),o=c,i=d,c+=Math.min(s,gl),d=this.getDateFromMinute(c),l.push({type:"init2",start:i,startMinute:o,end:d,endMinute:c}),o=c,i=d,this.score<3?(c=o+Ls,d=this.getDateFromMinute(c),l.push({type:"aborting",start:i,startMinute:o,end:d,endMinute:c}),o=c,i=d,c=90,d=this.getDateFromMinute(c),l.push({type:"aborted",start:i,startMinute:o,end:d,endMinute:c}),l):this.score<=16?(c=Tn(this.score)+xn,d=this.getDateFromMinute(c),l.push({type:"normal",start:i,startMinute:o,end:d,endMinute:c}),o=c,i=d,c=Math.min(90,c+Ls),d=this.getDateFromMinute(c),l.push({type:"aborting",start:i,startMinute:o,end:d,endMinute:c}),o=c,i=d,c<90&&(c=90,d=this.getDateFromMinute(c),l.push({type:"aborted",start:i,startMinute:o,end:d,endMinute:c})),l):(c=t-pl,d=this.getDateFromMinute(c),l.push({type:"normal",start:i,startMinute:o,end:d,endMinute:c}),o=c,i=d,c=t,d=this.getDateFromMinute(c),l.push({type:"finalizing",start:i,startMinute:o,end:d,endMinute:c}),l)}getDateFromMinute(s){return new Date(this.start.getTime()+s*60*1e3)}}function Tn(n){const s=An(n),t=yn(n),r=s.h*60+s.m,l=t.h*60+t.m+1;return(r+l)/2}function As(n,s,t){const l=Math.max(90,Tn(s)+5),i=new Date(n.getTime()+l*60*1e3),o=Nn(n,t),c=Nn(i,t);return[o,c]}function Nn(n,s){return Intl.DateTimeFormat(s,{hour:"numeric",minute:"numeric"}).format(n)}const Pn=a.memo(({type:n,number:s})=>e.jsxs(jl,{children:[e.jsx("span",{className:"rank_ball rank_ball_"+n,children:"◓"}),e.jsx("span",{className:"rank_number",children:s})]})),jl=S("span")({"& .rank_ball_basic":{color:"#ff0000"},"& .rank_ball_great":{color:"#0000ff"},"& .rank_ball_ultra":{color:"#000000"},"& .rank_ball_master":{color:"#cc00cc"},"& .rank_number":{paddingLeft:".2em"}}),bn=a.memo(({score:n})=>{const s=n,t=`radial-gradient(#ffffff 50%, transparent 51%), conic-gradient(#489eff 0% ${s}%, #dddddd ${s+1}% 100%)`;return e.jsx(bl,{style:{backgroundImage:t},children:n})}),bl=S("div")({display:"flex",justifyContent:"center",alignItems:"center",width:"2.4rem",height:"2.4rem",fontSize:".7rem",fontWeight:700,borderRadius:"50%",color:"#489eff",backgroundImage:"radial-gradient(#ffffff 50%, transparent 51%), conic-gradient(#489eff 0% 0%, #dddddd 1% 100%)"}),kl=a.memo(({open:n,onClose:s,bonus:t,strength:r})=>{const{t:l}=w(),i=a.useRef(null),o=a.useRef(null),c=a.useRef(null),d=a.useRef(null),m=a.useRef(null),u=a.useCallback((x,h)=>{if(h===null)return;let p=null;switch(h){case 0:p=i?.current;break;case 25:p=o?.current;break;case 50:p=c?.current;break;case 75:p=d?.current;break;case 100:p=m?.current;break}p!==null&&p.scrollIntoView({behavior:"smooth",block:"start"})},[]);if(!n)return e.jsx(e.Fragment,{});const g=[];for(let x=0;x<=100;x++)g.push(e.jsxs("div",{className:"sleep_time",ref:x===0?i:x===25?o:x===50?c:x===75?d:x===100?m:null,children:[e.jsx(bn,{score:x}),e.jsxs("div",{className:"time",children:[An(x).toString(l),e.jsxs(e.Fragment,{children:[" ",l("range separator")," "]}),yn(x).toString(l),e.jsx("div",{className:"time_power",children:l("num",{n:x*r*t})})]})]},x));return e.jsxs(yl,{open:n,onClose:s,scroll:"paper",children:[e.jsx(me,{children:l("sleep score table")}),e.jsx("div",{className:"sleep_score_table",children:g}),e.jsx("div",{className:"form",children:e.jsxs(J,{onChange:u,exclusive:!0,children:[e.jsx(R,{value:0,children:"0"}),e.jsx(R,{value:25,children:"25"}),e.jsx(R,{value:50,children:"50"}),e.jsx(R,{value:75,children:"75"}),e.jsx(R,{value:100,children:"100"})]})}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:l("close")})})]})}),yl=S(G)({"& div.form":{margin:".4rem 1.2rem 0 1.2rem","& > div > button":{width:"3rem"}},"& div.sleep_score_table":{overflow:"scroll",padding:"0 1rem","& > div.sleep_time":{margin:".4rem 0",display:"flex",alignItems:"flex-start","& > div.time":{fontSize:".9rem",fontWeight:700,marginLeft:".3rem",marginTop:0,"& > div.time_power":{color:"#aaaaaa",fontSize:".8rem",fontWeight:500,marginTop:"-.2rem"}}}}}),Mn=a.memo(({count:n})=>e.jsxs(vl,{children:[e.jsx("span",{className:"ball",children:"◓"}),e.jsx("span",{className:"multiply",children:"×"}),e.jsx("span",{className:"value",children:n})]})),vl=S("div")({"& > span.ball":{color:"#ff6347"},"& > span.multiply":{color:"#666"},"& > span.value":{color:"#e6a83a",fontSize:"1.16em"}}),vs=a.memo(({message:n,open:s,onClose:t})=>{const{t:r}=w();return s?e.jsxs(G,{open:s,onClose:t,children:[e.jsx(Y,{style:{paddingBottom:0},children:n}),e.jsx(_,{children:e.jsx(T,{onClick:t,autoFocus:!0,children:r("close")})})]}):e.jsx(e.Fragment,{})}),Cl=S("button")({width:"1.3rem",height:"1.3rem",background:"white",fontSize:".8rem",borderRadius:"50%",padding:0,border:"1px solid #999",color:"#000",cursor:"pointer",flexShrink:0,position:"relative","&:hover":{background:"#f0f0ee"},"&:disabled":{background:"#eee",border:"1px solid #ccc"},"&::before":{content:'""',position:"absolute",top:0,left:0,width:"1.3rem",height:"1.3rem",display:"inline-block",borderRadius:"100%",overflow:"hidden",background:"#999999",opacity:0}}),nn=a.memo(({disabled:n,label:s,onClick:t})=>{const r=l=>{l.stopPropagation(),l.preventDefault(),l.target.animate([{opacity:.5},{opacity:0,transform:"scale(3, 3)"}],{duration:200,easing:"ease-out",pseudoElement:"::before",iterations:1}),t?.()};return e.jsx(Cl,{disabled:n,onClick:r,children:s})}),fe=a.memo(({show:n,children:s})=>{const t=a.useRef(null),[r,l]=a.useState(0),[i,o]=a.useState(s),c=a.useRef(!n);a.useEffect(()=>{n&&o(s)},[s,n]),a.useLayoutEffect(()=>{l(t.current?t.current.scrollHeight:0)},[i,n]);const d=Us({height:n?r:0,config:{tension:400,friction:40},immediate:!c.current,onRest:()=>{c.current=!0}});return e.jsx(Xs.div,{style:{...d,overflow:"hidden"},children:e.jsx("div",{ref:t,children:i})})}),Sl=/iP(hone|od|ad)/.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,On=a.memo(n=>{const{onChange2:s,...t}=n,r=a.useCallback((l,i)=>{l!==null&&(Sl&&l.type==="mousedown"||typeof i=="number"&&s(i))},[s]);return e.jsx(wl,{onChange:r,...t})}),wl=S(lr)({userSelect:"none","& *":{userSelect:"none"}}),Il=a.memo(({data:n,open:s,onClose:t,onStart:r})=>{const{t:l,i18n:i}=w(),[o,c]=a.useState(!1),[d,m]=a.useState(100),[u,g]=As(new Date,d,i.language),[x,h]=a.useState(u),[p,j]=a.useState(g),b=a.useCallback(()=>{c(!0)},[]),k=a.useCallback(()=>{c(!1)},[]),C=a.useCallback(W=>{const[P,A]=As(new Date,W,i.language);x!==P&&h(P),p!==A&&j(A)},[i.language,x,p]),v=a.useCallback(()=>{const W=Math.max(0,d-1);m(W),C(W)},[d,C]),N=a.useCallback(()=>{const W=Math.min(100,d+1);m(W),C(W)},[d,C]),y=a.useCallback(W=>{m(W),C(W)},[C]),E=a.useCallback(W=>{const P=gn(W,n,100);m(P.minScore),C(P.minScore)},[n,C]),D=a.useCallback(()=>{r({score:d,start:Math.floor(new Date().getTime()/1e3),area:n.fieldIndex,strength:n.strength,dp:Math.round(n.strength*n.bonus*d)}),t()},[n,d,r,t]);if(a.useEffect(()=>{if(!s)return;C(d);const W=setInterval(()=>{C(d)},1e3);return()=>{clearInterval(W)}},[s,C,d]),!s)return e.jsx(e.Fragment,{});const I=[];for(let W=4;W<=8;W++){const P=W,A=gn(P,n,100);if(!A.canGet||A.tooMuch)continue;const V=A.minScore<=d&&d<=A.maxScore;I.push(e.jsx(T,{variant:"outlined",className:V?"selected":"",onClick:()=>{E(P)},children:e.jsx(Mn,{count:W})},W))}const F=new sn(Math.max(90,Tn(d)+xn)),L=Math.round(d*n.strength*n.bonus),M=new Qe(n.strength,je[n.fieldIndex].ranks),X=us(je[n.fieldIndex].powers,L);return e.jsxs(e.Fragment,{children:[e.jsxs(Bl,{open:s,onClose:t,children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"notice",children:[e.jsx("p",{children:l("tracking title")}),e.jsx("label",{children:"❶"}),e.jsxs("div",{children:[l("tracking desc1"),e.jsx(T,{onClick:b,children:l("tracking go plus+ title")})]}),e.jsx("label",{children:"❷"}),e.jsx("div",{children:l("tracking desc2")}),e.jsx("label",{children:"❸"}),e.jsx("div",{children:l("tracking desc3")})]}),e.jsxs("label",{children:[l("sleep score"),":"]}),e.jsxs("header",{children:[e.jsx(bn,{score:d}),e.jsxs("div",{className:"slider",children:[e.jsx(nn,{label:"◀",disabled:d===1,onClick:v}),e.jsx(On,{min:1,max:100,size:"small",style:{userSelect:"none"},value:d,onChange2:y}),e.jsx(nn,{label:"▶",disabled:d===100,onClick:N})]}),e.jsx("div",{className:"buttons",children:I})]}),e.jsx(fe,{show:d<17,children:e.jsx("section",{className:"warning",children:e.jsx(Q,{i18nKey:"score is too low",components:{score:e.jsx("strong",{children:d})}})})}),e.jsxs("div",{className:"grid",children:[e.jsxs("label",{children:[l("strength2"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:l("num",{n:n.strength})}),e.jsx("br",{}),e.jsxs("small",{children:["(",l(`area.${n.fieldIndex}`)," ",e.jsx(Pn,{type:M.type,number:M.rankNumber}),")"]})]}),e.jsxs("label",{children:[l("drowsy power"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:l("num",{n:L})}),e.jsxs("small",{children:["(",e.jsx(Mn,{count:X}),")"]})]}),e.jsxs("label",{children:[l("time range"),":"]}),e.jsxs("section",{style:{display:"block"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:x}),l("range separator"),e.jsx("strong",{children:p})]}),e.jsxs("small",{style:{display:"block"},children:["(",F.toString(l),")"]})]})]})]}),e.jsxs(_,{children:[e.jsx(T,{onClick:D,variant:"contained",size:"small",children:l("start tracking")}),e.jsx(T,{onClick:t,size:"small",children:l("cancel")})]})]}),e.jsx(vs,{open:o,onClose:k,message:e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:l("tracking go plus+ detail.0")}),e.jsx("p",{style:{fontSize:"0.9rem",margin:"0.5rem 0"},children:l("tracking go plus+ detail.1")}),e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:l("tracking go plus+ detail.2")})]})})]})}),Bl=S(G)({"& div.MuiDialogContent-root":{minWidth:"250px",paddingBottom:"0.5rem","& > div.notice":{gap:"0.5rem 0.3rem",display:"grid",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem",marginBottom:"1.4rem","& > p":{gridColumn:"1 / -1",fontSize:"0.9rem",margin:"0 0 0.4rem 0",lineHeight:1.2},"& > label":{color:"#24da6d"},"& > div":{fontSize:"0.8rem","& > button":{fontSize:"0.8rem",lineHeight:1.2,padding:0,textTransform:"none",textAlign:"left"}}},"& > label":{fontSize:"0.9rem",marginTop:"1rem",display:"block","&:first-of-type":{marginTop:"0"}},"& > header":{paddingTop:"0.2rem",display:"grid",gridTemplateColumns:"40px 1fr",gap:"0.2rem 0.6rem","& > div:first-of-type":{gridRow:"1 / span 2"},"& > div.slider":{display:"flex",alignItems:"center",gap:".7rem",height:"1.8rem","& .MuiSlider-track":{color:"#489eff",height:".4rem"},"& .MuiSlider-rail":{color:"#cccccc",height:".4rem"},"& .MuiSlider-thumb":{color:"#489eff"}},"& > div.buttons":{gridColumn:"2 / -1","& > button":{minWidth:0,fontSize:"0.8rem",lineHeight:1,padding:"0.2rem 0.2rem",marginRight:"0.2rem",borderColor:"#bbb","&.selected":{background:"#eee"},"& > span":{padding:0}}}},"& > div section.warning":{paddingTop:"0.8rem",paddingLeft:"1.2rem",textIndent:"-1.2rem",fontSize:"0.8rem",color:"#666","&::before":{content:"'\\26a0\\fe0f'"}},"& > div.grid":{marginTop:"1.5rem",gap:"0.8rem 0.7rem",display:"grid",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem",lineHeight:1.3,"& > section":{display:"flex",flexWrap:"wrap",gap:"0 0.4rem",alignItems:"center","& > small":{textWrap:"nowrap","& > div":{display:"inline"}}}}}}),Tl=a.memo(({okLabel:n,message:s,open:t,onOk:r,onClose:l})=>{const{t:i}=w(),o=a.useCallback(()=>{r(),l()},[r,l]);return t?e.jsxs(G,{open:t,onClose:l,children:[e.jsx(Y,{style:{paddingBottom:0},children:s}),e.jsxs(_,{children:[e.jsx(T,{onClick:o,color:"error",children:n}),e.jsx(T,{onClick:l,autoFocus:!0,children:i("cancel")})]})]}):e.jsx(e.Fragment,{})}),Nl=a.memo(({data:n,onChange:s})=>{const{t,i18n:r}=w(),[l,i]=a.useState(!1),[o,c]=a.useState(!1),[d,m]=a.useState(!1),[u,g]=a.useState(!1),x=a.useRef([]),[h,p]=a.useState({type:"init",start:new Date,startMinute:0,end:new Date,endMinute:0}),[j,b]=a.useState(0),[k,C]=a.useState(0),v=a.useCallback(()=>{if(n.tracking===void 0||(x.current=new fl(n.tracking).calculateStage(),x.current.length===0))return;const U=new Date().getTime();let Z=x.current.find(ne=>ne.start.getTime()<=U&&U<ne.end.getTime());Z===void 0&&(Z=x.current[x.current.length-1]),p(Z),b(Z.type==="finish"?0:Math.ceil((x.current[x.current.length-2].end.getTime()-U)/1e3)),C(Z.type==="finish"?0:Math.ceil((Z.end.getTime()-U)/1e3))},[n]);a.useEffect(()=>{if(v(),n.tracking===void 0)return;const U=setInterval(()=>{v()},1e3);return()=>{clearInterval(U)}},[n,v]);const N=a.useCallback(()=>{i(!0)},[i]),y=a.useCallback(()=>{i(!1)},[i]),E=a.useCallback(()=>{c(!0)},[]),D=a.useCallback(()=>{c(!1)},[]),I=a.useCallback(U=>{s({tracking:U})},[s]),F=a.useCallback(()=>{s({tracking:void 0})},[s]),L=a.useCallback(()=>{m(!0)},[]),M=a.useCallback(()=>{m(!1)},[]),X=a.useCallback(()=>{g(!0)},[]),W=a.useCallback(()=>{g(!1)},[]),P=x.current.length===0?"":Nn(x.current[0].start,r.language),A=x.current.length===0?"":Nn(x.current[x.current.length-2].end,r.language),V=n.tracking!==void 0&&h.type==="finish",he=n.tracking?.strength??0,ae=n.tracking?.dp??0,Fe=n?.tracking?.area??0,K=je[Fe],z=new Qe(he,K.ranks),H=us(je[n.fieldIndex].powers,ae);return e.jsxs(Ml,{children:[e.jsx(fe,{show:n.tracking!==void 0,children:e.jsxs("section",{children:[e.jsxs("article",{className:h.type,children:[V?e.jsx(we,{fontSize:"large"}):e.jsx(ir,{size:30}),e.jsxs("header",{children:[e.jsx("h2",{children:t(V?"tracked":"tracking")}),e.jsxs("h3",{children:[e.jsx("strong",{children:P}),t("range separator"),e.jsx("strong",{children:A}),!V&&e.jsxs("span",{className:"remain",children:["(",t("remaining time",{time:Ps(j,t)}),")"]})]}),e.jsxs("article",{children:[e.jsxs("label",{children:[t("strength"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:t("num",{n:n.tracking?.strength??0})}),e.jsxs("small",{children:["(",t(`area.${Fe}`)," ",e.jsx(Pn,{type:z.type,number:z.rankNumber}),")"]})]}),e.jsxs("label",{children:[t("sleep score"),":"]}),e.jsx("section",{children:e.jsx("strong",{children:n.tracking?.score??0})}),e.jsxs("label",{children:[t("drowsy power"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:t("num",{n:ae})}),e.jsxs("small",{children:["(",e.jsx(Mn,{count:H}),")"]})]})]})]})]}),e.jsx("footer",{children:e.jsx(Q,{i18nKey:`sleep state.${h.type}`,components:{time:e.jsx("strong",{children:Ps(k,t)}),score:e.jsx("strong",{children:n.tracking?.score??0}),detail:e.jsxs(T,{onClick:X,children:["[",t("details"),"]"]}),br:e.jsx("br",{})}})})]})}),e.jsxs("div",{className:"buttons",children:[e.jsx(T,{startIcon:e.jsx(or,{}),onClick:N,children:t("sleep score table")}),V&&e.jsx(T,{startIcon:e.jsx(Fs,{}),onClick:F,children:t("reset")}),!V&&n.tracking&&e.jsx(T,{startIcon:e.jsx(Fs,{}),onClick:L,color:"error",children:t("abort tracking")}),!V&&!n.tracking&&e.jsx(T,{startIcon:e.jsx(ar,{}),onClick:E,children:t("start tracking")})]}),e.jsx(kl,{open:l,onClose:y,bonus:n.bonus,strength:n.strength}),e.jsx(Il,{open:o,data:n,onClose:D,onStart:I}),e.jsx(Tl,{open:d,onClose:M,onOk:F,okLabel:t("ok"),message:t("confirm abort")}),e.jsx(vs,{open:u,onClose:W,message:e.jsxs(El,{children:[e.jsx("h1",{children:t("aim sleep type")}),e.jsxs("dl",{children:[e.jsx("dt",{className:"dozing",children:t("dozing")}),e.jsx("dd",{children:t("aim dozing")}),e.jsx("dt",{className:"snoozing",children:t("snoozing")}),e.jsx("dd",{children:t("aim snoozing")}),e.jsx("dt",{className:"slumbering",children:t("slumbering")}),e.jsx("dd",{children:t("aim slumbering")})]})]})})]})});function Ps(n,s){return n>=3600?s("hhmm_short",{h:Math.floor(n/3600),m:Math.floor(n/60%60)}):n>=60?s("mmss_short",{m:Math.floor(n/60),s:Math.floor(n%60)}):s("ss_short",{s:Math.floor(n%60)})}const Ml=S("div")({"& > div.buttons":{textAlign:"right","& > button":{textTransform:"none","& > span.MuiButton-icon":{marginRight:2}}},"& > div > div > section":{border:"1px solid #aaa",background:"#f3f3f3",borderRadius:12,padding:"0.5rem","& > article":{display:"grid",gridTemplateColumns:"max-content 1fr",gap:"0.5rem","& > header > h2":{color:"#1976d2"},"&.finish":{"& > svg":{color:"#24d76a"},"& > header > h2":{color:"#24d76a"}},"& > header":{"& > h2":{margin:0,fontSize:"1.2rem"},"& > h3":{margin:0,fontWeight:400,fontSize:"0.9rem","& > span":{paddingLeft:"0.5rem",fontSize:"0.8rem"}},"& > article":{margin:"0.8rem 0 0 0",fontWeight:400,fontSize:"0.9rem",display:"grid",gridTemplateColumns:"max-content 1fr",gap:"0.3rem 0.5rem","& > section":{display:"flex",flexWrap:"wrap",gap:"0 0.4rem",alignItems:"center","& > small":{textWrap:"nowrap","& > div":{display:"inline"}}}}}},"& > footer":{marginTop:".8rem",fontSize:"0.8rem",color:"#777","& > button":{padding:"0 0 0 0.2rem",fontSize:"0.8rem",minWidth:0}}}}),El=S("div")({"& > h1":{fontSize:"1.2rem",padding:0,margin:0},"& > dl":{margin:"0.8rem 0 0 0",fontSize:"0.9rem","& > dt":{marginTop:"0.8rem",padding:"0.1rem 0.4rem",borderRadius:5,display:"inline","&.dozing":{backgroundColor:"#fdec6e",color:"#862"},"&.snoozing":{backgroundColor:"#85fbff",color:"#226"},"&.slumbering":{backgroundColor:"#5592fc",color:"#fff"}},"& > dd":{fontSize:"0.8rem",display:"block",padding:"0.3rem 0 1rem",margin:0,"&:last-of-type":{paddingBottom:0}}}}),rn=a.memo(({anchorEl:n,children:s,open:t,onClose:r})=>{const l=a.useCallback(i=>{n?.contains(i.target)||i.target!==n&&r()},[n,r]);return e.jsx(rt,{open:t,anchorEl:n,placement:"bottom-start",style:{zIndex:2147483647,maxWidth:"95vw"},children:e.jsx(cr,{elevation:10,children:e.jsx(dr,{onClickAway:l,children:s})})})}),Fl=a.memo(a.forwardRef(({children:n,min:s,max:t,value:r,onChange:l,...i},o)=>{const[c,d]=a.useState(!1),[m,u]=a.useState(!1),[g,x]=a.useState(r.toString()),h=a.useRef(null),p=s??0,j=t??Number.MAX_SAFE_INTEGER,b=n!==void 0,k=a.useCallback(D=>{const I=D.target.value.replace(/,/g,"");if(x(I),I===""){l(p);return}const F=parseInt(I,10);if(isNaN(F))return;const L=ye(p,F,j);l(L)},[p,j,l]),C=a.useCallback(()=>{u(!0),n!==void 0&&d(!0),x(r.toString())},[n,r]),v=a.useCallback(()=>{let D;const I=g.replace(/,/g,"");if(I==="")D=p;else{const F=parseInt(I,10);isNaN(F)?D=r:D=ye(p,F,j)}l(D),u(!1),d(!1)},[g,r,p,j,l]),N=a.useCallback(()=>{b||v()},[v,b]),y=a.useCallback(D=>{D.key==="Tab"&&c&&v()},[v,c]);a.useEffect(()=>{h.current?.querySelector("input")?.matches(":focus")||x(r.toString())},[r]),a.useImperativeHandle(o,()=>({focus:()=>{h.current?.querySelector("input")?.focus()},close:v}),[v]);const E=m?g:O(r);return e.jsxs("div",{className:"numeric keyboard",children:[e.jsx(lt,{...i,type:m?"number":"tel",slotProps:{input:{sx:{"&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"-moz-appearance":"textfield"},min:s,max:t}},inputProps:{inputMode:"numeric"},value:E,ref:h,onChange:k,onFocus:C,onBlur:N,onKeyDown:y}),e.jsx(rn,{open:c,anchorEl:h.current,onClose:v,children:e.jsx("div",{children:n})})]})}));let Cn=!0;const as=new Set,zl=n=>(as.add(n),()=>{as.delete(n)}),Rl=n=>{as.forEach(s=>s(n))},Dl=a.memo(a.forwardRef(({children:n,min:s,max:t,value:r,onChange:l,...i},o)=>{const[c,d]=a.useState(!1),[m,u]=a.useState(!1),[g,x]=a.useState(Cn),[h,p]=a.useState(0),[j,b]=a.useState(!1),k=a.useRef(null),C=a.useRef(null),[v,N]=a.useState({}),[y,E]=a.useState({x:0,y:0}),D=s??0,I=t??Number.MAX_SAFE_INTEGER;a.useEffect(()=>zl(H=>{x(H)}),[]);const F=a.useRef(r),L=a.useRef(h),M=a.useRef(m);a.useEffect(()=>{F.current=r,L.current=h,M.current=m},[r,h,m]),a.useEffect(()=>{if(!k.current)return;const z=k.current.querySelector("input");if(!z)return;const H=window.getComputedStyle(z),U=k.current.getBoundingClientRect(),Z=z.getBoundingClientRect();N({fontSize:H.fontSize,fontFamily:H.fontFamily,fontWeight:H.fontWeight,fontStyle:H.fontStyle,letterSpacing:H.letterSpacing,lineHeight:H.lineHeight,width:H.width,height:parseFloat(H.height??"10")-2,padding:H.padding,boxSizing:H.boxSizing,transform:H.transform,top:Z.top-U.top,left:Z.left-U.left})},[]),a.useEffect(()=>{if(!(c&&C.current))return;const z=C.current.firstChild;if(z===null||z.nodeType!==Node.TEXT_NODE){E({x:0,y:0});return}const H=document.createRange(),U=m?"":O(r),Z=Pt(r,h),ne=Math.min(Z,U.length);H.setStart(z,ne),H.setEnd(z,ne);const le=H.getBoundingClientRect(),ze=C.current.getBoundingClientRect();E({x:le.left-ze.left,y:le.top-ze.top})},[c,h,r,m]);const X=a.useCallback(()=>{Cn=!Cn,Rl(Cn)},[]),W=a.useCallback(z=>{u(!1);const H=O(r);if(!(c&&C.current)){p(H.length),d(!0),b(!0);return}const U=C.current.firstChild;if(U===null||U.nodeType!==Node.TEXT_NODE){p(H.length),d(!0),b(!0);return}const Z=z.clientX,ne=document.createRange();let le=H.length,ze=1/0;for(let vn=0;vn<=H.length;vn++){ne.setStart(U,0),ne.setEnd(U,vn);const Dt=ne.getBoundingClientRect(),ws=Math.abs(Z-Dt.right);ws<ze&&(ze=ws,le=H.substring(0,vn).replace(/,/g,"").length)}p(le),d(!0),b(!1)},[c,r]),P=a.useCallback(()=>{u(!1),d(!1),b(!1)},[]);a.useImperativeHandle(o,()=>({focus:()=>{c||(u(!1),p(r.toString().length),d(!0),b(!0)),k.current?.querySelector("input")?.focus()},close:P}),[P,c,r]);const A=a.useCallback(z=>{u(!1);const H=z.toString();if(j){b(!1);const ze=ye(D,z,I);l(ze),p(ze.toString().length);return}const U=M.current?"0":F.current.toString(),Z=L.current;let ne;U==="0"?(ne=H,p(1)):(ne=U.slice(0,Z)+H+U.slice(Z),p(Z+1));let le=parseInt(ne,10);isNaN(le)||(le=ye(D,le,I),l(le),le===I&&p(le.toString().length))},[I,D,l,j]),V=a.useCallback(()=>{b(!1);const z=L.current;if(z===0)return;const H=F.current.toString(),U=M.current;if(H.length<=1||U)u(!0),l(Math.max(0,D)),p(0);else{const Z=H.slice(0,z-1)+H.slice(z),ne=parseInt(Z,10);isNaN(ne)||(l(Math.max(ne,D)),p(z-1))}},[D,l]),he=a.useCallback(()=>{b(!1),u(!0),l(Math.max(0,D)),p(0)},[D,l]),ae=a.useCallback(z=>{b(!1);const H=M.current?0:F.current.toString().length,U=L.current;p(ye(0,U+z,H))},[]),Fe=a.useCallback(z=>{if(z.key>="0"&&z.key<="9"){z.preventDefault(),A(parseInt(z.key,10));return}if(z.key==="Backspace"){z.preventDefault(),V();return}if(z.key==="Delete"){z.preventDefault(),b(!1);const H=L.current,U=F.current.toString(),Z=M.current;if(H>=U.length)return;if(U.length===1||Z)u(!0),l(Math.max(0,D)),p(0);else{const ne=U.slice(0,H)+U.slice(H+1),le=parseInt(ne,10);isNaN(le)||l(Math.max(le,D))}return}if(z.key==="ArrowLeft"){z.preventDefault(),ae(-1);return}if(z.key==="ArrowRight"){z.preventDefault(),ae(1);return}if(z.key==="Home"){z.preventDefault(),b(!1),p(0);return}if(z.key==="End"){z.preventDefault(),b(!1);const H=M.current?0:F.current.toString().length;p(H);return}if(z.key==="Enter"||z.key==="Escape"){z.preventDefault(),P();return}},[A,V,ae,P,D,l,u,p]),K=m?" ":O(r);return e.jsxs(e.Fragment,{children:[e.jsxs(Ll,{className:"numeric touch",children:[e.jsx(Al,{...i,ref:k,readOnly:!0,className:`${i.className??""} ${c?"focused":""}`,onClick:W,onKeyDown:Fe,inputProps:{inputMode:"none"},value:K}),e.jsx(Ol,{ref:C,style:v,children:K}),c&&e.jsx(e.Fragment,{children:e.jsx($l,{style:{...v,left:(v.left??0)+y.x,top:(v.top??0)+y.y,width:"2px",padding:0}})})]}),e.jsx(rn,{open:c,anchorEl:k.current,onClose:P,children:e.jsxs("div",{children:[n&&e.jsxs(e.Fragment,{children:[n,e.jsx(Ae,{}),e.jsx(Hl,{className:g?"":"toggle",onClick:X,children:e.jsx(mr,{fontSize:"small"})})]}),g&&e.jsxs(Pl,{children:[e.jsx(q,{onClick:()=>A(1),children:"1"}),e.jsx(q,{onClick:()=>A(2),children:"2"}),e.jsx(q,{onClick:()=>A(3),children:"3"}),e.jsx(q,{className:"func",onClick:V,children:e.jsx(ur,{})}),e.jsx(q,{onClick:()=>A(4),children:"4"}),e.jsx(q,{onClick:()=>A(5),children:"5"}),e.jsx(q,{onClick:()=>A(6),children:"6"}),e.jsx(q,{className:"close",onClick:he,children:e.jsx(it,{})}),e.jsx(q,{onClick:()=>A(7),children:"7"}),e.jsx(q,{onClick:()=>A(8),children:"8"}),e.jsx(q,{onClick:()=>A(9),children:"9"}),e.jsx(q,{className:"ok",onClick:P,children:e.jsx(xr,{})}),e.jsx(q,{className:"nav",onClick:()=>ae(-1),children:e.jsx(hr,{})}),e.jsx(q,{onClick:()=>A(0),children:"0"}),e.jsx(q,{className:"nav",onClick:()=>ae(1),children:e.jsx(gr,{})})]})]})})]})})),Ll=S("div")({position:"relative",display:"inline"}),Al=S(lt)({"&.focused:after":{transform:"scaleX(1)"}}),Pl=S("div")({display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",padding:"0 0.6rem 0.6rem 0.6rem","&:first-of-type":{paddingTop:"0.6rem"},gap:"0.4rem","& > button":{width:"4.3rem",height:"3rem",borderRadius:"1rem",touchAction:"manipulation",fontFamily:"inherit","&, &:hover, &:focus, &:active":{background:"#ddd"}},"& > .close":{color:"#fff","&, &:hover, &:focus, &:active":{background:"#d32f2f"}},"& > .func":{color:"#fff","&, &:hover, &:focus, &:active":{background:"#ff944b"}},"& > .nav":{color:"#fff","&, &:hover, &:focus, &:active":{background:"#c6e55e"}},"& > .ok":{"&, &:hover, &:focus, &:active":{background:"#1976d2"},color:"#fff",gridRow:"3 / span 2",gridColumn:"4",height:"6.4rem",borderRadius:"1rem"}}),Ol=S("span")({position:"absolute",pointerEvents:"none",visibility:"hidden",whiteSpace:"pre"}),$l=S("span")({position:"absolute",width:"2px",backgroundColor:"#1976d2",pointerEvents:"none",animation:"blink 1s step-end infinite","@keyframes blink":{"0%, 70%":{opacity:1},"75%, 95%":{opacity:0}}}),Hl=S(T)({width:"100%",height:"18px","& > svg":{color:"#ccc",display:"inline-block",transition:"transform 0.3s ease",transform:"rotate(0deg)"},"&.toggle > svg":{transform:"rotate(180deg)"}}),Wl=window.matchMedia("(any-pointer: fine)").matches,$n=a.memo(a.forwardRef(({min:n,max:s,value:t,onChange:r,children:l,...i},o)=>Wl?e.jsx(Fl,{ref:o,min:n,max:s,value:t,onChange:r,children:l,...i}):e.jsx(Dl,{ref:o,min:n,max:s,value:t,onChange:r,children:l,...i}))),_l=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=a.useCallback(o=>{s(parseInt(o.target.value,10))},[s]),l=[],i=[...je];for(const o of i)o.powers.length!==0&&l.push(e.jsxs(f,{value:o.index,children:[e.jsx("span",{className:"field_icon",children:o.emoji}),t(`area.${o.index}`)]},o.index));return e.jsx(xe,{variant:"standard",size:"small",select:!0,value:n,onChange:r,slotProps:{select:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}}},children:l})});function Vl({data:n,onChange:s}){const{t}=w(),r=je[n.fieldIndex],l=n.strength,i=new Qe(l,r.ranks),o=B.useCallback(b=>{if(b<0||b>=r.ranks.length)return;const k=r.ranks[b];s?.({strength:k})},[r.ranks,s]),c=B.useCallback(b=>{o(b===-1?i.index-1:i.index+1)},[o,i.index]),d=B.useCallback(b=>{o(b)},[o]),m=B.useCallback(()=>{c(-1)},[c]),u=B.useCallback(()=>{c(1)},[c]),g=B.useCallback(b=>{s?.({fieldIndex:b})},[s]),x=B.useCallback(b=>{s?.({strength:b})},[s]);function h(b){const k=Math.min(b,i.nextStrength-1);s?.({...n,strength:k})}const p=a.useCallback(b=>{s?.({bonus:b})},[s]),j=B.useCallback(b=>{const k=b.target.checked;s?.({secondSleep:k})},[s]);return e.jsxs(e.Fragment,{children:[e.jsxs(Gl,{children:[e.jsxs("div",{children:[t("research area"),":"]}),e.jsx("div",{children:e.jsx(_l,{value:n.fieldIndex,onChange:g})}),e.jsxs("div",{children:[t("strength"),":"]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr"},children:[e.jsx(ql,{field:r,value:i.index,onChange:d}),e.jsx(Jl,{max:nr,value:l,onChange:x})]}),e.jsxs("div",{className:"strength_second_line",children:[e.jsx(nn,{disabled:i.index===0,label:"◀",onClick:m}),e.jsx(On,{className:"strength_progress",size:"small",onChange2:h,min:i.thisStrength,max:i.nextStrength,value:l}),e.jsx(nn,{disabled:i.rankNumber===20,label:"▶",onClick:u})]})]}),e.jsxs("div",{children:[t("bonus"),":"]}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Ql,{value:n.bonus,onChange:p})}),e.jsx(Zl,{value:n.secondSleep,onChange:j})]})]}),e.jsx(Nl,{data:n,onChange:s})]})}const Gl=S("div")({marginTop:".8rem",display:"grid",gap:"0.8rem 1.2rem",gridTemplateColumns:"fit-content(200px) 1fr",'& form.main div[role="combobox"]':{paddingBottom:"2px"},"& span.field_icon":{paddingRight:".2rem"},"& div.strength_second_line":{display:"flex",alignItems:"center",marginTop:".2rem",userSelect:"none"},"& .MuiInput-input:focus":{background:"inherit"},"& span.strength_progress":{width:"calc(100% - 4rem)",margin:"0 1rem","& .MuiSlider-track":{color:"#f7ac33",height:".5rem"},"& .MuiSlider-rail":{color:"#999999",height:".5rem"},"& .MuiSlider-thumb":{color:"#f7ac33",width:".9rem",height:".9rem","&::after":{width:"1rem",height:"1rem"},"&.Mui-active, &:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 6px rgba(235,219,102,0.4)"}}}}),ql=a.memo(({value:n,onChange:s,field:t})=>{const{t:r}=w(),l=a.useCallback(o=>{const c=parseInt(o.target.value,10);s(c)},[s]),i=[];for(let o=0;o<35;o++){const c=n===o,d=Qe.rankIndexToType(o),m=Qe.rankIndexToRankNumber(o),u=t.ranks[o];i.push(e.jsxs(Xl,{value:o,dense:!0,selected:c,children:[e.jsx(Pn,{type:d,number:m}),e.jsxs("span",{className:"strength",children:[r("num",{n:u}),r("range separator")]})]},o))}return e.jsx(Ul,{className:"rank",variant:"standard",size:"small",select:!0,value:n,SelectProps:{MenuProps:{sx:{height:"400px"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}},onChange:l,children:i})}),Ul=S(xe)({width:"4rem",marginRight:"1rem","& span.strength":{display:"none"}}),Xl=S(f)({"& > span.strength":{paddingLeft:"1.2rem",color:"#999",fontSize:".9rem",fontWeight:"normal"}}),Kl=e.jsx(ue,{position:"start",sx:{color:"#ff944b"},children:e.jsx(oe,{})}),Jl=a.memo(({max:n,value:s,onChange:t})=>e.jsx(Yl,{size:"small",max:n,value:s,onChange:t,startAdornment:Kl})),Yl=S($n)({width:"100%","& input":{fontWeight:800,fontSize:"1rem",paddingBottom:"2px"}}),Ql=a.memo(({value:n,onChange:s})=>{const{t}=w(),[r,l]=B.useState(Ms(new Date));a.useEffect(()=>{const m=setInterval(function(){l(Ms(new Date))},5e3);return()=>clearInterval(m)},[]);const i=a.useCallback(m=>{s(parseFloat(m.target.value))},[s]),o=a.useCallback(()=>{s(r)},[s,r]),c=r!==n,d=r===1?t("none"):`×${r}`;return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{variant:"standard",size:"small",select:!0,value:n,onChange:i,children:[e.jsx(f,{value:1,dense:!0,children:t("none")},"1"),e.jsx(f,{value:1.5,dense:!0,children:"×1.5"},"1.5"),e.jsx(f,{value:2,dense:!0,children:"×2"},"2"),e.jsx(f,{value:2.5,dense:!0,children:"×2.5"},"2.5"),e.jsx(f,{value:3,dense:!0,children:"×3"},"3"),e.jsx(f,{value:4,dense:!0,children:"×4"},"4")]}),e.jsx(de,{in:c,style:{paddingTop:"0.2rem"},children:e.jsxs(T,{onClick:o,sx:{padding:"0 0 0 1rem",margin:0,fontSize:"0.8rem",textIndent:"-1rem",textTransform:"none",lineHeight:1.2,textAlign:"left"},children:["⚠️",t("bonus not match",{bonus:d})]})})]})}),Zl=a.memo(({value:n,onChange:s})=>{const{t}=w();return e.jsx(In,{control:e.jsx(ot,{checked:n,onChange:s}),label:t("sleep twice")})}),ei=a.memo(({fieldIndex:n})=>{const{t:s}=w(),t=n>7;return e.jsx(de,{in:t,children:e.jsxs(ni,{children:[e.jsx(tn,{}),e.jsx("div",{children:s("border is not fixed")})]})})}),ni=S("div")({background:"#e5f6fd",borderRadius:".5rem",padding:"0.4rem",color:"#014343",display:"grid",gridTemplateColumns:"22px 1fr","& > svg":{color:"#0288d1",width:"18px",height:"18px",paddingTop:"2px"},"& > div":{fontSize:"0.8rem",color:"#014480","& > button":{padding:"0 0 0 0.3rem",minWidth:0,fontSize:"0.8rem"}}});function si({open:n,onClose:s,data:t}){const{t:r}=w();if(!n)return e.jsx(e.Fragment,{});const l=[];for(let i=0;i<2;i++){const o=[t.first,t.second][i],c=An(o.score).toString(r),d=yn(o.score).toString(r);l.push(e.jsxs("div",{className:"better_preview",children:[e.jsx("div",{className:"ball",children:"◓"}),e.jsx("span",{className:"ball_value",children:o.count}),e.jsx("span",{className:"strength",children:e.jsx(oe,{})}),e.jsxs("span",{className:"strength_value",children:[r("num",{n:o.strength}),i===1&&" "+r("range separator")]}),e.jsx(bn,{score:o.score}),e.jsxs("span",{className:"time_value",children:[e.jsx("span",{children:c}),e.jsxs("span",{children:[" ",r("range separator")," "]}),i===0&&e.jsx("span",{children:d})]})]},i))}return e.jsxs(G,{open:n,onClose:s,children:[e.jsxs(ti,{dividers:!0,className:"better_dialog",children:[e.jsx(Q,{i18nKey:"next strength to get 1 more pokemon",components:{count2:e.jsx("strong",{children:t.second.count}),score1:e.jsx("strong",{children:t.first.score}),strength2:e.jsx("strong",{children:r("num",{n:t.second.strength-t.first.strength})})}}),e.jsx("h3",{children:r("first sleep")}),e.jsx("div",{children:l[0]}),e.jsx("h3",{children:r("second sleep")}),e.jsx("div",{children:l[1]})]}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:r("close")})})]})}const ti=S(Y)({"& > h3":{marginBottom:".2rem",fontSize:"1.1rem"},"& div.better_preview":{padding:"0 .5rem",display:"grid",gridTemplateColumns:"2.5rem auto",gap:".5rem .3rem",alignItems:"center","& > div.ball":{color:"#ff6347",textAlign:"center",alignItems:"center",fontSize:"1.3rem"},"& > span.ball_value":{fontSize:"1.3rem"},"& > span.strength":{color:"#ff944b",textAlign:"center","& > svg":{transform:"scale(1.2)"}},"& > span.strength_value":{fontSize:"1.2rem"}}});function an(n){const{t:s}=w(),t=n.ranges,r=t.firstSleep,l=Os(r,n.data,s);if(!r.canGet||r.tooMuch)return e.jsx(Kn,{children:e.jsx("div",{className:"preview_warning",children:l})});if(t.secondSleep==null)return e.jsx(Kn,{children:e.jsx("div",{className:"preview_grid",children:l})});const i=Os(t.secondSleep,n.data,s),o=r.count+t.secondSleep.count;let c=null;if(t.nextStrength!==null){const d=t.secondSleep.count+1,m=t.nextStrength-n.data.strength,u=function(){const g={first:{count:t.firstSleep.count,score:t.firstSleep.minScore,strength:n.data.strength},second:{count:d,score:100-t.firstSleep.minScore,strength:n.data.strength+m}};n.onSecondSleepDetailClick(g)};c=e.jsxs("div",{className:"meet1more",children:[e.jsx(tn,{}),e.jsxs("div",{children:[e.jsx(Q,{i18nKey:"next strength to get 1 more pokemon",components:{score1:e.jsx("strong",{children:t.firstSleep.minScore}),count2:e.jsx("strong",{children:d}),strength2:e.jsx("strong",{children:s("num",{n:m})})}}),e.jsxs(T,{onClick:u,children:["[",s("details"),"]"]})]})]})}return e.jsxs(Kn,{children:[e.jsx("div",{className:"sum-tooltip",children:e.jsx(Q,{i18nKey:"total n pokemon",components:{n:e.jsx("strong",{children:o})}})}),e.jsxs("div",{className:"preview_grid",children:[l,i]}),c]})}const Kn=S("div")({padding:".7rem 0",borderBottom:"3px dotted #ddd","& > .preview_grid":{display:"grid",width:"100%",gridTemplateColumns:"4.5rem max-content 1.5rem max-content",rowGap:".5rem"},"& > div > .count_box":{width:"5rem",fontSize:"1.2rem"},"& > .preview_warning":{display:"grid",width:"100%",gridTemplateColumns:"4.5rem 1fr"},"& div.power":{color:"#aaaaaa",fontSize:".7rem",marginTop:"-.2rem",whiteSpace:"nowrap"},"& div.start, div.end":{paddingTop:".3rem","& > div.sleep_time":{display:"flex",alignItems:"flex-start","& > div.time":{fontSize:".9rem",fontWeight:700,marginLeft:".3rem",marginTop:"0rem","& > div.time_power":{color:"#aaaaaa",fontSize:".8rem",fontWeight:500,marginTop:"-.2rem"}}}},"& div.score_separator":{padding:".3rem .2rem",textAlign:"center"},"& > .sum-tooltip":{display:"inline-block",position:"relative",border:"3px solid #ffffff",backgroundColor:"#f7ac33",color:"white",fontSize:".9rem",borderRadius:".5rem",padding:".1rem .5rem",boxShadow:"0 0 .1rem #999",marginBottom:".2rem","&::before":{content:"''",position:"absolute",display:"block",width:"0px",left:"50%",bottom:0,border:"10px solid transparent",borderBottom:0,borderTop:"10px solid #f7ac33",transform:"translate(-50%, calc(100% - .1rem))"},"& > strong":{fontSize:"1rem",fontWeight:700}},"& div.meet1more":{color:"#888",fontSize:".95rem",marginTop:".8rem",display:"flex",gap:".5rem","& > svg":{color:"#bbb",paddingTop:".2rem"},"& strong":{fontSize:"1rem"},"& button":{padding:0,minWidth:"2rem"}},"& div.warning":{paddingLeft:"2.2rem",textIndent:"-1.2rem",color:"#666","&::before":{content:"'\\26a0\\fe0f'"}}});function Os(n,s,t){const r=e.jsxs("div",{className:"count_box",children:[e.jsx(Mn,{count:n.count}),e.jsx("div",{className:"power",children:e.jsxs("span",{children:[t("num",{n:n.power}),t("range separator")]})})]});if(!n.canGet||n.tooMuch){let l;if(n.canGet)l=e.jsx("span",{children:t("strength too much")});else{const i=je[s.fieldIndex].ranks,o=new Qe(n.requiredStrength,i),c=Math.floor((n.requiredStrength-o.thisStrength)/(o.nextStrength-o.thisStrength)*100+.5);l=e.jsx("span",{children:e.jsx(Q,{i18nKey:"strength too low",components:{strength:e.jsxs(e.Fragment,{children:[e.jsxs("strong",{children:[t("num",{n:n.requiredStrength})," "]}),"(",e.jsx(Pn,{type:o.type,number:o.rankNumber}),e.jsxs("span",{children:[" + ",c,"%"]}),")"]})}})})}return e.jsxs(e.Fragment,{children:[r,e.jsx("div",{className:"warning",children:l})]})}return e.jsxs(e.Fragment,{children:[r,e.jsx("div",{className:"start",children:e.jsxs("div",{className:"sleep_time",children:[e.jsx(bn,{score:n.minScore}),e.jsxs("div",{className:"time",children:[n.minTime.toString(t),e.jsx("div",{className:"time_power",children:t("num",{n:n.minPower})})]})]})}),e.jsx("div",{className:"score_separator",children:t("range separator")}),e.jsx("div",{className:"end",children:e.jsxs("div",{className:"sleep_time",children:[e.jsx(bn,{score:n.maxScore}),e.jsxs("div",{className:"time",children:[n.maxTime.toString(t),e.jsx("div",{className:"time_power",children:t("num",{n:n.maxPower})})]})]})})]})}function ri({data:n}){const[s,t]=B.useState(!1),r=()=>{t(!1)},[l,i]=B.useState({first:{count:0,score:0,strength:0},second:{count:0,score:0,strength:0}});function o(c){i(c),t(!0)}return e.jsxs("div",{style:{marginBottom:"10rem"},children:[e.jsx(an,{count:4,data:n,ranges:on(4,n),onSecondSleepDetailClick:o}),e.jsx(an,{count:5,data:n,ranges:on(5,n),onSecondSleepDetailClick:o}),e.jsx(an,{count:6,data:n,ranges:on(6,n),onSecondSleepDetailClick:o}),e.jsx(an,{count:7,data:n,ranges:on(7,n),onSecondSleepDetailClick:o}),e.jsx(an,{count:8,data:n,ranges:on(8,n),onSecondSleepDetailClick:o}),e.jsx(si,{data:l,open:s,onClose:r})]})}function li(){const n={fieldIndex:0,strength:73120,bonus:1,secondSleep:!1,tracking:void 0},s=localStorage.getItem("ResearchCalcPokeSleep");if(s===null)return n;const t=JSON.parse(s);return typeof t!="object"||t==null||(typeof t.fieldIndex=="number"&&t.fieldIndex>=0&&t.fieldIndex<je.length&&(n.fieldIndex=t.fieldIndex),typeof t.strength=="number"&&t.strength>=0&&(n.strength=t.strength),typeof t.bonus=="number"&&[1,1.5,2,2.5,3,4].includes(t.bonus)&&(n.bonus=t.bonus),typeof t.secondSleep=="boolean"&&(n.secondSleep=t.secondSleep),typeof t.tracking=="object"&&typeof t.tracking.score=="number"&&t.tracking.score>0&&t.tracking.score<=100&&typeof t.tracking.start=="number"&&t.tracking.score<new Date().getTime()/1e3&&typeof t.tracking.area=="number"&&t.tracking.area>=0&&t.tracking.area<je.length&&typeof t.tracking.strength=="number"&&t.tracking.strength>=0&&typeof t.tracking.dp=="number"&&t.tracking.dp>=0&&(n.tracking={score:t.tracking.score,start:t.tracking.start,area:t.tracking.area,strength:t.tracking.strength,dp:t.tracking.dp})),n}function ii(n){localStorage.setItem("ResearchCalcPokeSleep",JSON.stringify(n))}const oi=li();function ai(){const[n,s]=B.useState(oi),t=B.useCallback(l=>{const i={...n,...l};s(i),ii(i)},[n]),r=B.useCallback(l=>{t(l)},[t]);return e.jsxs("div",{style:{margin:"0 .5rem"},children:[e.jsx(Vl,{data:n,onChange:r}),e.jsx(ei,{fieldIndex:n.fieldIndex}),e.jsx(ri,{data:n})]})}const wn=new We;wn.load();function ci(){const n=di();let s=new Ne({pokemonName:"Venusaur"});if(n.iv!=="")try{s=Ne.deserialize(n.iv)}catch{}let t=-1;if(n.selectedIv!=="")try{const i=Ne.deserialize(n.selectedIv),o=wn.items.findIndex(c=>c.iv.isEqual(i));o>=0&&(t=wn.items[o].id)}catch{}const r={tabIndex:n.tabIndex,lowerTabIndex:n.lowerTabIndex,pokemonIv:s,parameter:Ot(),box:wn,selectedItemId:t,energyDialogOpen:!1,boxItemDialogOpen:!1,boxItemDialogKey:"",boxItemDialogIsEdit:!1,boxExportDialogOpen:!1,boxImportDialogOpen:!1,boxDeleteAllDialogOpen:!1,alertMessage:""},l=document.location.hash.match(/#p=(.*)/);if(l!==null)try{r.pokemonIv=Ne.deserialize(l[1])}catch{}return r}function di(){const n={tabIndex:0,lowerTabIndex:0,iv:"",selectedIv:""},s=localStorage.getItem("PstIvState");if(s===null)return n;const t=JSON.parse(s);return typeof t!="object"||t===null||(typeof t.tabIndex=="number"&&t.tabIndex>=0&&t.tabIndex<=2&&(n.tabIndex=t.tabIndex),typeof t.lowerTabIndex=="number"&&t.lowerTabIndex>=0&&t.lowerTabIndex<=2&&(n.lowerTabIndex=t.lowerTabIndex),typeof t.iv=="string"&&(n.iv=t.iv),typeof t.selectedIv=="string"&&(n.selectedIv=t.selectedIv)),n}function He(n){const s=n.box.getById(n.selectedItemId),t={tabIndex:n.tabIndex,lowerTabIndex:n.lowerTabIndex,iv:n.pokemonIv.serialize(),selectedIv:s===null?"":s.iv.serialize()};localStorage.setItem("PstIvState",JSON.stringify(t))}function mi(n,s){const t=s.type,r=n.box.getById(n.selectedItemId);if(t==="changeUpperTab"){const o=s.payload.index;let c=n.lowerTabIndex;o!==1&&c===2&&(c=0);const d={...n,tabIndex:o,lowerTabIndex:c};return He(d),d}if(t==="changeLowerTab"){const o={...n,lowerTabIndex:s.payload.index};return He(o),o}if(t==="changeParameter"){const o=s.payload.parameter,c=cn({...n,parameter:o});return localStorage.setItem("PstStrenghParam",JSON.stringify(c.parameter)),c}if(t==="openEnergyDialog")return{...n,energyDialogOpen:!0};if(t==="closeEnergyDialog")return{...n,energyDialogOpen:!1};if(t==="add")return n.box.canAdd?{...n,boxItemDialogOpen:!0,boxItemDialogKey:"dlg"+new Date().getTime().toString(),boxItemDialogIsEdit:!1}:{...n,alertMessage:"box is full"};if(t==="updateIv"){const o=cn({...n,pokemonIv:s.payload.iv});return He(o),o}if(t==="addThis"){if(!n.box.canAdd)return{...n,alertMessage:"box is full"};const o=new We(n.box.items),c=o.add(s.payload.iv,s.payload.nickname);return o.save(),{...n,box:o,selectedItemId:c}}if(t==="export")return{...n,boxExportDialogOpen:!0};if(t==="exportClose")return{...n,boxExportDialogOpen:!1};if(t==="import")return n.box.canAdd?{...n,boxImportDialogOpen:!0}:{...n,alertMessage:"box is full"};if(t==="importClose"){const o=new We(n.box.items);return{...n,box:o,boxImportDialogOpen:!1}}if(t==="deleteAll")return{...n,boxDeleteAllDialogOpen:!0};if(t==="deleteAllClose")return{...n,boxDeleteAllDialogOpen:!1};if(t==="restoreItem"){if(r!==null){const o=cn({...n,pokemonIv:r.iv});return He(o),o}return n}if(t==="saveItem"){const o=n.box.getById(n.selectedItemId);let c="";if(o!==null){c=o.nickname;const u=Lt.t(`pokemons.${o.iv.pokemon.name}`);c===u&&(c="")}const d=new We(n.box.items);d.set(n.selectedItemId,n.pokemonIv,c),d.save();const m={...n,box:d};return He(m),m}if(t==="editDialogClose")return{...n,boxItemDialogOpen:!1};if(t==="addOrEditDone"){const o=s.payload.item,c=new We(n.box.items);let d=n.selectedItemId;o.id===-1?d=c.add(o.iv,o.nickname):c.set(o.id,o.iv,o.nickname),c.save();const m=cn({...n,pokemonIv:o.iv,box:c});return m.selectedItemId=d,He(m),m}if(t==="showAlert")return{...n,alertMessage:s.payload.message};if(t==="closeAlert")return{...n,alertMessage:""};if(t!=="select"&&t!=="edit"&&t!=="dup"&&t!=="remove")return n;const l=s.payload.id,i=n.box.getById(l);if(i===null)return n;if(t==="select"){const o=cn({...n,pokemonIv:i.iv});return o.selectedItemId=l,He(o),o}else{if(t==="edit")return{...n,boxItemDialogOpen:!0,boxItemDialogKey:"dlg"+new Date().getTime().toString(),boxItemDialogIsEdit:!0};if(t==="dup"){const o=new We(n.box.items),c=o.add(i.iv.clone(),i.nickname);return o.save(),{...n,box:o,selectedItemId:c}}else if(t==="remove"){const o=new We(n.box.items);return o.remove(l),o.save(),{...n,box:o}}}return n}function cn(n){const s=n.box.getById(n.selectedItemId),t=Ee(n.parameter.event,n.parameter.customEventBonus);if(t!==void 0&&t.fixedBerries!==void 0&&t.fixedBerries?.length===3&&t.fixedAreas?.includes(n.parameter.fieldIndex)){let l=!1;const i=gs(n.parameter.fieldIndex);for(let o=0;o<3;o++)if(t.fixedBerries[o]!==null&&(i&&!n.parameter.favoriteType.includes(t.fixedBerries[o])||!i&&n.parameter.favoriteType[o]!==t.fixedBerries[o])){l=!0;break}l&&(n.parameter.favoriteType=[...t.fixedBerries],n.parameter.favoriteType[1]===null&&(n.parameter.favoriteType[1]=Ve.find(o=>!n.parameter.favoriteType.includes(o))??"normal"),n.parameter.favoriteType[2]===null&&(n.parameter.favoriteType[2]=Ve.find(o=>!n.parameter.favoriteType.includes(o))??"normal"))}if(!n.parameter.berryBurstTeam.auto&&n.pokemonIv.pokemon.skill==="Energy for Everyone S (Lunar Blessing)"){const l=n.parameter.berryBurstTeam.members.filter(i=>i.type===n.pokemonIv.pokemon.type).length+1;l<=2?n.parameter.berryBurstTeam.species=l:n.parameter.berryBurstTeam.species=Math.min(l,n.parameter.berryBurstTeam.species)}let r=n.selectedItemId;return s!==null&&(s.iv.pokemon.ancestor!==n.pokemonIv.pokemon.ancestor&&(r=-1),s.iv.pokemon.ancestor===null&&s.iv.pokemon.id!==n.pokemonIv.pokemon.id&&(r=-1)),{...n,selectedItemId:r}}function mt(n,s,t){const r=n.serialize(),i=`${window.location.href.split("#")[0].replace(/utm_source=homescreen&?/,"").replace(/\?$/,"")}#p=${r}`;return navigator.share?navigator.share({url:i}):xs(i).then(()=>{const o=t("copied");s({type:"showAlert",payload:{message:o}})})}const ui=a.memo(({state:n,isBoxEmpty:s,dispatch:t})=>{const r=n.tabIndex,l=n.lowerTabIndex,[i,o]=a.useState(null),[c,d]=a.useState(!1),{t:m}=w(),u=!!i&&l===0,g=!!i&&l===1,x=a.useRef(null),h=a.useCallback(N=>{o(null);const y=N.currentTarget.getAttribute("data-value")||"";y==="addThis"?d(!0):t({type:y})},[t]),p=a.useCallback(()=>{o(null),mt(n.pokemonIv,t,m)},[t,n.pokemonIv,m]),j=a.useCallback((N,y)=>{t({type:"changeLowerTab",payload:{index:y}}),o(null)},[t]),b=a.useCallback(N=>{o(N.currentTarget)},[]),k=a.useCallback(()=>{o(null)},[]),C=a.useCallback(()=>{d(!1)},[]),v=a.useCallback(N=>{d(!1),t({type:"addThis",payload:{iv:n.pokemonIv,nickname:N}}),pi(x.current)},[t,n.pokemonIv]);return e.jsxs(hi,{children:[l!==2&&e.jsx(q,{"aria-label":"actions",color:"inherit",onClick:b,children:e.jsx(js,{})}),e.jsxs(gi,{value:l,onChange:j,children:[e.jsx(Jn,{label:m("pokemon")}),e.jsx(Jn,{label:m("box"),ref:x}),r===1&&e.jsx(Jn,{label:m("parameter")})]}),e.jsx(jn,{anchorEl:i,open:u,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(Ge,{children:[e.jsxs(f,{onClick:h,"data-value":"addThis",children:[e.jsx(re,{children:e.jsx(at,{})}),m("add to box")]}),e.jsxs(f,{onClick:p,"data-value":"share",children:[e.jsx(re,{children:e.jsx(bs,{})}),m("share")]})]})}),e.jsx(jn,{anchorEl:i,open:g,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(Ge,{children:[e.jsxs(f,{"data-value":"export",onClick:h,disabled:s,children:[e.jsx(re,{children:e.jsx(pr,{})}),m("export")]}),e.jsxs(f,{"data-value":"import",onClick:h,children:[e.jsx(re,{children:e.jsx(fr,{})}),m("import")]}),e.jsx(Ae,{}),e.jsxs(f,{"data-value":"deleteAll",onClick:h,disabled:s,children:[e.jsx(re,{children:e.jsx(jr,{})}),m("delete all")]})]})}),e.jsx(xi,{open:c,initialNickname:m(`pokemons.${n.pokemonIv.pokemonName}`),onConfirm:v,onCancel:C})]})}),xi=a.memo(({open:n,initialNickname:s,onConfirm:t,onCancel:r})=>{const{t:l}=w(),[i,o]=a.useState("");a.useEffect(()=>{n&&o(s)},[n,s]);const c=a.useCallback(m=>{m.target?.select()},[]),d=a.useCallback(()=>{t(i===s?"":i)},[s,i,t]);return e.jsxs(G,{open:n,onClose:r,children:[e.jsx(me,{children:l("add to box")}),e.jsxs(Y,{children:[e.jsx(br,{sx:{marginBottom:2},children:l("confirm add to box")}),e.jsx(xe,{variant:"standard",size:"small",fullWidth:!0,value:i,onFocus:c,onChange:m=>o(m.target.value)})]}),e.jsxs(_,{children:[e.jsx(T,{onClick:d,autoFocus:!0,children:l("add")}),e.jsx(T,{onClick:r,children:l("cancel")})]})]})}),hi=S("div")({marginTop:"clamp(.3rem, 0.6vh, .7rem)","& > button.MuiIconButton-root":{float:"right",color:"#999"}}),gi=S(kn)({minHeight:"clamp(20px, 3vh, 36px)",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),Jn=S(en)({minHeight:"clamp(20px, 3vh, 36px)",padding:"6px 16px"});function pi(n){if(n===null)return;const s=n.getBoundingClientRect(),t=s.x+window.scrollX,r=s.y+window.scrollY,l=document.documentElement.clientWidth,i=400,o=document.createElement("div");o.style.position="absolute",o.style.left=`${t}px`,o.style.top=`${r}px`,o.style.width=`${s.width}px`,o.style.height=`${s.height}px`,o.style.background="#1976d2",o.style.opacity="0.6",o.style.transformOrigin="top left",o.style.zIndex="2",document.body.appendChild(o);const c=o.animate([{transform:`translateX(${-t}px) translateY(${s.height}px) scale(${l/s.width}, ${i/s.height})`},{transform:"translateX(0) translateY(0) scale(1, 1)",opacity:.1}],{duration:200,easing:"ease-out",iterations:1});c.onfinish=()=>{document.body.removeChild(o)}}const Hn=a.createContext({iconUrl:null,language:"",pwacnt:0,news:{ResearchCalc:"",IvCalc:""}});function Fc(n){const s={iconUrl:null,language:n,pwacnt:-1,news:{ResearchCalc:"",IvCalc:""}},t=localStorage.getItem("PokeSleepTool");if(t===null)return s;const r=JSON.parse(t);return typeof r!="object"||r==null||(typeof r.iconUrl=="string"&&r.iconUrl.match(/@ID[1-4]?@/)&&(s.iconUrl=r.iconUrl),typeof r.language=="string"&&(s.language=r.language),typeof r.pwacnt=="number"&&(s.pwacnt=r.pwacnt),typeof r.news=="object"&&(typeof r.news.ResearchCalc=="string"&&(s.news.ResearchCalc=r.news.ResearchCalc),typeof r.news.IvCalc=="string"&&(s.news.IvCalc=r.news.IvCalc))),s}function cs(n){localStorage.setItem("PokeSleepTool",JSON.stringify(n))}const Wn=a.memo(({idForm:n,size:s})=>{const t=a.useContext(Hn);if(t.iconUrl!==null&&t.iconUrl.match(/^https?:\/\//)){let l=t.iconUrl;const i=Ne.getIdByIdForm(n);return l=l.replace(/@ID(\d)@/g,(o,c)=>i.toString().padStart(parseInt(c,10),"0")),e.jsx("img",{src:l,width:s,height:s,alt:i.toString()})}const r=fi(n,s);return e.jsx(bi,{style:{width:`${s}px`,height:`${s}px`},children:e.jsx("svg",{width:s,height:s,viewBox:`0 0 ${s} ${s}`,children:r})})});function fi(n,s){let t;if(n in Un)t=n;else if(t=Ne.getIdByIdForm(n),!(t in Un))return ji(s);const r=Un[t],l=[];let i=0;for(const o of r){const c={};o.r!==void 0&&(c.rx=c.ry=(s*o.r).toFixed(1)),l.push(e.jsx("rect",{x:(s*o.x).toFixed(1),y:(s*o.y).toFixed(1),width:(s*o.w).toFixed(1),height:(s*o.h).toFixed(1),fill:o.color,...c},i)),i++}return l}function ji(n){return[e.jsx("rect",{x:"0",y:"0",width:n,height:n,fill:"#bbbbbb"})]}const bi=S("div")({border:"1px solid #999",borderRadius:".5rem",overflow:"hidden"}),ut=a.memo(({value:n,sortTypes:s,onChange:t,onFilterButtonClick:r})=>{const{t:l}=w(),[i,o]=a.useState(!1),c=a.useRef(null),d=B.useCallback(()=>{o(!0)},[o]),m=B.useCallback(()=>{o(!1)},[o]),u=B.useCallback(()=>{t({...n,descending:!n.descending})},[n,t]),g=B.useCallback(h=>{const p=h.currentTarget.getAttribute("data-value");p!=null&&(t({...n,sort:p}),o(!1))},[n,t,o]),x=s.map(h=>e.jsx(f,{onClick:g,"data-value":h,selected:n.sort===h,children:l(h)},h));return e.jsxs(ki,{children:[e.jsxs(ds,{style:{padding:".2rem .8rem",marginRight:".5rem",width:"4.5rem",textAlign:"left"},onClick:r,children:[e.jsx(Rn,{style:{paddingRight:"0"}}),l(n.isFiltered?"on":"off")]},n.isFiltered.toString()),e.jsxs(ds,{style:{padding:".2rem .8rem",marginRight:".5rem",width:"9rem",textAlign:"left"},onClick:d,ref:c,children:[e.jsx(kr,{style:{paddingRight:".4rem"}}),l(n.sort)]}),e.jsx(rn,{open:i,onClose:m,anchorEl:c.current,children:e.jsx(Ge,{children:x})}),e.jsx(yi,{className:n.descending?"desc":"asc",onClick:u,children:e.jsx(yr,{style:{width:"1rem",height:"1rem"}})})]})}),ki=S("div")({backgroundColor:"#f76",padding:".5rem .5rem"}),ds=S(Dn)({borderRadius:"3rem",background:"white",fontSize:".8rem",color:"#000",justifyContent:"left",boxShadow:"0 2px 2px 1px #88666666",fontFamily:"M PLUS 1p",svg:{width:"1.2rem",height:"1.2rem",color:"#24da6d"}}),yi=S(ds)({padding:".2rem",translation:"0.2s",svg:{width:"1rem",height:"1rem",transform:"translateY(0%)",transition:"0.2s"},"&.desc svg":{transform:"rotate(180deg)",transition:"0.2s"}}),_e=a.memo(a.forwardRef(({size:n,type:s,checked:t,disabled:r,deletable:l,onClick:i,onDelete:o},c)=>{const{t:d}=w(),m=B.useCallback(u=>{const g=u.nativeEvent.target?.closest(".deleteIcon")!=null,x=u.currentTarget.value;g?o?.(x):i(x)},[i,o]);return e.jsxs(vi,{ref:c,size:n??"medium",className:`${s}${l?" deletable":""}${r?" disabled":""}`,value:s,onClick:m,children:[d(`types.${s}`),t&&e.jsx(we,{}),l&&e.jsx(it,{className:"deleteIcon"})]},s)})),vi=S(T)({width:"5rem",color:"white",fontSize:"0.9rem",padding:0,margin:"0.2rem",borderRadius:"0.5rem","&.MuiButton-sizeSmall":{width:"4.6rem",fontSize:"0.8rem","&.deletable":{width:"5.6rem"},"&.disabled":{opacity:.7}},"& > svg":{position:"absolute",background:"#24d76a",borderRadius:"18px",fontSize:"16px",padding:"1px",border:"2px solid white",right:"-4px",top:"-4px","&.deleteIcon":{position:"absolute",background:"#ffffff",color:"#888888",borderRadius:"50%",fontSize:"14px",border:0,right:"-4px",top:"-2px"}},"&.normal":{backgroundColor:"#939393"},"&.fire":{backgroundColor:"#e8554d"},"&.water":{backgroundColor:"#579bf3"},"&.electric":{backgroundColor:"#f1c525"},"&.grass":{backgroundColor:"#57a747"},"&.ice":{backgroundColor:"#68c5df"},"&.fighting":{backgroundColor:"#e8a33b"},"&.poison":{backgroundColor:"#ab7aca"},"&.ground":{backgroundColor:"#c8a841"},"&.flying":{backgroundColor:"#add5ea"},"&.psychic":{backgroundColor:"#ed6c94"},"&.bug":{backgroundColor:"#a5ab39"},"&.rock":{backgroundColor:"#b2b194"},"&.ghost":{backgroundColor:"#8d658e"},"&.dragon":{backgroundColor:"#7482e9"},"&.dark":{backgroundColor:"#706261"},"&.steel":{backgroundColor:"#94b1c2"},"&.fairy":{backgroundColor:"#e48fe3"}}),De=a.memo(({specialty:n,checked:s,disabled:t,onClick:r})=>{const{t:l}=w(),i=B.useCallback(c=>{const d=c.currentTarget.value;r?.(d)},[r]);let o="";switch(n){case"Berries":o="berry";break;case"Ingredients":o="ingredient";break;case"Skills":o="skill";break}return t===!0?e.jsx(Ci,{className:o,children:l(o)},n):e.jsxs(Si,{className:`${o} ${s?"checked":""}`,value:n,onClick:i,children:[l(o),s&&e.jsx(we,{})]},n)}),Ci=S("span")({display:"inline-block",width:"4rem",fontSize:".6rem",padding:".1rem 0",textAlign:"center",color:"white",borderRadius:".6rem",verticalAlign:"20%","&.berry":{backgroundColor:"#24d76a"},"&.ingredient":{backgroundColor:"#fab855"},"&.skill":{backgroundColor:"#44a2fd"}}),Si=S(T)({width:"5.5rem",color:"white",fontSize:"0.8rem",padding:0,margin:"0.2rem",borderRadius:"1rem",textTransform:"none","& > svg":{position:"absolute",background:"#24d76a",borderRadius:"10px",fontSize:"15px",border:"2px solid white",right:"calc(50%-15px)",top:"calc(50%-15px)"},"&.berry":{backgroundColor:"#24d76a"},"&.berry.checked":{backgroundColor:"#bde9bb"},"&.ingredient":{backgroundColor:"#fab855"},"&.ingredient.checked":{backgroundColor:"#f3dcb3"},"&.skill":{backgroundColor:"#44a2fd"},"&.skill.checked":{backgroundColor:"#b8d0fa"}}),wi=S("div")({margin:"clamp(.3rem, 0.7vh, .5rem) 0",display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:".4rem .5rem"}),Ii=a.memo(({value:n,onChange:s})=>{const[t,r]=a.useState(!1),[l,i]=a.useState(10),o=a.useCallback(m=>{i(parseInt(m.currentTarget.name,10)),r(!0)},[i,r]),c=a.useCallback(m=>{i(m)},[i]),d=a.useCallback(()=>{r(!1)},[r]);return e.jsxs(wi,{children:[e.jsx(dn,{level:10,value:n.lv10,onClick:o}),e.jsx(dn,{level:25,value:n.lv25,onClick:o}),e.jsx(dn,{level:50,value:n.lv50,onClick:o}),e.jsx(dn,{level:75,value:n.lv75,onClick:o}),e.jsx(dn,{level:100,value:n.lv100,onClick:o}),e.jsx(Ni,{open:t,level:l,value:n,onClose:d,onChange:s,onLevelChange:c})]})}),xt=S(Dn)(({theme:n})=>{const s=n.typography.button;return{fontFamily:s.fontFamily,fontSize:"0.8rem",fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,lineHeight:s.lineHeight,height:"1.6rem",padding:".2rem",border:"1px solid #999",borderRadius:".4rem",background:"#d0d0d0","&.gold":{background:"#fbe778",borderColor:"#c19255"},"&.blue":{background:"#d3e9f7",borderColor:"#5e7da0"},"&.white":{background:"#f3f3f3",borderColor:"#999999"},"&.selected":{background:"#888c8f"}}}),dn=a.memo(({level:n,value:s,onClick:t})=>{const{t:r}=w(),l=s===null?"":r(`subskill.${s.name}`);let i="";return s?.isGold?i="gold":s?.isBlue?i="blue":s?.isWhite&&(i="white"),e.jsx(xt,{name:n.toString(),className:i,onClick:t,children:l})}),Bi=S("div")({header:{fontSize:".9rem"},"& div.subskill_list50":{margin:".2rem 0 1.2rem 0",display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:".3rem","& button":{fontSize:"0.75rem",whiteSpace:"nowrap"}},"& div.subskill_list25":{margin:".8rem 0",display:"grid",gridTemplateColumns:"max-content 2.5rem 2.5rem 2.5rem",gridGap:".3rem","& header":{textAlign:"right",paddingRight:".8rem"}}}),Ti=S(ct)(({theme:n})=>({position:"absolute",right:".5rem",top:"0","& .MuiBadge-badge":{border:`2px solid ${n.palette.background.paper}`,backgroundColor:"#24d76a",padding:0,"& > svg":{width:"14px",height:"14px",fontSize:"12px",padding:0,margin:0}},"&.isnum .MuiBadge-badge":{padding:"0 4px"}})),Ni=a.memo(({open:n,value:s,level:t,onChange:r,onClose:l,onLevelChange:i})=>{const{t:o}=w(),c=a.useCallback(u=>{const g=new Ks(u),x=s.getSubSkillLevel(g);let h;if(x===-1){const p=`lv${t}`;h=s.clone({[p]:g})}else{const p=`lv${x}`;h=s.clone({[p]:null})}r({value:h}),h.lv10===null?i(10):h.lv25===null?i(25):h.lv50===null?i(50):h.lv75===null?i(75):h.lv100===null?i(100):l()},[r,l,i,t,s]),d=a.useCallback(()=>{r({value:new $t}),i(10)},[r,i]),m=a.useCallback(u=>{const g=s.getSubSkillLevel(u);return g<0?0:g},[s]);return e.jsxs(G,{open:n,onClose:l,children:[e.jsx("div",{style:{padding:"1.2rem 1rem 1rem 1rem",fontSize:"1.1rem"},children:e.jsx(Q,{i18nKey:"select subskill at level xxx",components:{level:e.jsxs("strong",{children:[o("level")," ",t]})}})}),e.jsx("div",{style:{padding:"0 1rem"},children:e.jsx(ht,{subSkill2Badge:m,onClick:c})}),e.jsxs(_,{children:[e.jsx(T,{onClick:d,children:o("clear")}),e.jsx(T,{onClick:l,children:o("close")})]})]})}),ht=a.memo(({subSkill2Badge:n,onClick:s})=>{const{t}=w(),r=a.useCallback(i=>{s(i.currentTarget.value)},[s]),l=a.useCallback((i,o)=>{const c=new Ks(i),d=c.isGold?"gold":c.isBlue?"blue":"white",m=n(c),u=m!==0?`${d} selected`:d;return o===void 0&&(o=t(`subskill.${i}`)),e.jsx(e.Fragment,{children:e.jsxs(xt,{onClick:r,className:u,value:i,children:[o,e.jsx(Ti,{color:"secondary",badgeContent:m,max:100,className:typeof m=="number"?"isnum":""})]})})},[r,n,t]);return e.jsxs(Bi,{children:[e.jsx("header",{children:t("subskill.Gold colored")}),e.jsxs("div",{className:"subskill_list50",children:[l("Berry Finding S",void 0),l("Helping Bonus",void 0),l("Sleep EXP Bonus",void 0),l("Research EXP Bonus",void 0),l("Energy Recovery Bonus",void 0),l("Dream Shard Bonus",void 0)]}),e.jsxs("div",{className:"subskill_list25",children:[e.jsx("header",{children:t("subskill.Skill Level Up")}),l("Skill Level Up M","M"),l("Skill Level Up S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Skill Trigger")}),l("Skill Trigger M","M"),l("Skill Trigger S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Helping Speed")}),l("Helping Speed M","M"),l("Helping Speed S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Ingredient Finder")}),l("Ingredient Finder M","M"),l("Ingredient Finder S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Inventory Up")}),l("Inventory Up L","L"),l("Inventory Up M","M"),l("Inventory Up S","S")]})]})}),Ie=a.memo(({name:n})=>{switch(n){case"apple":return e.jsx(al,{});case"avocado":return e.jsx(ol,{});case"cacao":return e.jsx(il,{});case"coffee":return e.jsx(ll,{});case"corn":return e.jsx(rl,{});case"egg":return e.jsx(tl,{});case"ginger":return e.jsx(sl,{});case"herb":return e.jsx(nl,{});case"honey":return e.jsx(el,{});case"leek":return e.jsx(Zr,{});case"mushroom":return e.jsx(Qr,{});case"milk":return e.jsx(Yr,{});case"oil":return e.jsx(Jr,{});case"potato":return e.jsx(Kr,{});case"pumpkin":return e.jsx(Xr,{});case"sausage":return e.jsx(Ur,{});case"soy":return e.jsx(qr,{});case"tail":return e.jsx(Gr,{});case"tomato":return e.jsx(Vr,{});case"unknown":return e.jsx("svg",{width:"24",height:"20",viewBox:"0 0 24 24",children:e.jsx("svg",{viewBox:"0 0 200 200",children:e.jsx("line",{x1:"10",y1:"100",x2:"180",y2:"100",stroke:"#bbbbbb",strokeWidth:"12"})})});case"unknown1":return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#eaae35"})});case"unknown2":return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#56c0fe"})});case"unknown3":return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#f55865"})})}return e.jsx(e.Fragment,{})}),gt=a.memo(({ingredient:n,checked:s,onClick:t})=>{const r=B.useCallback(l=>{const i=l.currentTarget.value;t(i)},[t]);return e.jsxs(Mi,{value:n,onClick:r,children:[e.jsx(Ie,{name:n}),s&&e.jsx(we,{role:"switch"})]},n)}),Mi=S(T)({width:"20%",height:"40px",color:"white",fontSize:"0.9rem",padding:0,margin:"0.2rem",borderRadius:"0.5rem",'& > svg.MuiSvgIcon-root[role="switch"]':{position:"absolute",background:"#24d76a",borderRadius:"15px",fontSize:"15px",border:"2px solid white",bottom:"0px",right:"10px"}}),qe=a.memo(({mainSkill:n,second:s,firstIngredient:t})=>{switch(n){case"Charge Energy S":case"Charge Energy S (Moonlight)":return e.jsx(Br,{sx:{color:"#ff88aa"},fontSize:"small"});case"Energy for Everyone S":return e.jsx(Gn,{sx:{color:"#ff88aa"},fontSize:"small"});case"Energy for Everyone S (Lunar Blessing)":return s!==!0?e.jsx(Gn,{sx:{color:"#ff88aa"},fontSize:"small"}):e.jsx(oe,{sx:{color:"#ff944b"}});case"Energy for Everyone S (Berry Juice)":return s!==!0?e.jsx(Gn,{sx:{color:"#ff88aa"},fontSize:"small"}):e.jsx(Ir,{sx:{color:"#39e17aff"}});case"Energizing Cheer S":case"Energizing Cheer S (Nuzzle)":return e.jsx(zs,{sx:{color:"#ff88aa"},fontSize:"small"});case"Charge Strength M":case"Charge Strength M (Bad Dreams)":case"Charge Strength S":case"Charge Strength S (Random)":case"Charge Strength S (Stockpile)":case"Berry Burst":case"Berry Burst (Disguise)":return e.jsx(oe,{sx:{color:"#ff944b"}});case"Dream Shard Magnet S":case"Dream Shard Magnet S (Random)":return e.jsx(Bn,{});case"Extra Helpful S":return e.jsx(Rn,{sx:{color:"#66cc66"},fontSize:"small"});case"Helper Boost":return e.jsx(wr,{sx:{color:"#66cc66"},fontSize:"small"});case"Ingredient Magnet S (Plus)":return s!==!0?e.jsx(Xn,{fontSize:"small"}):e.jsx(Ie,{name:t??"apple"});case"Ingredient Magnet S (Present)":return s!==!0?e.jsx(Xn,{fontSize:"small"}):e.jsx(Me,{fontSize:"small"});case"Ingredient Magnet S":return e.jsx(Xn,{fontSize:"small"});case"Ingredient Draw S":return e.jsx(ml,{fontSize:"small",firstIngredient:t??"avocado"});case"Ingredient Draw S (Hyper Cutter)":return e.jsx(dl,{fontSize:"small"});case"Ingredient Draw S (Super Luck)":return s!==!0?e.jsx(cl,{fontSize:"small"}):e.jsx(Bn,{});case"Cooking Power-Up S":return e.jsx(Ds,{sx:{color:"#886666"},fontSize:"small"});case"Cooking Power-Up S (Minus)":return s!==!0?e.jsx(Ds,{sx:{color:"#886666"},fontSize:"small"}):e.jsx(zs,{sx:{color:"#ff88aa"},fontSize:"small"});case"Tasty Chance S":return e.jsx(Sr,{sx:{color:"#ff0000"},fontSize:"small"});case"Metronome":return e.jsx(Cr,{sx:{color:"#999"},fontSize:"small"});case"Skill Copy":case"Skill Copy (Mimic)":case"Skill Copy (Transform)":return e.jsx(vr,{sx:{color:"#999"},fontSize:"small"});default:return e.jsx(e.Fragment,{children:"ー"})}}),pt=a.memo(({mainSkill:n,checked:s,onClick:t})=>{const{t:r}=w(),l=B.useCallback(i=>{const o=i.currentTarget.value;t(o)},[t]);return e.jsxs(Ei,{value:n,onClick:l,children:[e.jsxs("div",{children:[!s&&e.jsx(qe,{mainSkill:n}),s&&e.jsx(we,{role:"switch"})]}),r(`skills.${n}`)]})}),Ei=S(T)({height:"2.2rem",lineHeight:1.2,margin:"1%",color:"black",fontSize:"0.8rem",justifyContent:"left",alignItems:"center",textAlign:"left",padding:0,textTransform:"none","& > div":{width:"24px","& > svg":{marginRight:"4px"},'& > svg[role="switch"]':{color:"white",width:"18px",height:"18px",background:"#24d76a",borderRadius:"5px",fontSize:"15px",border:"2px solid white"}}}),Je=S(Dn)(({theme:n})=>{const s=n.typography.button;return{fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,lineHeight:s.lineHeight,display:"inline",textAlign:"left",padding:0,color:"black","&::before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42)",content:'"\\00a0"',position:"absolute",bottom:0,left:0,right:0},"&::after":{borderBottom:"2px solid #1976d2",content:'"\\00a0"',position:"absolute",bottom:0,left:0,right:0,transform:"scaleX(0)",transition:"transform 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms"},"&:focus::after":{transform:"scaleX(1)"},"&.focused::after":{transform:"scaleX(1)"}}}),Fi=a.memo(({iv:n,onChange:s})=>{const t=n.nature,[r,l]=a.useState(!1),i=a.useRef(null),o=a.useCallback(()=>{l(m=>!m)},[l]),c=a.useCallback(()=>{l(!1)},[l]),d=a.useRef(r);return a.useEffect(()=>{d.current===!0&&r===!1&&i.current.focus(),d.current=r},[r]),e.jsxs(e.Fragment,{children:[e.jsx(Je,{ref:i,onClick:o,className:r?"focused":"",children:e.jsx(ft,{value:t})}),e.jsx(zi,{iv:n,open:r,anchorRef:i,onClose:c,onChange:s})]})}),zi=a.memo(({iv:n,open:s,anchorRef:t,onClose:r,onChange:l})=>{const{t:i}=w(),[o,c]=a.useState(1),[d,m]=a.useState(null),u=a.useMemo(()=>ve.allNatures.filter(b=>n.pokemon.id!==sr||n.pokemon.form==="Amped"&&b.isAmped||n.pokemon.form==="Low Key"&&b.isLowKey),[n.pokemon.id,n.pokemon.form]),g=a.useCallback(b=>{const k=b.currentTarget.getAttribute("value"),C=u.filter(v=>v.upEffect===k);if(C.length===1){l(new ve(C[0].name)),r();return}m(k),c(2)},[u,l,r]),x=a.useCallback(b=>{const k=b.currentTarget.getAttribute("value");k!==null&&(l(new ve(k)),r())},[l,r]),h=a.useCallback(b=>b.map(k=>({nature:k,key:i(`natures.${k.name}`)})).sort((k,C)=>k.key>C.key?1:-1).map(k=>k.nature),[i]);let p=[];const j=["No effect","Speed of help","Main skill chance","Ingredient finding","EXP gains","Energy recovery"];if(o===1)for(const b of j){const k=h(u.filter(v=>v.upEffect===b)).map(v=>e.jsx("span",{children:i(`natures.${v.name}`)},v.name)),C=b==="No effect"?e.jsx(e.Fragment,{children:i("nature effect.No effect")}):e.jsx(Xe,{children:i(`nature effect.${b}`)});p.push(e.jsx(Ri,{value:b,onClick:g,children:e.jsxs("div",{children:[e.jsx("div",{className:"up",children:C}),e.jsx("div",{className:"natures",children:k})]})},b))}return o===2&&(p=h(u.filter(k=>k.upEffect===d)).map(k=>e.jsx(f,{value:k.name,onClick:x,children:e.jsx(ft,{value:k})},k.name))),a.useEffect(()=>{s||c(1)},[s]),e.jsx(rn,{open:s,onClose:r,anchorEl:t.current,children:e.jsx(Ge,{children:p})})}),$s=S("div")({display:"grid",gridTemplateColumns:"8rem 1fr",gridGap:".3rem","& > span":{border:"2px solid #24d76a",borderRadius:"1rem",textAlign:"center",padding:".2rem 0",margin:".5rem 1rem .5rem 0"},"& > div":{margin:"auto 0",fontSize:".8rem","& > span":{display:"block"}}}),Xe=S("span")({"&::after":{content:'" ▲▲"',color:"#ff6666"}}),ln=S("span")({"&::after":{content:'" ▼▼"',color:"#6666ff"}}),Ri=S(f)({"& > div":{"& > div.up":{height:"1rem",fontSize:"1rem"},"& > div.natures":{height:".6rem","& >span":{paddingRight:".8rem",color:"#888",fontSize:".6rem"}}}}),ft=a.memo(({value:n})=>{const{t:s}=w();return n.upEffect==="No effect"?e.jsxs($s,{children:[e.jsx("span",{children:s(`natures.${n.name}`)}),e.jsx("div",{children:s("nature effect.No effect")})]}):e.jsxs($s,{children:[e.jsx("span",{children:s(`natures.${n.name}`)}),e.jsxs("div",{children:[e.jsx(Xe,{children:s(`nature effect.${n.upEffect}`)}),e.jsx(ln,{children:s(`nature effect.${n.downEffect}`)})]})]})});function Cs(){const n=a.useRef({elm:null}),[s,t]=a.useState(200),r=a.useMemo(()=>new ResizeObserver(()=>{const i=n.current.elm;i!==null&&t(Math.floor(i.getBoundingClientRect().width))}),[]),l=a.useCallback(i=>{if(i===null){r.disconnect();return}n.current.elm=i,t(Math.floor(i.getBoundingClientRect().width)),r.disconnect(),r.observe(i)},[r]);return[s,l]}const jt=20,Hs=20,bt=a.memo(({index:n,width:s,children:t,onChange:r})=>{const l=a.useRef(!0),i=Array.isArray(t)?t.length:0,o=s+jt,[{x:c},d]=Us(()=>({x:-n*o,immediate:l.current}),[n,o]),m=At(({active:u,movement:[g],velocity:[x]})=>{if(u)return d.start({x:-n*o+g,immediate:!0});const h=Math.abs(x)>.2||Math.abs(g)>s/2;let p=n;return h&&(p+=g>0?-1:1,p=ye(0,p,i-1)),p!==n&&r(p),d.start({x:-p*o,immediate:l.current})},{from:[-n*o,0],filterTaps:!0,bounds:()=>({left:n===i-1?-o*(i-1)-Hs:-1/0,right:n===0?Hs:1/0}),rubberband:!0});return a.useEffect(()=>{l.current?(d.set({x:-n*o}),requestAnimationFrame(()=>{l.current=!1})):d.start({x:-n*o})},[n,o,d]),Array.isArray(t)?e.jsx(Di,{...m(),children:e.jsx(Xs.div,{className:"tabTrack",style:{x:c},children:t.map((u,g)=>e.jsx("div",{style:{width:s},children:u},g))})}):null}),Di=S("div")({overflow:"hidden",touchAction:"pan-y",overscrollBehavior:"contain","& > div.tabTrack":{display:"flex",flexWrap:"nowrap",gap:jt,width:"max-content","& > div > *":{flex:"0 0 100%"}}}),Li=a.memo(({open:n,value:s,onChange:t,onClose:r})=>{const{t:l}=w(),[i,o]=Cs(),[c,d]=a.useState(s.defaultTabIndex),m=a.useCallback((y,E)=>{d(E)},[]),u=B.useCallback(()=>{t(new ce({}))},[t]),g=B.useCallback(()=>{r()},[r]),x=B.useCallback(y=>{t(new ce({...s,name:y.target.value}))},[s,t]),h=B.useCallback(y=>{const E=s.filterTypes.includes(y)?s.filterTypes.filter(D=>D!==y):[...s.filterTypes,y];t(new ce({...s,filterTypes:E}))},[s,t]),p=B.useCallback(y=>{t(new ce({...s,filterSpecialty:s.filterSpecialty.includes(y)?s.filterSpecialty.filter(E=>E!==y):[...s.filterSpecialty,y]}))},[s,t]),j=B.useCallback(y=>{const E=s.ingredientName===y?void 0:y;t(new ce({...s,ingredientName:E}))},[s,t]),b=a.useCallback(y=>{t(new ce({...s,ingredientUnlockedOnly:y.target.checked}))},[t,s]),k=B.useCallback(y=>{t(new ce({...s,mainSkillNames:y}))},[s,t]),C=Ve.map(y=>e.jsx(_e,{type:y,onClick:h,checked:s.filterTypes.includes(y)},y)),v=ps.map(y=>e.jsx(De,{specialty:y,onClick:p,checked:s.filterSpecialty.includes(y)},y)),N=zn.map(y=>e.jsx(gt,{ingredient:y,onClick:j,checked:s.ingredientName===y},y));return e.jsxs(Ai,{open:n,onClose:r,children:[e.jsx("div",{ref:o,children:e.jsx(xe,{size:"small",fullWidth:!0,value:s.name,onChange:x,slotProps:{input:{endAdornment:e.jsx(ue,{position:"start",children:e.jsx(Rn,{})})}}})}),e.jsxs(Pi,{variant:"scrollable",scrollButtons:!0,value:c,onChange:m,children:[e.jsx(mn,{label:l("type"),value:0}),e.jsx(mn,{label:l("ingredient"),value:1}),e.jsx(mn,{label:l("main skill"),value:2}),e.jsx(mn,{label:l("sub skills"),value:3}),e.jsx(mn,{label:l("nature"),value:4})]}),e.jsxs(bt,{index:c,width:i,onChange:d,children:[e.jsxs("div",{className:"tabChild",children:[C,e.jsx("h4",{style:{margin:"1rem 0 0.5rem"},children:l("specialty")}),v]}),e.jsxs("div",{className:"tabChild",children:[N,e.jsxs("section",{children:[e.jsxs("label",{children:[l("unlocked only"),":"]}),e.jsx(te,{checked:s.ingredientUnlockedOnly,onChange:b})]})]}),e.jsx("div",{className:"tabChild",children:e.jsx(Oi,{value:s.mainSkillNames,onChange:k})}),e.jsx("div",{className:"tabChild",children:e.jsx($i,{value:s,onChange:t})}),e.jsx("div",{className:"tabChild",children:e.jsx(Hi,{value:s,onChange:t})})]}),e.jsxs(_,{children:[e.jsx(T,{onClick:u,children:l("clear")}),e.jsx(T,{onClick:g,children:l("close")})]})]})}),Ai=S(G)({"div.MuiPaper-root":{maxWidth:"480px","& > div":{margin:".5rem .5rem 0 .5rem"},"& div.tabChild":{"& > section":{margin:"0 0.8rem",fontSize:".9rem",display:"flex",flex:"0 auto",alignItems:"center",maxWidth:"100%","&:first-of-type":{marginTop:"0.3rem"},"& > label":{marginRight:"auto"}}}}}),Pi=S(kn)({minHeight:"36px",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),mn=S(en)({minHeight:"36px",minWidth:"0",padding:"6px clamp(6px, 1vw, 8px)",textTransform:"none"}),Oi=a.memo(({value:n,onChange:s})=>{const t=B.useCallback(l=>{const i=n.includes(l)?n.filter(o=>o!==l):[...n,l];s(i)},[n,s]),r=En.map(l=>e.jsx(pt,{mainSkill:l,onClick:t,checked:n.includes(l)},l));return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:r})}),$i=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=B.useCallback(c=>{const d=n.subSkillNames.includes(c)?n.subSkillNames.filter(m=>m!==c):[...n.subSkillNames,c];s(new ce({...n,subSkillNames:d}))},[n,s]),l=B.useCallback(c=>{s(new ce({...n,subSkillUnlockedOnly:c.target.checked}))},[n,s]),i=B.useCallback(c=>{s(new ce({...n,subSkillAnd:c.target.checked}))},[n,s]),o=a.useCallback(c=>n.subSkillNames.includes(c.name)?e.jsx(we,{}):0,[n]);return e.jsxs(e.Fragment,{children:[e.jsx(ht,{subSkill2Badge:o,onClick:r}),e.jsxs("section",{style:{marginTop:"2rem"},children:[e.jsxs("label",{children:[t("unlocked only"),":"]}),e.jsx(te,{checked:n.subSkillUnlockedOnly,size:"small",onChange:l})]}),e.jsxs("section",{children:[e.jsx("label",{children:"AND:"}),e.jsx(te,{checked:n.subSkillAnd,size:"small",onChange:i})]})]})}),Hi=a.memo(({value:n,onChange:s})=>{const t=B.useCallback(()=>{s(new ce({...n,neutralNature:!n.neutralNature,upNature:"No effect",downNature:"No effect"}))},[n,s]),r=B.useCallback(i=>{let o=n.downNature;o===i&&(o="No effect"),s(new ce({...n,neutralNature:!1,upNature:i===n.upNature?"No effect":i,downNature:o}))},[n,s]),l=B.useCallback(i=>{let o=n.upNature;o===i&&(o="No effect"),s(new ce({...n,neutralNature:!1,upNature:o,downNature:i===n.downNature?"No effect":i}))},[n,s]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:"0.4rem"},children:e.jsx(be,{label:"No effect",onClick:t,checked:n.neutralNature})}),e.jsxs(Ws,{children:[e.jsx(be,{label:"Speed of help",up:!0,checked:n.upNature==="Speed of help",onClick:r}),e.jsx(be,{label:"Main skill chance",up:!0,checked:n.upNature==="Main skill chance",onClick:r}),e.jsx(be,{label:"Ingredient finding",up:!0,checked:n.upNature==="Ingredient finding",onClick:r}),e.jsx(be,{label:"EXP gains",up:!0,checked:n.upNature==="EXP gains",onClick:r}),e.jsx(be,{label:"Energy recovery",up:!0,checked:n.upNature==="Energy recovery",onClick:r})]}),e.jsxs(Ws,{children:[e.jsx(be,{label:"Speed of help",down:!0,checked:n.downNature==="Speed of help",onClick:l}),e.jsx(be,{label:"Main skill chance",down:!0,checked:n.downNature==="Main skill chance",onClick:l}),e.jsx(be,{label:"Ingredient finding",down:!0,checked:n.downNature==="Ingredient finding",onClick:l}),e.jsx(be,{label:"EXP gains",down:!0,checked:n.downNature==="EXP gains",onClick:l}),e.jsx(be,{label:"Energy recovery",down:!0,checked:n.downNature==="Energy recovery",onClick:l})]})]})}),Ws=S("div")({display:"grid",gridTemplateColumns:"1fr 1fr",marginTop:"1rem"}),be=a.memo(({label:n,checked:s,up:t,down:r,onClick:l})=>{const{t:i}=w(),o=B.useCallback(c=>{const d=c.currentTarget.value;l(d)},[l]);return e.jsxs(Wi,{value:n,onClick:o,children:[t===!0?e.jsx(Xe,{children:i(`nature effect.${n}`)}):r===!0?e.jsx(ln,{children:i(`nature effect.${n}`)}):i(`nature effect.${n}`),s&&e.jsx(we,{role:"switch"})]},n)}),Wi=S(T)({color:"black",textAlign:"left",fontSize:"clamp(0.65rem, calc(2vw), 0.8rem)",textTransform:"none",borderRadius:"0.5rem",border:"1px solid #ccc",margin:"2px",'& > svg.MuiSvgIcon-root[role="switch"]':{position:"absolute",background:"#24d76a",borderRadius:"15px",fontSize:"15px",color:"white",border:"1px solid white",bottom:"1px",right:"10px"}}),ee=a.memo(({children:n,value:s,renderValue:t,sx:r,menuSx:l,onChange:i})=>{const[o,c]=a.useState(!1),d=a.useRef(null),m=a.useCallback(()=>{c(!0)},[]),u=a.useCallback(()=>{c(!1)},[]),g=a.useCallback(b=>{if(i===void 0)return;const k=b.props.value;k!=null&&(i(String(k)),u())},[i,u]),x=a.Children.toArray(n),h=x.find(b=>b.props.value===s);let p=null;t!==void 0?p=t(s):h&&(p=h.props.children);const j=x.map(b=>{const k=s===b.props.value;return a.cloneElement(b,{onClick:()=>{g(b)},selected:k})});return e.jsxs(e.Fragment,{children:[e.jsx(Je,{ref:d,onClick:m,style:r,className:o?"focused":"",children:p}),e.jsx(rn,{anchorEl:d.current,open:o,onClose:u,children:e.jsx(Ge,{style:l,children:j})})]})}),Ss=a.memo(({value:n,dispatch:s,sx:t})=>{const{t:r}=w(),l=a.useCallback(i=>{s({type:"changeParameter",payload:{parameter:{...n,level:parseInt(i,10)}}})},[s,n]);return e.jsxs(ee,{sx:t,value:n.level,onChange:l,children:[e.jsx(f,{dense:!0,value:0,children:r("current level")}),e.jsx(Ae,{}),e.jsx(f,{dense:!0,value:10,children:"Lv. 10"}),e.jsx(f,{dense:!0,value:25,children:"Lv. 25"}),e.jsx(f,{dense:!0,value:30,children:"Lv. 30"}),e.jsx(f,{dense:!0,value:50,children:"Lv. 50"}),e.jsx(f,{dense:!0,value:60,children:"Lv. 60"}),e.jsx(f,{dense:!0,value:65,children:"Lv. 65"}),e.jsx(f,{dense:!0,value:75,children:"Lv. 75"}),e.jsx(f,{dense:!0,value:100,children:"Lv. 100"})]})}),_n=a.memo(({min:n,max:s,value:t,onChange:r,sx:l})=>{const i=a.useCallback(()=>{r(t-1)},[t,r]),o=a.useCallback(()=>{r(t+1)},[t,r]);return e.jsxs(_i,{sx:l,children:[e.jsx(nn,{label:"◀",disabled:t===n,onClick:i}),e.jsx(On,{min:n,max:s,size:"small",style:{userSelect:"none"},value:t,onChange2:r}),e.jsx(nn,{label:"▶",disabled:t===s,onClick:o})]})}),_i=S("div")({display:"flex",alignItems:"center",gap:".7rem",height:"1.8rem",flex:1}),Yn=85,Vi=a.memo(({value:n,onChange:s})=>{const t=a.useRef(null),r=a.useCallback(i=>{t.current?.close(),s(i)},[s]),l=[];for(let i=0;i<=Yn;i+=5)l.push(i);return e.jsx($n,{ref:t,min:0,max:Yn,value:n,onChange:s,sx:{width:"2.5rem",fontSize:"0.9rem"},endAdornment:e.jsx(ue,{position:"end",onClick:()=>t.current?.focus(),children:e.jsx("span",{style:{fontSize:"0.8rem",color:"#888"},children:"%"})}),children:e.jsxs("div",{children:[e.jsx(_n,{min:0,max:Yn,value:n,onChange:s,sx:{padding:"0.5rem 1rem 0 1rem"}}),e.jsx(Gi,{children:l.map(i=>e.jsxs(q,{onClick:()=>r(i),children:[i,"%"]},i))})]})})}),Gi=S("div")({display:"grid",gridTemplateColumns:"repeat(6, 3.2rem)",gap:0,"& > button":{width:"3.2rem",height:"2rem",borderRadius:0,fontSize:"0.85rem"}}),Ye=a.memo(({size:n,type:s,disabled:t,deletable:r,onChange:l,onClick:i,onDelete:o})=>{const[c,d]=a.useState(!1),m=a.useRef(null),u=a.useCallback(j=>{i?.(j),t!==!0&&d(!0)},[t,i]),g=a.useCallback(()=>{o?.(s)},[s,o]),x=a.useCallback(j=>{l(j),d(!1)},[l]),h=a.useCallback(()=>{d(!1)},[]),p=Ve.map(j=>e.jsx(_e,{type:j,size:n,onClick:x,checked:j===s},j));return e.jsxs(e.Fragment,{children:[e.jsx(_e,{ref:m,type:s,size:n,deletable:r,disabled:t,onClick:u,onDelete:g,checked:!1}),e.jsx(rn,{anchorEl:m.current,open:c,onClose:h,children:e.jsx(Ge,{style:{padding:0,width:n==="small"?"15rem":"16.2rem"},children:p})})]})}),qi=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=gs(n.fieldIndex),{types:l,reasons:i}=a.useMemo(()=>Ht(n),[n]),o=a.useCallback(g=>{const x=[n.favoriteType[0]??"normal",n.favoriteType[1]??"normal",n.favoriteType[2]??"normal"];x[0]=g,s({...n,favoriteType:x})},[s,n]),c=a.useCallback(g=>{const x=[n.favoriteType[0]??"normal",n.favoriteType[1]??"normal",n.favoriteType[2]??"normal"];x[1]=g,s({...n,favoriteType:x})},[s,n]),d=a.useCallback(g=>{const x=[n.favoriteType[0]??"normal",n.favoriteType[1]??"normal",n.favoriteType[2]??"normal"];x[2]=g,s({...n,favoriteType:x})},[s,n]),m=a.useCallback(g=>{const x=[g,...l.filter(h=>h!==g)];s({...n,favoriteType:x})},[s,n,l]),u=a.useCallback(g=>{s({...n,expertEffect:g})},[s,n]);return e.jsxs(fe,{show:n.fieldIndex>=0,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[t("favorite berry"),":"]}),e.jsxs(Xi,{children:[e.jsxs("span",{children:[r&&e.jsx("header",{children:t("main")}),i[0]==="random"?e.jsx(Ye,{type:l[0],size:"small",onChange:o}):e.jsx(_e,{type:l[0],size:"small",checked:!1,onClick:m}),e.jsx("footer",{className:i[0].replace(/ /g,"-"),children:t(i[0])})]}),e.jsxs("span",{children:[r&&e.jsx("header",{children:t("sub1")}),i[1]==="random"?e.jsx(Ye,{type:l[1],size:"small",onChange:c}):e.jsx(_e,{type:l[1],size:"small",checked:!1,onClick:m}),e.jsx("footer",{className:i[1].replace(/ /g,"-"),children:t(i[1])})]}),e.jsxs("span",{children:[r&&e.jsx("header",{children:t("sub2")}),i[2]==="random"?e.jsx(Ye,{type:l[2],size:"small",onChange:d}):e.jsx(_e,{type:l[2],size:"small",checked:!1,onClick:m}),e.jsx("footer",{className:i[2].replace(/ /g,"-"),children:t(i[2])})]})]})]}),r&&e.jsxs("section",{children:[e.jsxs("label",{children:[t("expert effect"),":"]}),e.jsx(Ui,{value:n.expertEffect,onChange:u})]})]})}),Ui=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=a.useCallback(l=>{s(l.target.value)},[s]);return e.jsxs(ge,{variant:"standard",value:n,onChange:r,children:[e.jsx(f,{value:"berry",children:t("expert berry effect")}),e.jsxs(f,{value:"ing",children:[t("expert ing effect"),e.jsx("br",{}),e.jsx("small",{children:t("expert ing effect2")})]}),e.jsx(f,{value:"skill",children:t("expert skill effect")})]})}),Xi=S("span")({display:"flex","& > span":{display:"grid","& header":{display:"block",textAlign:"center",color:"white",width:"2rem",background:"#7cd377",fontSize:"0.5rem",borderRadius:"0.7rem",margin:"0 auto 2px auto",padding:"2px 12px"},"& > button":{marginTop:0,marginButton:0},"& > footer":{textAlign:"center",position:"relative",top:"-3px",fontSize:"0.6rem",fontWeight:"bold",color:"#7cd377","&.set-for-event":{color:"#e07377"}}}}),kt=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=a.useCallback(o=>{s({...n,fieldBonus:o})},[s,n]),l=a.useCallback(o=>{s({...n,isGoodCampTicketSet:o.target.checked})},[s,n]),i=n.period!==Oe;return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[t("research area"),":"]}),e.jsx(vt,{value:n,fontSize:"0.9rem",onChange:s})]}),e.jsx(qi,{value:n,onChange:s}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("area bonus"),":"]}),e.jsx(Vi,{value:n.fieldBonus,onChange:r})]}),e.jsx(de,{in:i,children:e.jsxs("section",{children:[e.jsxs("label",{children:[t("good camp ticket"),":"]}),e.jsx(te,{checked:n.isGoodCampTicketSet,size:"small",onChange:l})]})})]})}),yt=a.memo(({open:n,value:s,onChange:t,onClose:r})=>{const{t:l}=w();return n?e.jsxs(G,{open:n,onClose:r,children:[e.jsx(Ki,{children:e.jsx(kt,{value:s,onChange:t})}),e.jsx(_,{children:e.jsx(T,{onClick:r,children:l("close")})})]}):e.jsx(e.Fragment,{})}),Ki=S(Y)({minWidth:"16rem",paddingBottom:0,fontSize:"0.9rem","& section":{"& > label":{paddingTop:"1rem",display:"block"},"&.first > label":{paddingTop:0},"& > span, & > div, & > button:first-of-type":{marginLeft:"1rem",fontSize:"0.9rem"}}}),vt=a.memo(({showConfigButton:n,value:s,fontSize:t,onChange:r})=>{const{t:l}=w(),[i,o]=a.useState(!1),c=a.useCallback(x=>{const h=parseInt(x,10);r({...s,fieldIndex:h})},[r,s]),d=a.useCallback(()=>{o(!0)},[]),m=a.useCallback(()=>{o(!1)},[]),u=[],g=[...je];u.push(e.jsx(f,{value:rs,dense:!0,children:l("no favorite berries")},rs)),u.push(e.jsx(f,{value:ls,dense:!0,children:l("all favorite berries")},ls)),u.push(e.jsx(Ae,{},"divider"));for(const x of g)u.push(e.jsxs(f,{value:x.index,dense:!0,children:[e.jsx("span",{className:"field_icon",children:x.emoji}),l(`area.${x.index}`)]},x.index));return e.jsxs(e.Fragment,{children:[e.jsx(ee,{value:s.fieldIndex,onChange:c,sx:{padding:"0 .2rem",fontSize:t??"1rem"},children:u}),n&&e.jsx(q,{size:"small",style:{padding:"2px"},onClick:d,children:e.jsx(dt,{fontSize:t?"inherit":"small"})}),e.jsx(yt,{open:i,onClose:m,value:s,onChange:r})]})}),Ji=a.memo(({sortConfig:n,parameter:s,dispatch:t,onChange:r})=>{const{t:l}=w(),i=a.useCallback(x=>{t({type:"changeParameter",payload:{parameter:x}})},[t]),o=a.useCallback(x=>{r({...n,ingredient:x})},[r,n]),c=a.useCallback(x=>{r({...n,mainSkill:x})},[r,n]),d=a.useCallback(x=>{i({...s,evolved:x.target.checked})},[s,i]),m=a.useCallback(x=>{i({...s,maxSkillLevel:x.target.checked})},[s,i]),u=a.useMemo(()=>{const x=zn.map(h=>e.jsx(Qn,{value:h,children:e.jsx(Ie,{name:h})},h));return x.push(e.jsx(Ae,{style:{gridColumn:"1 / -1"}},"divider")),x.push(e.jsx(Qn,{value:"strength",style:{gridColumn:"span 2",width:"8rem"},children:l("total strength")},"strength")),x.push(e.jsx(Qn,{value:"count",style:{gridColumn:"span 2",width:"8rem"},children:l("total count")},"count")),x},[l]),g=a.useMemo(()=>{const x=En.map(h=>e.jsxs(Zn,{value:h,children:[e.jsx(qe,{mainSkill:h}),l(`skills.${h}`)]},h));return x.push(e.jsx(Ae,{style:{gridColumn:"1 / -1"}},"divider")),x.push(e.jsx(Zn,{value:"strength",style:{paddingLeft:".8rem"},children:l("strength2")},"strength")),x.push(e.jsx(Zn,{value:"count",style:{paddingLeft:".8rem"},children:l("skill count")},"count")),x},[l]);return n.sort!=="total strength"&&n.sort!=="berry"&&n.sort!=="ingredient"&&n.sort!=="skill"?e.jsx(e.Fragment,{}):e.jsx(Yi,{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx(Ss,{value:s,dispatch:t,sx:{padding:"0 .2rem",fontSize:"0.8rem",textWrap:"nowrap"}})}),(n.sort==="berry"||n.sort==="total strength")&&e.jsx("span",{className:"field",children:e.jsx(vt,{value:s,onChange:i,fontSize:"0.8rem",showConfigButton:!0})}),n.sort==="ingredient"&&e.jsx("span",{className:"ing",children:e.jsx(ee,{onChange:o,value:n.ingredient,sx:{padding:"0 .5rem",fontSize:"0.8rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr"},children:u})}),n.sort==="skill"&&e.jsx("span",{className:"skill",children:e.jsx(ee,{onChange:c,sx:{fontSize:"0.8rem",textWrap:"nowrap"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},value:n.mainSkill,children:g})}),e.jsx("span",{className:"switch",children:e.jsx(In,{control:e.jsx(te,{checked:s.evolved,size:"small",onChange:d}),label:l("calc with evolved (short)")})}),n.sort==="skill"&&e.jsx("span",{className:"switch",children:e.jsx(In,{control:e.jsx(te,{checked:s.maxSkillLevel,size:"small",onChange:m}),label:l("calc with max skill level (short)")})})]})})}),Yi=S("div")({"& > div":{padding:".2rem 0 .2rem 1.2rem",background:"#f3f5f0",borderTop:"1px solid #ccc",position:"relative",display:"flex",flexWrap:"wrap",alignItems:"stretch",gap:"0 10px","& > span":{"& > button":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& span":{fontSize:"0.8rem"},"&.ing svg":{padding:"0 5px",width:"18px",height:"18px"},"&.skill svg":{width:"18px",height:"18px",paddingRight:"4px",verticalAlign:"top"},"&.switch":{paddingLeft:"5px","& span.MuiTypography-root":{textWrap:"nowrap"}}}}}),Qn=S(f)({width:"4rem",fontSize:"0.9rem"}),Zn=S(f)({maxWidth:"12rem",fontSize:"0.8rem",paddingLeft:"4px",textWrap:"wrap","& > svg":{width:"18px",height:"18px",padding:"0 4px",flexShrink:0}}),ke=a.memo(a.forwardRef(({min:n,max:s,value:t,onChange:r,...l},i)=>e.jsx($n,{ref:i,min:n,max:s,value:t,onChange:r,...l,children:e.jsx(_n,{min:n??0,max:s??Number.MAX_SAFE_INTEGER,sx:{padding:"0.2rem 0.5rem",minWidth:"300px"},value:t,onChange:r})}))),Qi=S("div")({display:"flex",alignItems:"center",gap:".7rem",height:"1.8rem","& > div.numeric":{width:"2.2rem","& > div.MuiInput-root > input":{fontSize:"0.9rem"}}}),Zi=a.memo(({max100:n,value:s,onChange:t})=>{const r=n?100:pe;return e.jsxs(Qi,{children:[e.jsx(Ue,{max100:n,value:s,onChange:t}),e.jsx(_n,{min:1,max:r,value:s,onChange:t})]})}),Ue=a.memo(({max100:n,showSlider:s,sx:t,value:r,onChange:l})=>{const i=a.useRef(null),o=a.useCallback(d=>{i.current?.close(),l(d)},[l]),c=n?100:pe;return e.jsx($n,{ref:i,value:r,onChange:l,min:1,max:c,sx:t,children:e.jsxs(eo,{children:[s&&e.jsx(_n,{min:1,max:c,value:r,onChange:l}),e.jsxs("div",{className:"buttons",children:[e.jsx(T,{onClick:()=>o(10),children:"10"}),e.jsx(T,{onClick:()=>o(25),children:"25"}),e.jsx(T,{onClick:()=>o(30),children:"30"}),!n&&e.jsx(T,{onClick:()=>o(40),children:"40"}),e.jsx(T,{onClick:()=>o(50),children:"50"}),e.jsx(T,{onClick:()=>o(60),children:"60"}),e.jsx(T,{onClick:()=>o(65),children:"65"}),n&&e.jsx(T,{onClick:()=>o(75),children:"75"}),n&&e.jsx(T,{onClick:()=>o(100),children:"100"})]})]})})}),eo=S("div")({padding:".3rem .7rem","& > div.buttons":{paddingTop:".4rem",display:"flex",flexWrap:"wrap",gap:"0.3rem 0.5rem","& > button":{color:"#79d073",fontWeight:"bold",fontSize:"0.8rem",padding:0,width:"1.8rem",height:"1.8rem",minWidth:"1.8rem",minHeight:"1.8rem",borderRadius:"50%",border:"1.5px solid #79d073"}}}),no=a.memo(({count:n,iv:s,open:t,onClose:r})=>{const{t:l}=w(),[i,o]=a.useState({required:n,pokemon:0,handyS:0,handyM:0,handyL:0,typeS:0,typeM:0,typeL:0}),c=a.useCallback((h,p)=>{const j={...i};switch(h){case"required":j.required=p;break;case"pokemon":j.pokemon=p;break;case"handyS":j.handyS=p;break;case"handyM":j.handyM=p;break;case"handyL":j.handyL=p;break;case"typeS":j.typeS=p;break;case"typeM":j.typeM=p;break;case"typeL":j.typeL=p;break}o(j)},[i]);if(a.useEffect(()=>{t&&o(h=>({...h,required:n}))},[n,t]),!t)return null;const d=s.pokemon.id,m=l(`pokemons.${st(d)}`).replace(/ \(.+/,"");let u=[],g=0;const x=Math.max(0,i.required-i.pokemon);return x>0&&(g=Is(i),x<=g&&(u=Wt(x,i))),e.jsxs(so,{open:t,onClose:r,children:[e.jsxs(to,{children:[e.jsxs("header",{children:[e.jsxs("label",{children:[l("required candy"),":"]}),e.jsx("section",{children:e.jsx(ke,{min:0,max:4e3,value:i.required,startAdornment:e.jsx(ue,{position:"start",children:e.jsx(Me,{sx:{color:"#79d073"}})}),onChange:h=>c("required",h)})}),e.jsxs("label",{children:[l("pokemon candy",{name:m}),":"]}),e.jsx("section",{children:e.jsx(ke,{min:0,max:4e3,value:i.pokemon,startAdornment:e.jsx(ue,{position:"start",children:e.jsx(Me,{})}),onChange:h=>c("pokemon",h)})})]}),e.jsxs("article",{className:"handy",children:[e.jsxs("label",{children:[l("handy candy"),":"]}),e.jsx(ke,{min:0,max:999,value:i.handyS,startAdornment:e.jsx(ue,{position:"start",children:"S"}),onChange:h=>c("handyS",h)}),e.jsx(ke,{min:0,max:99,value:i.handyM,startAdornment:e.jsx(ue,{position:"start",children:"M"}),onChange:h=>c("handyM",h)}),e.jsx(ke,{min:0,max:99,value:i.handyL,startAdornment:e.jsx(ue,{position:"start",children:"L"}),onChange:h=>c("handyL",h)}),e.jsx("span",{}),e.jsx("span",{children:"×3"}),e.jsx("span",{children:"×20"}),e.jsx("span",{children:"×100"})]}),e.jsxs("article",{className:"type",children:[e.jsxs("label",{children:[l("type candy"),":"]}),e.jsx(ke,{min:0,max:999,value:i.typeS,startAdornment:e.jsx(ue,{position:"start",children:"S"}),onChange:h=>c("typeS",h)}),e.jsx(ke,{min:0,max:99,value:i.typeM,startAdornment:e.jsx(ue,{position:"start",children:"M"}),onChange:h=>c("typeM",h)}),e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{children:"×4"}),e.jsx("span",{children:"×25"}),e.jsx("span",{})]}),e.jsx(fe,{show:x===0,children:e.jsx(Rs,{severity:"info",children:l("sufficient candy")})}),e.jsx(fe,{show:x>0&&u.length===0,children:e.jsx(Rs,{severity:"error",children:l("insufficient n candy",{n:O(x-g)})})}),e.jsx(fe,{show:x>0&&u.length>0,children:e.jsxs("table",{children:[e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{colSpan:3,className:"handy",children:l("handy candy")}),e.jsx("th",{colSpan:2,className:"type",children:l("type candy")}),e.jsx("th",{rowSpan:2,className:"sum",children:l("total")})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"handy",children:"S"}),e.jsx("th",{className:"handy",children:"M"}),e.jsx("th",{className:"handy",children:"L"}),e.jsx("th",{className:"type",children:"S"}),e.jsx("th",{className:"type",children:"M"})]})]}),e.jsx("tbody",{children:u.map((h,p)=>{const j=Is(h);return e.jsxs("tr",{children:[e.jsx("td",{className:`handy${h.handyS===0?" empty":""}`,children:h.handyS}),e.jsx("td",{className:`handy${h.handyM===0?" empty":""}`,children:h.handyM}),e.jsx("td",{className:`handy${h.handyL===0?" empty":""}`,children:h.handyL}),e.jsx("td",{className:`type${h.typeS===0?" empty":""}`,children:h.typeS}),e.jsx("td",{className:`type${h.typeM===0?" empty":""}`,children:h.typeM}),e.jsxs("td",{className:"sum",children:[O(j),e.jsxs("small",{children:[" (+",j-x,")"]})]})]},p)})})]})})]}),e.jsx(_,{children:e.jsx(T,{onClick:r,children:l("close")})})]})}),so=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",maxWidth:"400px",margin:"20px"}}),to=S("div")({padding:"0.8rem 0.5rem 0 0.5rem","& > header":{display:"grid",gap:"0.2rem 0.8rem",gridTemplateColumns:"8rem 1fr",alignItems:"center","& > label":{fontSize:"0.9rem"},"& > section":{width:"5rem","& > div.numeric":{"& > div.MuiInput-root":{"& > input":{padding:"2px 0"}},"& svg":{fontSize:"0.9rem"}}}},"& > article":{display:"grid",gap:"0 0.8rem",gridTemplateColumns:"6.5rem 3.5rem 3.5rem 3.5rem",alignItems:"center",marginTop:"0.4rem","&.handy":{marginTop:"2rem"},"& > label":{fontSize:"0.9rem"},"& .numeric":{fontSize:"0.9rem",width:"3rem","& .MuiInputAdornment-root > p":{color:"#ff6633",fontSize:"0.8rem",fontWeight:"bold",textAlign:"center",transform:"scale(1, 0.9)"},"& input":{fontSize:"0.9rem"}},"&.type":{marginBottom:"1.5rem","& .numeric .MuiInputAdornment-root > p":{color:"#3ba6f9"}},"& > span":{fontSize:"0.7rem",transform:"scale(1, 0.9)",textAlign:"right",opacity:.8,paddingRight:"0.5rem",color:"#ff6633",fontWeight:"bold"},"&.type > span":{color:"#3ba6f9"}},"& .MuiAlert-root":{padding:"0 0.2rem","& > .MuiAlert-icon":{marginRight:"0.4rem"}},"& table":{borderCollapse:"separate",borderSpacing:"2px","& th, & td":{fontSize:"0.8rem",width:"2.5rem",padding:"0 4px","&.empty":{color:"#aaa"}},"& th":{color:"#ffffff",padding:"2px 4px",fontWeight:"normal"},"& td":{background:"#eee",textAlign:"right","& > small":{color:"#666"}},"& th.handy":{background:"#ff6633"},"& td.handy":{background:"#ffe9e9"},"& th.type":{background:"#3ba6f9"},"& td.type":{background:"#e3efff"},"& th.sum":{background:"#ffaa37"},"& td.sum":{width:"5rem",background:"#ffeedd"},"& thead tr:first-child th:first-child":{borderTopLeftRadius:"6px"},"& thead tr:first-child th:last-child":{borderTopRightRadius:"6px"},"& tbody tr:last-child td:first-child":{borderBottomLeftRadius:"6px"},"& tbody tr:last-child td:last-child":{borderBottomRightRadius:"6px"}}}),Ct=a.memo(({iv:n,dstLevel:s,open:t,onChange:r,onClose:l})=>{const{t:i}=w(),[o,c]=a.useState({iv:n,expGot:0,currentLevel:n.level,targetLevel:pe}),[d,m]=a.useState(0),[u,g]=a.useState({tabIndex:0,pokemonCandy:500,expFactor:0,candyBoost:"none",boostPolicy:"all",boostCandyCount:350,boostLevel:55,boostShard:3e5,expBonus:n.hasSleepExpBonusInActiveSubSkills?1:0,score:100,growthIncense:"none"}),[x,h]=a.useState(!1),[p,j]=a.useState(!1),b=a.useCallback(()=>d===0?!0:!(n.level===o.currentLevel&&n.idForm===o.iv.idForm&&n.nature.expGainsFactor===o.iv.nature.expGainsFactor),[n,o,d]);a.useEffect(()=>{if(!t){h(!1);return}if(!b()){h(!0);return}let y=0;s!==void 0?y=Math.min(s,pe):n.pokemon.specialty==="Berries"||n.pokemon.specialty==="All"?y=pe:n.pokemon.specialty==="Ingredients"?y=60:y=50,y=ye(n.level,y,pe);const E=Math.min(n.level,y);c({iv:n,expGot:0,currentLevel:E,targetLevel:y}),m(Ze(E,E+1,n)),g({...u,expFactor:n.nature.expGainsFactor}),h(!0)},[u,n,b,s,t]);const k=a.useCallback(y=>{y.currentLevel!==o.currentLevel&&(m(Ze(y.currentLevel,y.currentLevel+1,n)),r(n.changeLevel(y.currentLevel))),c(y)},[n,o,r]),C=a.useCallback((y,E)=>{g({...u,tabIndex:E})},[u]),v=a.useCallback(()=>{if(u.tabIndex===0){const y=Js(n,o.expGot,o.targetLevel,u.candyBoost);g({...u,pokemonCandy:y.candy})}j(!0)},[u,n,o]),N=a.useCallback(()=>{j(!1)},[]);return x?e.jsxs(e.Fragment,{children:[e.jsxs(mo,{open:t,onClose:l,children:[e.jsxs(Y,{children:[e.jsx(ro,{levelInfo:o,maxExpLeft:d,onLevelInfoChange:k}),e.jsxs(kn,{value:u.tabIndex,onChange:C,children:[e.jsx(en,{label:i("simple"),value:0}),e.jsx(en,{label:i("details"),value:1})]}),u.tabIndex===0&&e.jsx(oo,{config:u,levelInfo:o,onChange:g}),u.tabIndex===1&&e.jsx(co,{config:u,levelInfo:o,onChange:g})]}),e.jsxs(_,{children:[e.jsx(T,{sx:{mr:"auto",textTransform:"none"},onClick:v,children:i("turn candy")}),e.jsx(T,{onClick:l,children:i("close")})]})]}),e.jsx(no,{count:u.pokemonCandy,iv:n,open:p,onClose:N})]}):null}),ro=a.memo(({levelInfo:n,maxExpLeft:s,onLevelInfoChange:t})=>{const{t:r}=w(),l=a.useCallback(d=>{t({...n,currentLevel:d,expGot:0})},[n,t]),i=a.useCallback(d=>{t({...n,targetLevel:d})},[n,t]),o=a.useCallback(d=>{t({...n,expGot:d})},[n,t]),c=a.useCallback(d=>{t({...n,expGot:s-d})},[n,s,t]);return e.jsxs(e.Fragment,{children:[e.jsx(lo,{children:e.jsx(Wn,{idForm:n.iv.idForm,size:80})}),e.jsxs(io,{children:[e.jsxs("div",{className:"level",children:[e.jsxs("div",{className:"levelInput",children:[e.jsx("label",{children:"Lv."}),e.jsx(Ue,{value:n.currentLevel,onChange:l,showSlider:!0})]}),e.jsxs("div",{className:"expLeft",children:[e.jsx(uo,{value:n.expGot,min:0,max:s-1,onChange2:o}),e.jsx(ke,{value:s-n.expGot,size:"small",startAdornment:e.jsx(ue,{position:"start",children:r("exp to go1")}),endAdornment:e.jsx(ue,{position:"end",children:r("exp to go2")}),min:1,max:s,onChange:c})]})]}),e.jsx(Tr,{}),e.jsx("div",{className:"level",children:e.jsxs("div",{className:"levelInput",children:[e.jsx("label",{children:"Lv."}),e.jsx(Ue,{value:n.targetLevel,onChange:i,showSlider:!0})]})})]})]})}),lo=S("div")({margin:"0 auto .5rem",width:"80px"}),io=S("div")({display:"flex",justifyContent:"center",gap:"0.7rem",margin:"0 auto","& > div.level":{width:"7.2rem","& > div.levelInput":{color:"#79d073",fontSize:"1.2rem",fontWeight:"bold",display:"flex",justifyContent:"center",gap:"0.2rem","& > label":{transform:"scale(1, 0.9)",paddingTop:"0.2rem"},"& > div.numeric":{width:"3rem","& > div.MuiInput-root":{color:"#79d073",fontWeight:"bold",fontSize:"1.3rem !important",transform:"scale(1, 0.9)","& > input":{padding:"2px 0"}}}},"& > div.expLeft":{paddingTop:"0.3rem","& > div.numeric > div.MuiInput-root":{"& > div.MuiInputAdornment-root > p":{color:"#79d073",fontSize:"0.7rem",fontWeight:"bold",transform:"scale(1, 0.9)"},"& > input":{padding:0,fontSize:"0.9rem",fontWeight:"bold",transform:"scale(1, 0.9)"}}}},"& > svg":{paddingTop:"0.3rem",color:"#888"}}),oo=a.memo(({config:n,levelInfo:s,onChange:t})=>{const{t:r}=w(),l=s.iv.clone({level:s.currentLevel,nature:n.expFactor===1?new ve("Timid"):n.expFactor===0?new ve("Serious"):new ve("Relaxed")}),i=Js(l,s.expGot,s.targetLevel,n.candyBoost),o=a.useCallback(d=>{t({...n,expFactor:parseInt(d,10)})},[n,t]),c=a.useCallback((d,m)=>{m!==null&&t({...n,candyBoost:m})},[n,t]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"expResult",children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[r("required exp"),":"]}),e.jsx("div",{children:O(i.exp)})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("candy"),":"]}),e.jsxs("div",{children:[e.jsx(Me,{}),O(i.candy)]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("dream shard"),":"]}),e.jsxs("div",{children:[e.jsx(Bn,{}),O(i.shards)]})]})]}),e.jsxs("div",{className:"form",children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[r("nature"),":"]}),e.jsxs(ee,{onChange:o,value:n.expFactor.toString(),children:[e.jsx(f,{value:"1",children:e.jsx(Xe,{children:r("nature effect.EXP gains")})}),e.jsxs(f,{value:"0",children:[r("nature effect.EXP gains")," ーー"]}),e.jsx(f,{value:"-1",children:e.jsx(ln,{children:r("nature effect.EXP gains")})})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("candy boost"),":"]}),e.jsxs(J,{size:"small",exclusive:!0,value:n.candyBoost,onChange:c,children:[e.jsx(R,{value:"none",children:r("none")}),e.jsx(R,{value:"mini",children:r("mini candy boost")}),e.jsx(R,{value:"unlimited",children:r("normal candy boost")})]})]})]})]})}),ao=(n,s)=>{let t=n.iv.clone({level:n.currentLevel,nature:s.expFactor===1?new ve("Timid"):s.expFactor===0?new ve("Serious"):new ve("Relaxed")});const r=Ze(n.currentLevel,n.targetLevel,n.iv)-n.expGot;let l={exp:r,expGot:n.expGot,expLeft:r,level:n.currentLevel,shards:0,extraShards:0,candyUsed:0,candySaved:0,candyLeft:s.pokemonCandy};if(s.candyBoost!=="none"){let c={...l},d={...l};switch(s.boostPolicy){case"all":c=$e(t,n.expGot,n.targetLevel,s.pokemonCandy,s.candyBoost),d=$e(t,n.expGot,n.targetLevel,s.pokemonCandy*2,"none");break;case"candy":c=$e(t,n.expGot,n.targetLevel,Math.min(s.boostCandyCount,s.pokemonCandy),s.candyBoost),c.candyLeft=s.pokemonCandy-c.candyUsed,d=$e(t,n.expGot,n.targetLevel,Math.min(s.boostCandyCount,s.pokemonCandy)*2,"none");break;case"level":{const m=ye(n.currentLevel,s.boostLevel,n.targetLevel);c=$e(t,n.expGot,m,s.pokemonCandy,s.candyBoost),c.expLeft=Ze(c.level,n.targetLevel,n.iv)-c.expGot,d=$e(t,n.expGot,s.boostLevel,s.pokemonCandy*2,"none");break}}t=n.iv.clone({level:c.level}),l={...c,exp:r,extraShards:c.shards-d.shards,candySaved:d.candyUsed-c.candyUsed}}const i=$e(t,l.expGot,n.targetLevel,l.candyLeft,"none");let o;return i.expLeft>0&&(o=_t(i.expLeft,s.expBonus,s.score,t.nature.expGainsRate,s.growthIncense)),{candyBoostResult:l,normalCandyResult:{...i,extraShards:0,candySaved:0},sleepResult:o}},co=a.memo(({config:n,levelInfo:s,onChange:t})=>{const{t:r}=w(),l=a.useCallback(N=>{t({...n,pokemonCandy:N})},[n,t]),i=a.useCallback(N=>{t({...n,expFactor:parseInt(N,10)})},[n,t]),o=a.useCallback(N=>{t({...n,candyBoost:N.target.checked?new Date().getMonth()===11?"unlimited":"mini":"none"})},[n,t]),c=a.useCallback(N=>{t({...n,candyBoost:N})},[n,t]),d=a.useCallback(N=>{t({...n,boostPolicy:N})},[n,t]),m=a.useCallback(N=>{t({...n,boostCandyCount:N})},[n,t]),u=a.useCallback(N=>{N=ye(s.currentLevel,N,s.targetLevel),t({...n,boostLevel:N})},[n,s,t]),g=a.useCallback(N=>{t({...n,expBonus:parseInt(N,10)})},[n,t]),x=a.useCallback(N=>{t({...n,score:N})},[n,t]),h=a.useCallback(N=>{t({...n,growthIncense:N})},[n,t]),p=s.iv.pokemon.id,j=r(`pokemons.${st(p)}`).replace(/ \(.+/,""),{candyBoostResult:b,normalCandyResult:k,sleepResult:C}=ao(s,n),v=b.exp;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"expResult",children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[r("required exp"),":"]}),e.jsx("div",{children:O(v)})]}),e.jsxs(fe,{show:b.candyUsed>0,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("candy boost"),":"]}),e.jsx("div",{children:O(v-b.expLeft)})]}),e.jsx(_s,{iv:s.iv,value:b})]}),e.jsxs(fe,{show:k.candyUsed>0,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("candy-based training"),":"]}),e.jsx("div",{children:O(b.expLeft-k.expLeft)})]}),e.jsx(_s,{iv:s.iv,value:k})]}),e.jsxs(fe,{show:C!==void 0,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("sleep-based training"),":"]}),e.jsx("div",{children:O(k.expLeft+(C?.expExceeded??0))})]}),e.jsx(xo,{iv:s.iv,level:s.targetLevel,value:C})]})]}),e.jsxs("div",{className:"form",children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[r("pokemon candy",{name:j}),":"]}),e.jsx(ke,{value:n.pokemonCandy,min:0,max:4e3,sx:{width:"3rem",fontSize:"0.9rem"},onChange:l})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("nature"),":"]}),e.jsxs(ee,{onChange:i,value:n.expFactor.toString(),children:[e.jsx(f,{value:"1",children:e.jsx(Xe,{children:r("nature effect.EXP gains")})}),e.jsxs(f,{value:"0",children:[r("nature effect.EXP gains")," ーー"]}),e.jsx(f,{value:"-1",children:e.jsx(ln,{children:r("nature effect.EXP gains")})})]})]})]}),e.jsxs("div",{className:"form",children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[r("candy boost"),":"]}),e.jsx(te,{checked:n.candyBoost!=="none",size:"small",onChange:o})]}),e.jsxs(fe,{show:n.candyBoost!=="none",children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("kind"),":"]}),e.jsxs(ee,{onChange:c,value:n.candyBoost,children:[e.jsxs(f,{value:"mini",children:[r("mini candy boost")," "]}),e.jsx(f,{value:"unlimited",children:r("normal candy boost")})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[e.jsxs(ee,{onChange:d,value:n.boostPolicy,children:[e.jsxs(f,{value:"all",children:[r("all")," "]}),e.jsxs(f,{value:"candy",children:[r("number of uses")," "]}),e.jsx(f,{value:"level",children:r("up to specified level")})]}),":"]}),n.boostPolicy==="all"&&e.jsxs("div",{children:[e.jsx(Me,{}),n.pokemonCandy]}),n.boostPolicy==="candy"&&e.jsxs("div",{children:[e.jsx(Me,{}),e.jsx(ke,{sx:{width:"3rem",fontSize:"0.9rem"},min:0,max:n.pokemonCandy,value:n.boostCandyCount,onChange:m})]}),n.boostPolicy==="level"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{padding:"0.1rem 0.2rem 0 0"},children:"Lv."}),e.jsx(Ue,{showSlider:!0,sx:{width:"2rem",fontSize:"0.9rem"},value:n.boostLevel,onChange:u})]})]})]})]}),e.jsxs("div",{className:"form",children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[r("subskill.Sleep EXP Bonus"),":"]}),e.jsxs(ee,{value:n.expBonus,onChange:g,sx:{width:"1.5rem"},children:[e.jsx(f,{value:0,children:"0"}),e.jsx(f,{value:1,children:"1"}),e.jsx(f,{value:2,children:"2"}),e.jsx(f,{value:3,children:"3"}),e.jsx(f,{value:4,children:"4"}),e.jsx(f,{value:5,children:"5"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("sleep score"),":"]}),e.jsx(ke,{value:n.score,onChange:x,sx:{width:"2rem",fontSize:"0.9rem"},min:1,max:100})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("growth incense"),":"]}),e.jsxs(ee,{value:n.growthIncense,onChange:h,sx:{width:"auto",fontSize:"0.9rem"},children:[e.jsx(f,{value:"none",children:r("none")}),e.jsx(f,{value:"fullMoon",children:r("full moon")}),e.jsx(f,{value:"gsd",children:r("gsd")}),e.jsx(f,{value:"every2Days",children:r("every 2 days")}),e.jsx(f,{value:"everyDay",children:r("every day")})]})]})]})]})}),mo=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{maxWidth:"22rem"},"& .MuiPaper-root":{width:"100%","& > div.MuiDialogContent-root":{padding:".8rem .8rem 0 .8rem","& > .MuiTabs-root":{marginTop:"0.4rem","& button.MuiButtonBase-root":{paddingBottom:0}},"& div.expResult":{fontSize:"0.9rem",margin:"0 .2rem 0",padding:"0.5rem 0.5rem 0 0.5rem","& > section":{paddingTop:"0.2rem"}},"& div.form":{background:"#f0f0f0",padding:"0.3rem 0.5rem",borderRadius:"0.9rem",fontSize:"0.9rem",margin:"0.5rem .5rem 0"},"& section":{display:"flex",flex:"0 auto",paddingTop:"0.5rem","&.first":{paddingTop:0},"& > label":{marginRight:"auto",marginTop:0},"& > div":{display:"flex",alignItems:"center"},"& svg":{width:"1rem",height:"1rem",paddingRight:"0.2rem"},"& > div > div.MuiSelect-select":{fontSize:"0.9rem",padding:"0 1.5rem 0 0"},"& button.MuiToggleButtonGroup-grouped":{padding:"0.2rem 0.4rem",textTransform:"none"},"& div.numeric input":{padding:"2px 0"}}}}}),uo=S(On)({color:"#79d073",height:8,"@media (pointer: coarse)":{padding:0},padding:0,"& .MuiSlider-thumb":{width:"14px",height:"13px","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&::before":{display:"none"}},"& .MuiSlider-rail":{backgroundColor:"#ccc"}}),_s=a.memo(({iv:n,value:s})=>{const{t}=w(),r=s.level===pe;let l="";if(!r){const i=Ze(s.level,s.level+1,n)-s.expGot;l=[t("exp to go1"),O(i),t("exp to go2")].filter(o=>o!=="").join(" ")}return e.jsxs(St,{children:[e.jsxs("span",{className:"level",children:[e.jsxs("span",{children:["Lv. ",s.level]}),!r&&e.jsx("footer",{children:`(${l})`})]}),e.jsxs("span",{className:"candy",children:[e.jsxs("span",{children:[e.jsx(Me,{}),O(s.candyUsed)]}),s.candySaved>0&&e.jsxs("footer",{children:["(-",s.candySaved,")"]})]}),e.jsxs("span",{className:"shard",children:[e.jsxs("span",{children:[e.jsx(Bn,{}),O(s.shards)]}),s.extraShards>0&&e.jsxs("footer",{children:["(+",O(s.extraShards),")"]})]})]})}),xo=a.memo(({iv:n,level:s,value:t})=>{const{t:r,i18n:l}=w();if(t===void 0)return null;const i=s===pe;let o="";if(!i){const d=Ze(s,s+1,n)-t.expExceeded;o=[r("exp to go1"),O(d),r("exp to go2")].filter(m=>m!=="").join(" ")}const c=Intl.DateTimeFormat(l.language,{year:"numeric",month:"short",day:"numeric"}).format(t.date);return e.jsxs(St,{className:"sleep",children:[e.jsxs("span",{className:"level",children:[e.jsxs("span",{children:["Lv. ",s]}),!i&&e.jsx("footer",{children:`(${o})`})]}),e.jsxs("span",{className:"shard",children:[e.jsx("span",{children:c}),e.jsxs("footer",{children:["(",r("day unit",{count:t.days}),")"]})]})]})}),St=S("footer")({color:"#666",fontSize:"0.8rem",paddingLeft:"1.2rem",display:"grid",gridTemplateColumns:"6rem 3.5rem 1fr","&.sleep":{gridTemplateColumns:"6rem 1fr"},alignItems:"start",lineHeight:1.3,"& > span":{"&.candy":{justifySelf:"end",textAlign:"right"},"&.shard":{justifySelf:"end",textAlign:"right"},"& > footer":{fontSize:"0.6rem"},"& > span":{display:"flex",alignItems:"center","& > svg":{fontSize:"0.8rem"}}}}),ho=a.memo(({items:n,iv:s,selectedId:t,parameter:r,dispatch:l})=>{const{t:i}=w(),[o,c]=a.useState(()=>Vt()),[d,m]=a.useState(es),[u,g]=a.useState(!1),[x,h]=a.useState(!1),p=a.useRef(null),j=a.useCallback(()=>{l({type:"add"})},[l]),b=a.useCallback(P=>{const A={...o,sort:P.sort,descending:P.descending};c(A),localStorage.setItem("PstPokemonBoxParam",JSON.stringify(A))},[o]),k=a.useCallback(P=>{c(P),localStorage.setItem("PstPokemonBoxParam",JSON.stringify(P))},[]),C=a.useCallback(()=>{g(!0)},[]),v=a.useCallback(()=>{g(!1)},[]),N=a.useCallback(P=>{es=P,m(es)},[]),y=a.useCallback(()=>{h(!0)},[]),E=a.useCallback(()=>{h(!1)},[]),D=a.useCallback(P=>{n.find(V=>V.id===t)!==void 0&&l({type:"updateIv",payload:{iv:P}})},[n,l,t]),I=a.useMemo(()=>d.filter(n,r.evolved,i),[n,d,r.evolved,i]),[F,L]=a.useMemo(()=>Gt(I,o.sort,o.descending,o.ingredient,o.mainSkill,r,i),[o.sort,o.descending,o.ingredient,o.mainSkill,I,r,i]);let M=a.useMemo(()=>F.map(P=>e.jsx(go,{item:P,selected:P.id===t,dispatch:l,onCandyClick:y,selectedRef:P.id===t?p:void 0},P.id)),[F,l,y,t,p]);o.descending||(M=[...M].reverse()),a.useEffect(()=>{p.current?.scrollIntoView({block:"center"})},[]);const X=a.useMemo(()=>({isFiltered:!d.isEmpty,sort:o.sort,descending:o.descending}),[d,o]),W=a.useMemo(()=>["level","name","pokedexno","rp","total strength","berry","ingredient","skill"],[]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",margin:"0 0.5rem 300px 0.5rem",width:"calc(100% - 1rem)"},children:[M.length===0&&e.jsx("div",{style:{margin:"5rem auto 0",color:"#888",fontSize:"0.9rem"},children:n.length===0?i("box is empty"):L}),M]}),e.jsxs("div",{style:{position:"fixed",width:"100%",bottom:0,margin:".5rem 0 0"},children:[e.jsx(Nr,{onClick:j,color:"primary",size:"medium",sx:{position:"absolute",top:"-55px",right:"10px"},children:e.jsx(Mr,{})}),e.jsx(ko,{count:n.length,config:o,dispatch:l,onChange:k}),e.jsx(Ji,{parameter:r,sortConfig:o,dispatch:l,onChange:k}),e.jsx("div",{style:{paddingLeft:"1rem",paddingBottom:"1.2rem",background:"#f76",width:"calc(100% - 1rem)"},children:e.jsx(ut,{value:X,onChange:b,onFilterButtonClick:C,sortTypes:W})})]}),e.jsx(Li,{open:u,onClose:v,value:d,onChange:N}),e.jsx(Ct,{iv:s,open:x,dstLevel:r.level===0?void 0:r.level,onChange:D,onClose:E})]})});let es=new ce({});const go=a.memo(({item:n,selected:s,dispatch:t,onCandyClick:r,selectedRef:l})=>{const{t:i}=w(),[o,c]=a.useState(null),d=!!o,m=fo(()=>{h("select"),h("edit")},500),u=a.useCallback(()=>{t({type:"select",payload:{id:n.id}})},[t,n.id]),g=a.useCallback(b=>{c(b.currentTarget)},[c]),x=a.useCallback(()=>{c(null)},[c]),h=a.useCallback(b=>{t({type:b,payload:{id:n.id}}),c(null)},[n,t,c]),p=a.useCallback(()=>{c(null),mt(n.iv,t,i)},[t,n.iv,i]),j=a.useCallback(()=>{c(null),r(n)},[n,r]);return e.jsxs(po,{ref:s?l:null,children:[e.jsxs(Dn,{onClick:u,className:s?"selected":"",ref:m,children:[e.jsxs("header",{children:[e.jsx("span",{className:"lv",children:"Lv."}),n.iv.level]}),e.jsx(Wn,{idForm:n.iv.idForm,size:32}),e.jsx("footer",{children:n.filledNickname(i)})]}),s&&e.jsx(q,{onClick:g,children:e.jsx(js,{})}),e.jsx(jn,{anchorEl:o,open:d,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(Ge,{children:[e.jsxs(f,{onClick:()=>h("edit"),children:[e.jsx(re,{children:e.jsx(Er,{})}),i("edit")]}),e.jsxs(f,{onClick:j,children:[e.jsx(re,{sx:{minWidth:"24px"},children:e.jsx(Me,{sx:{color:"#888"}})}),i("candy")]}),e.jsxs(f,{onClick:p,children:[e.jsx(re,{children:e.jsx(bs,{})}),i("share")]}),e.jsxs(f,{onClick:()=>h("dup"),children:[e.jsx(re,{children:e.jsx(Fr,{})}),i("duplicate")]}),e.jsxs(f,{onClick:()=>h("remove"),children:[e.jsx(re,{sx:{minWidth:"24px"},children:e.jsx(zr,{})}),i("delete")]})]})})]})}),po=S("div")({position:"relative","& > button:first-of-type":{fontFamily:'"M PLUS 1p"',display:"block",textAlign:"center",width:"80px",padding:"0.2rem 0",border:"1px solid transparent","& > header":{fontSize:"0.7rem",fontWeight:"bold","& > span.lv":{color:"#62d540",fontSize:"0.6rem",paddingRight:"0.2rem"}},"& > div":{margin:"0.1rem auto 0.1rem"},"& > footer":{fontSize:"0.8rem",color:"#666666",overflowWrap:"anywhere"},"&.selected":{background:"#d3e9f7",borderRadius:"0.5rem",border:"1px solid #5e7da0"}},"& > button.MuiIconButton-root":{position:"absolute",right:"-5px",top:"-2px","& > svg":{width:"0.8rem",height:"0.8rem"}}});function fo(n,s){const t=a.useRef(null),r=a.useRef(null),l=a.useCallback(()=>{t.current=setTimeout(n,s)},[n,s]),i=a.useCallback(()=>{t.current&&clearTimeout(t.current),t.current=null},[]),o=a.useCallback(()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",o),t.current&&clearTimeout(t.current),t.current=null},[]),c=a.useCallback(()=>{t.current===null&&(t.current=setTimeout(n,s),document.addEventListener("mousemove",o),document.addEventListener("mouseup",o))},[n,s,o]);return a.useEffect(()=>{if(r.current===null)return()=>{};const d=r.current;return d.addEventListener("touchstart",l),d.addEventListener("mousedown",c),d.addEventListener("touchmove",i),d.addEventListener("touchend",i),()=>{d.removeEventListener("touchstart",l),d.removeEventListener("mousedown",c),d.removeEventListener("touchmove",i),d.removeEventListener("touchend",i)}},[c,l,i]),r}const jo=30,bo=10,ko=a.memo(({count:n,config:s,dispatch:t,onChange:r})=>{const{t:l}=w(),i=a.useCallback(()=>{r({...s,warnDate:new Date().toLocaleDateString("sv-SE"),warnItems:n})},[s,n,r]),o=a.useCallback(()=>{t({type:"export"}),i()},[t,i]),c=s.warnDate!==""?new Date(s.warnDate).getTime():new Date().getTime(),m=new Date().getTime()-c>jo*24*60*60*1e3;return!(Math.abs(n-s.warnItems)>=bo)&&!m?e.jsx(e.Fragment,{}):e.jsxs(yo,{children:[e.jsx(tn,{}),e.jsxs("div",{children:[l("export notice"),e.jsxs(T,{onClick:o,children:["[",l("export"),"]"]})]}),e.jsx(q,{onClick:i,children:e.jsx(Ln,{})})]})}),yo=S("div")({background:"#e5f6fd",borderTop:"1px solid #d9e9e9",paddingTop:"0.2rem",color:"#014343",display:"grid",gridTemplateColumns:"26px 1fr 40px","& > svg":{color:"#0288d1",width:"18px",height:"18px",padding:"4px"},"& > div":{fontSize:"0.8rem",color:"#014480","& > button":{padding:"0 0 0 0.3rem",minWidth:0,fontSize:"0.8rem"}}}),vo=a.memo(({open:n,value:s,onChange:t,onClose:r})=>{const{t:l}=w(),[i,o]=Cs(),[c,d]=a.useState(s.tabIndex),m=a.useCallback((x,h)=>{d(h)},[]),u=B.useCallback(()=>{t(new Ce({}))},[t]),g=B.useCallback(()=>{r()},[r]);return e.jsxs(Co,{open:n,onClose:r,children:[e.jsxs(So,{variant:"scrollable",scrollButtons:!0,ref:o,value:c,onChange:m,children:[e.jsx(ns,{label:l("type"),value:0}),e.jsx(ns,{label:l("ingredient"),value:1}),e.jsx(ns,{label:l("main skill"),value:2})]}),e.jsxs(bt,{index:c,width:i,onChange:d,children:[e.jsx("div",{className:"tabChild",children:e.jsx(wo,{value:s,onChange:t})}),e.jsx("div",{className:"tabChild",children:e.jsx(Io,{value:s,onChange:t})}),e.jsx("div",{className:"tabChild",children:e.jsx(Bo,{value:s,onChange:t})})]}),e.jsxs(_,{children:[e.jsx(T,{onClick:u,children:l("clear")}),e.jsx(T,{onClick:g,children:l("close")})]})]})}),Co=S(G)({"div.MuiPaper-root":{padding:"0 .5rem 0 .5rem","& div.tabChild":{"& > section":{margin:"0 0.8rem",fontSize:".9rem",display:"flex",flex:"0 auto",alignItems:"center",maxWidth:"40rem","&:first-of-type":{marginTop:"0.3rem"},"& > label":{marginRight:"auto"}}}}}),So=S(kn)({minHeight:"36px",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),ns=S(en)({minHeight:"36px",minWidth:"0",textTransform:"none"}),wo=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=B.useCallback(d=>{s(new Ce({...n,filterType:n.filterType===d?null:d}))},[n,s]),l=B.useCallback(d=>{s(new Ce({...n,filterSpecialty:n.filterSpecialty.includes(d)?[]:[d]}))},[n,s]),i=B.useCallback((d,m)=>{m===null||n.filterEvolve===m||s(new Ce({...n,filterEvolve:m}))},[n,s]),o=Ve.map(d=>e.jsx(_e,{type:d,onClick:r,checked:d===n.filterType},d)),c=ps.map(d=>e.jsx(De,{specialty:d,onClick:l,checked:n.filterSpecialty.includes(d)},d));return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:o}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"1rem 0 0.5rem"},children:t("specialty")}),c]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"1rem 0 0.5rem"},children:t("evolve")}),e.jsxs(To,{value:n.filterEvolve,exclusive:!0,onChange:i,children:[e.jsx(R,{value:"all",children:t("all")}),e.jsx(R,{value:"non",children:t("non-evolve")}),e.jsx(R,{value:"final",children:t("final-evoltion")})]})]})]})}),Io=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=B.useCallback(d=>{const m=n.ingredientName===d?"unknown":d;s(new Ce({...n,ingredientName:m}))},[n,s]),l=B.useCallback(d=>{s(new Ce({...n,ingredientA:d.target.checked}))},[n,s]),i=B.useCallback(d=>{s(new Ce({...n,ingredientB:d.target.checked}))},[n,s]),o=B.useCallback(d=>{s(new Ce({...n,ingredientC:d.target.checked}))},[n,s]),c=zn.map(d=>e.jsx(gt,{ingredient:d,onClick:r,checked:n.ingredientName===d},d));return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1rem"},children:c}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("ing-a"),":"]}),e.jsx(te,{checked:n.ingredientA,size:"small",onChange:l})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("ing-b"),":"]}),e.jsx(te,{checked:n.ingredientB,size:"small",onChange:i})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("ing-c"),":"]}),e.jsx(te,{checked:n.ingredientC,size:"small",onChange:o})]})]})}),Bo=a.memo(({value:n,onChange:s})=>{const t=B.useCallback(l=>{const i=n.mainSkillNames.includes(l)?n.mainSkillNames.filter(o=>o!==l):[...n.mainSkillNames,l];s(new Ce({...n,mainSkillNames:i}))},[n,s]),r=En.map(l=>e.jsx(pt,{mainSkill:l,onClick:t,checked:n.mainSkillNames.includes(l)},l));return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:r})}),To=S(J)({"& > button":{textTransform:"none",lineHeight:1},"& > button:first-of-type":{borderRadius:"1rem 0 0 1rem"},"& > button:last-of-type":{borderRadius:"0 1rem 1rem 0"}}),wt="2023-07-17",No=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px"}});function Mo(n){const{disablePortal:s,anchorEl:t,open:r,...l}=n;return e.jsx(Eo,{...l})}const Eo=S("div")({[`& .${Rr.paper}`]:{boxShadow:"none",margin:0,width:"100%",color:"inherit",fontSize:13,"& > ul.MuiAutocomplete-listbox":{paddingTop:0,maxHeight:"60vh",minHeight:"60vh","& > li > ul":{userSelect:"none",display:"flex",flexWrap:"wrap",justifyContent:"left",margin:"0 0 .5rem 0",padding:0,"& > li":{width:"76px",height:"80px",padding:0,margin:"0 0 6px 0",position:"relative",display:"block","& > div":{margin:"4px auto 0 auto"},"& > img":{margin:"4px auto 0 auto",display:"block"},"& > footer":{display:"inline-block",width:"100%",fontSize:"12px",textAlign:"center",textWrap:"wrap",lineHeight:1.1,verticalAlign:"middle","& > small":{display:"block",fontSize:"9px"}}}}}}}),Fo=S(Dr)(()=>({width:"calc(100% - 8px)",padding:4,margin:4,borderRadius:4,border:"1px solid #cccccc","& input":{fontSize:14}})),zo=S("div")({position:"sticky",top:"-1px",padding:"4px 10px",fontWeight:"bold",zIndex:9,backgroundColor:"#66aaff",borderRadius:"5px",margin:"0 4px 4px 4px",color:"#fff","&.dozing":{backgroundColor:"#fdec6e",color:"#862"},"&.snoozing":{backgroundColor:"#85fbff",color:"#226"},"&.slumbering":{backgroundColor:"#5592fc"},"&.normal":{backgroundColor:"#939393"},"&.fire":{backgroundColor:"#e8554d"},"&.water":{backgroundColor:"#579bf3"},"&.electric":{backgroundColor:"#f1c525"},"&.grass":{backgroundColor:"#57a747"},"&.ice":{backgroundColor:"#68c5df"},"&.fighting":{backgroundColor:"#e8a33b"},"&.poison":{backgroundColor:"#ab7aca"},"&.ground":{backgroundColor:"#c8a841"},"&.flying":{backgroundColor:"#add5ea"},"&.psychic":{backgroundColor:"#ed6c94"},"&.bug":{backgroundColor:"#a5ab39"},"&.rock":{backgroundColor:"#b2b194"},"&.ghost":{backgroundColor:"#8d658e"},"&.dragon":{backgroundColor:"#7482e9"},"&.dark":{backgroundColor:"#706261"},"&.steel":{backgroundColor:"#94b1c2"},"&.fairy":{backgroundColor:"#e48fe3"}});class Ce{filterType;filterSpecialty;filterEvolve;ingredientName;ingredientA;ingredientB;ingredientC;mainSkillNames;constructor(s){this.filterType=s.filterType??null,this.filterSpecialty=s.filterSpecialty??[],this.filterEvolve=s.filterEvolve??"all",this.ingredientName=s.ingredientName??"unknown",this.ingredientA=s.ingredientA??!0,this.ingredientB=s.ingredientB??!0,this.ingredientC=s.ingredientC??!0,this.mainSkillNames=s.mainSkillNames??[]}load(s){if(!(typeof s!="object"||s===null)){if(typeof s.filterType=="string"){const t=s.filterType;Ve.includes(t)&&(this.filterType=t)}if(Array.isArray(s.filterSpecialty)){const t=s.filterSpecialty;t.every(r=>ps.includes(r))&&(this.filterSpecialty=t)}if(typeof s.filterEvolve=="string"){const t=s.filterEvolve;["all","non","final"].includes(t)&&(this.filterEvolve=t)}if(typeof s.ingredientName=="string"){const t=s.ingredientName;zn.includes(t)&&(this.ingredientName=t)}if(typeof s.ingredientA=="boolean"&&(this.ingredientA=s.ingredientA),typeof s.ingredientB=="boolean"&&(this.ingredientB=s.ingredientB),typeof s.ingredientC=="boolean"&&(this.ingredientC=s.ingredientC),Array.isArray(s.mainSkillNames)){const t=s.mainSkillNames;t.every(r=>En.includes(r))&&(this.mainSkillNames=t)}}}get isFiltered(){return this.filterEvolve!=="all"||this.filterSpecialty.length>0||this.filterType!==null||this.ingredientName!=="unknown"||this.mainSkillNames.length>0}get tabIndex(){return this.filterEvolve!=="all"||this.filterSpecialty.length>0?0:this.ingredientName!=="unknown"?1:this.mainSkillNames.length>0?2:0}filter(s,t){const r=o=>o.toLowerCase().trim().replace(/[ぁ-ん]/g,c=>String.fromCharCode(c.charCodeAt(0)+96)),l=r(t);let i=s.filter(o=>r(o.localName).includes(l));return this.filterType!==null&&(i=i.filter(o=>this.filterType===o.type)),this.filterSpecialty.length>0&&(i=i.filter(o=>o.specialty==="All"||this.filterSpecialty.includes(o.specialty))),this.filterEvolve==="final"?i=i.filter(o=>o.isFullyEvolved):this.filterEvolve==="non"&&(i=i.filter(o=>o.isNonEvolving)),this.ingredientName!=="unknown"&&(i=i.filter(o=>this.ingredientA&&this.ingredientName===o.ing1Name||this.ingredientB&&this.ingredientName===o.ing2Name||this.ingredientC&&this.ingredientName===o.ing3Name)),this.mainSkillNames.length>0&&(i=i.filter(o=>this.mainSkillNames.some(c=>qt(o,c)))),i.length===0&&i.push({...fs[0],id:-1,idForm:-1,name:"",localName:"",arrival:wt,specialty:"Berries",sleepType:"dozing",type:"normal",skill:"Charge Energy S",ancestor:null,isFullyEvolved:!1,isNonEvolving:!1,ing1Name:"unknown",ing2Name:"unknown",ing3Name:void 0}),i}}const Ro=a.memo(({open:n,pokemonOptions:s,selectedValue:t,onClose:r,onChange:l})=>{const{t:i}=w(),[o,c]=a.useState(!1),[d,m]=a.useState(null),u=d===null?Do():d,g=u.sort,x=u.descending,h=B.useCallback(()=>{r()},[r]),p=B.useCallback((I,F)=>u.filter.filter(I,F.inputValue),[u.filter]),j=B.useCallback((I,F)=>{if(F===null)return;let L;if(typeof F=="string"){if(L=s.find(M=>M.localName===F),L===void 0)return}else{const M=F;if(M.id<0)return;L=M}l(L),h()},[l,h,s]),b=B.useCallback((I,F)=>{F==="selectOption"&&h(),F==="escape"&&h()},[h]),k=B.useCallback(I=>{if(I.id<0)return"";switch(g){case"sleeptype":return I.sleepType;case"name":return I.localName.charAt(0).normalize("NFD")[0];case"pokedexno":return I.id<=151?"Kanto":I.id<=251?"Johto":I.id<=386?"Hoenn":I.id<=494?"Sinnoh":I.id<=649?"Unova":I.id<=721?"Kalos":I.id<=809?"Alola":I.id<=905?"Galar":"Paldea";case"type":return I.type;case"arrival":return I.arrival===wt?"initial pokemon":I.arrival.substring(0,4);default:return""}},[g]),C=B.useCallback(I=>{let F=I.group;return F===""?e.jsx(e.Fragment,{}):(g==="sleeptype"?F=i(I.group):g==="type"?F=i(`types.${I.group}`):g==="pokedexno"?F=i(`generation.${I.group}`):g==="arrival"&&I.group==="initial pokemon"&&(F=i("initial pokemon")),e.jsxs("li",{children:[e.jsx(zo,{className:I.group,children:F}),e.jsx("ul",{style:{padding:0},children:I.children})]},I.group))},[g,i]),v=B.useCallback(()=>{c(!0)},[]),N=B.useCallback(()=>{c(!1)},[]),y=B.useCallback(I=>{const F={...u,filter:I};m(F),localStorage.setItem("PstPokemonSelectParam",JSON.stringify(F))},[u]),E=B.useCallback(I=>{const F={...u,descending:I.descending,sort:I.sort};m(F),localStorage.setItem("PstPokemonSelectParam",JSON.stringify(F))},[u]);let D=[];switch(g){case"sleeptype":D=s.sort((I,F)=>{const L=Vs[I.sleepType],M=Vs[F.sleepType];return L===M?I.id-F.id:L-M});break;case"name":D=s.sort((I,F)=>I.localName>F.localName?1:I.localName<F.localName?-1:0);break;case"pokedexno":D=s.sort((I,F)=>I.id-F.id);break;case"type":D=s.sort((I,F)=>{const L=Gs[I.type],M=Gs[F.type];return L===M?I.id-F.id:L-M});break;case"arrival":D=s.sort((I,F)=>I.arrival!==F.arrival?I.arrival>F.arrival?1:-1:(I.id-F.id)*(x?-1:1));break;default:throw new Error("invalid sort type")}return x&&(D=D.reverse()),e.jsxs(No,{open:n,onClose:h,children:[e.jsx(Lr,{options:D,fullWidth:!0,open:!0,freeSolo:!0,selectOnFocus:!0,value:D.find(I=>I.name===t.name),slots:{popper:Mo},filterOptions:p,getOptionLabel:I=>typeof I=="string"?I:I.localName,groupBy:k,renderGroup:C,renderOption:(I,F)=>{const{key:L,...M}=I;return e.jsxs(f,{...M,children:[e.jsx(Wn,{idForm:F.idForm,size:48}),e.jsxs("footer",{children:[F.localName.replace(/\(.+/,""),F.localName.endsWith(")")&&e.jsx("small",{children:F.localName.replace(/^[^(]+/,"")})]})]},L)},renderInput:I=>e.jsx(Fo,{ref:I.InputProps.ref,inputProps:{autoComplete:"false",...I.inputProps},startAdornment:e.jsx(ue,{position:"start",children:e.jsx(Rn,{})})}),onClose:b,onChange:j}),e.jsx(ut,{sortTypes:["pokedexno","name","sleeptype","type","arrival"],value:{isFiltered:u.filter.isFiltered,sort:u.sort,descending:u.descending},onChange:E,onFilterButtonClick:v}),e.jsx(vo,{open:o,onClose:N,value:u.filter,onChange:y})]})}),Vs={dozing:0,snoozing:1,slumbering:2},Gs={normal:0,fire:1,water:2,electric:3,grass:4,ice:5,fighting:6,poison:7,ground:8,flying:9,psychic:10,bug:11,rock:12,ghost:13,dragon:14,dark:15,steel:16,fairy:17};function Do(){const n={filter:new Ce({}),sort:"pokedexno",descending:!1},s=localStorage.getItem("PstPokemonSelectParam");if(s===null)return n;const t=JSON.parse(s);return typeof t!="object"||t===null||(t.filter===void 0&&(t.filter={filterType:t.filterType,filterEvolve:t.filterEvolve}),n.filter.load(t.filter),typeof t.sort=="string"&&["sleeptype","name","pokedexno","type","arrival"].includes(t.sort)&&(n.sort=t.sort),typeof t.descending=="boolean"&&(n.descending=t.descending)),n}const Lo=a.memo(({iv:n,fixMode:s,onChange:t,onCandyClick:r})=>{const l=n.pokemon.name,{t:i}=w(),[o,c]=a.useState(!1),d=a.useMemo(()=>fs.map(p=>({...p,idForm:new Ne({pokemonName:p.name}).idForm,localName:i(`pokemons.${p.name}`),isNonEvolving:p.evolutionCount===-1,isFullyEvolved:p.isFullyEvolved,ing1Name:p.ing1.name,ing2Name:p.ing2.name,ing3Name:p.ing3?.name})),[i]),m=d.find(p=>p.name===l);if(m===void 0)throw new Error(`value ${l} is invalid`);const u=m,g=B.useCallback(()=>{c(!0)},[c]),x=B.useCallback(p=>{t(p.name)},[t]),h=B.useCallback(()=>{c(!1)},[c]);return e.jsxs("div",{children:[s?e.jsx(e.Fragment,{children:u.localName}):e.jsxs(Je,{onClick:g,style:{width:"10.2rem",fontSize:"0.9rem"},className:o?"focused":"",children:[u.localName.replace(/\(.+/,""),u.localName.endsWith(")")&&e.jsx("small",{children:u.localName.replace(/^[^(]+/,"")})]}),e.jsx(Ao,{iv:n,onChange:t}),e.jsx(Oo,{onClick:r}),e.jsx(Ro,{open:o,onClose:h,onChange:x,pokemonOptions:d,selectedValue:u})]})}),Ao=a.memo(({iv:n,onChange:s})=>{const{t}=w(),[r,l]=a.useState(null),i=n.pokemon.ancestor!==null,o=a.useCallback(x=>{const h=x.currentTarget.getAttribute("value");h!==null&&(s(h),l(null))},[s,l]),c=[],d=n.allDecendants;for(const x of d)c.push(e.jsxs(f,{value:x.name,onClick:o,children:[e.jsx(re,{children:x.name===n.pokemon.name?e.jsx(we,{}):e.jsx(os,{})}),t(`pokemons.${x.name}`)]},x.name));const m=B.useCallback(x=>{l(x.currentTarget)},[l]),u=B.useCallback(()=>{l(null)},[l]),g=!!r;return e.jsxs(e.Fragment,{children:[e.jsx(Po,{size:"small",onClick:m,disabled:!i,children:e.jsx(Ar,{fontSize:"inherit"})}),e.jsx(jn,{open:g,anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:u,children:c})]})}),Po=S(q)({color:"#6c9",fontSize:"0.9rem",boxShadow:"0 1px 3px 1px rgba(128, 128, 128, 0.2)",marginLeft:".4rem",border:"1px solid #ccc","&:disabled":{color:"#999"}}),Oo=a.memo(({onClick:n})=>e.jsx($o,{size:"small",onClick:n,children:e.jsx(Me,{})})),$o=S(q)({fontSize:"0.9rem",boxShadow:"0 1px 3px 1px rgba(128, 128, 128, 0.2)",marginLeft:".2rem","@media (min-width: 390px)":{marginLeft:".5rem"},border:"1px solid #ccc","& > svg":{width:"14px",height:"14px"}}),Ho=S(ct)(()=>({marginRight:".8rem",width:26,height:26,"& .MuiBadge-badge":{top:23,right:4,border:"1px solid #ccbb88",fontSize:"0.5rem",height:"0.7rem",width:"0.8rem",color:"#000",backgroundColor:"#ffffff",boxShadow:"0 1px 2px 1px rgba(128, 128, 128, 0.4)",zIndex:0},"& > svg":{width:"20px",height:"20px"}})),Te=a.memo(({name:n,count:s})=>n==="unknown"?e.jsx("span",{style:{padding:"0 0.7rem 0 0.2rem"},children:e.jsx(Ie,{name:n})}):e.jsx(Ho,{badgeContent:"×"+s,children:e.jsx(Ie,{name:n})})),Wo=S(f)({borderTop:"1px dashed #ddd",padding:".3rem .5rem","&:first-of-type":{borderTop:0}}),_o=a.memo(({iv:n,onChange:s})=>{const t=B.useCallback(o=>{s(n.clone({ingredient:o.target.value}))},[n,s]),r=B.useCallback(o=>{s(n.clone({mythIng1:o}))},[n,s]),l=B.useCallback(o=>{s(n.clone({mythIng2:o}))},[n,s]),i=B.useCallback(o=>{s(n.clone({mythIng3:o}))},[n,s]);return n.isMythical?qo(n,r,l,i):Vo(n,t)});function Vo(n,s){const t=[],r=["AAA","AAB","ABA","ABB"];n.pokemon.ing3!==void 0&&(r.splice(2,0,"AAC"),r.push("ABC"));for(const l of r)t.push(e.jsx(Wo,{value:l,dense:!0,children:e.jsx(Go,{pokemon:n.pokemon,value:l})},l));return e.jsx(xe,{variant:"standard",size:"small",select:!0,value:n.ingredient,slotProps:{select:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}}},onChange:s,children:t})}const Go=a.memo(({pokemon:n,value:s})=>{const t=e.jsx(Te,{count:n.ing1.c1,name:n.ing1.name}),l=s.charAt(1)==="A"?n.ing1:n.ing2,i=e.jsx(Te,{count:l.c2,name:l.name}),o=s.charAt(2),c=o==="C"&&n.ing3!==void 0?n.ing3:o==="A"?n.ing1:n.ing2,d=e.jsx(Te,{count:c.c3,name:c.name});return e.jsxs(e.Fragment,{children:[t,i,d]})});function qo(n,s,t,r){if(n.pokemon.mythIng===void 0)return e.jsx(e.Fragment,{});const l=[],i=[],o=[];for(const c of n.pokemon.mythIng)l.push(e.jsx(f,{value:c.name,children:e.jsx(Te,{count:c.c1,name:c.name})},c.name)),i.push(e.jsx(f,{value:c.name,children:e.jsx(Te,{count:c.c2,name:c.name})},c.name)),o.push(e.jsx(f,{value:c.name,children:e.jsx(Te,{count:c.c3,name:c.name})},c.name));return i.push(e.jsx(f,{value:"unknown",children:e.jsx(Te,{count:0,name:"unknown"})},"unknown")),o.push(e.jsx(f,{value:"unknown",children:e.jsx(Te,{count:0,name:"unknown"})},"unknown")),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx(ee,{value:n.mythIng1,sx:{paddingBottom:"0.4rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},onChange:s,children:l}),e.jsx(ee,{value:n.mythIng2,sx:{paddingBottom:"0.4rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},onChange:t,children:i}),e.jsx(ee,{value:n.mythIng3,sx:{paddingBottom:"0.4rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},onChange:r,children:o})]})}const Uo=a.memo(({pokemon:n,value:s,onChange:t})=>{const{t:r}=w(),l=Ys(n.skill),i=[];for(let c=1;c<=l;c++)i.push(e.jsxs(f,{value:c,dense:!0,children:["Lv ",c]},c));const o=a.useCallback(c=>{t(parseInt(c.target.value,10))},[t]);return e.jsxs(Xo,{children:[e.jsx("span",{style:{marginRight:"1rem"},children:r(`skills.${n.skill}`)}),e.jsx(xe,{variant:"standard",size:"small",select:!0,value:s,slotProps:{select:{MenuProps:{sx:{height:"400px"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}}},onChange:o,children:i})]})}),Xo=S("div")({"& .MuiSelect-select":{paddingTop:"1px",paddingBottom:"1px",fontSize:"0.9rem"}}),Ko=S(q)({"&":{padding:0,marginLeft:"6px","& > svg":{width:"20px",height:"20px",color:"#bbb","&.error":{color:"#ed6c02",animation:"redglow 0.6s ease-out infinite normal"}}},"@keyframes redglow":{"0%":{transform:"scale(0.9)"},"100%":{transform:"scale(1.1)"}}}),se=a.memo(({isError:n,onClick:s})=>e.jsxs(Ko,{onClick:s,children:[!n&&e.jsx(tn,{}),n&&e.jsx(Pr,{className:"error"})]})),Jo=a.memo(({value:n,onChange:s})=>{const{t}=w(),r=a.useCallback(l=>{s(parseInt(l,10))},[s]);return e.jsxs(ee,{value:n,onChange:r,children:[e.jsx(f,{value:0,children:t("200 hours-")}),e.jsx(f,{value:1,children:t("200 hours+")}),e.jsx(f,{value:2,children:t("500 hours+")}),e.jsx(f,{value:3,children:t("1000 hours+")}),e.jsx(f,{value:4,children:t("2000 hours+")})]})}),Yo=S("div")({margin:"0 0.3rem 0 0.3rem",fontSize:".9rem","& > div.table":{width:"100%",display:"grid",gap:"clamp(.3rem, 0.7vh, .5rem) .8rem",gridTemplateColumns:"fit-content(200px) 1fr"},"& > h3":{margin:"clamp(0.7rem, 1.8vh, 1rem) 0 .3rem -.3rem",fontSize:".8rem",padding:".1rem .5rem",background:"#557799",borderRadius:"0.4rem",color:"white"}}),It=a.memo(({pokemonIv:n,fixMode:s,onChange:t})=>{const{t:r}=w(),l=a.useCallback(v=>{t(n.clone({pokemonName:v}))},[n,t]),i=a.useCallback(v=>{t(n.changeLevel(v))},[n,t]),o=a.useCallback(v=>{t(n.clone({skillLevel:v}))},[n,t]),c=a.useCallback(v=>{t(n.changeSubSkills(v.value))},[n,t]),d=a.useCallback(v=>{t(n.clone({nature:v}))},[n,t]),m=a.useCallback(v=>{t(n.clone({ribbon:v}))},[n,t]),[u,g]=a.useState(!1),x=a.useCallback(()=>{g(!0)},[g]),h=a.useCallback(()=>{g(!1)},[g]),[p,j]=a.useState(!1),b=a.useCallback(()=>{j(!0)},[]),k=a.useCallback(()=>{j(!1)},[]),C=new fn(n);return e.jsxs(Yo,{children:[e.jsxs("div",{className:"table",children:[e.jsxs("div",{children:[r("pokemon"),":"]}),e.jsx(Lo,{iv:n,fixMode:s,onChange:l,onCandyClick:b}),e.jsxs("div",{children:[r("level"),":"]}),e.jsx(Zi,{max100:!0,value:n.level,onChange:i}),e.jsxs("div",{children:[r("ingredient"),":"]}),e.jsx(_o,{iv:n,onChange:t}),e.jsxs("div",{children:[r("frequency"),":"]}),e.jsxs("div",{children:[Bt(C.frequency,r),C.frequency>0&&e.jsx(se,{onClick:x}),e.jsx(Zo,{rp:C,iv:n,open:u,onClose:h})]}),e.jsxs("div",{children:[r("carry limit"),":"]}),n.carryLimit]}),e.jsx("h3",{children:r("Main Skill & Sub Skills")}),e.jsx(Uo,{pokemon:C.pokemon,value:n.skillLevel,onChange:o}),e.jsx(Ii,{value:n.subSkills,onChange:c}),e.jsx("h3",{className:"nature",children:r("additional stats")}),e.jsx(Fi,{iv:n,onChange:d}),e.jsxs("div",{style:{marginTop:".7rem"},children:[e.jsxs("span",{style:{paddingRight:"0.7rem"},children:[r("sleeping time shared"),":"]}),e.jsx(Jo,{value:n.ribbon,onChange:m})]}),e.jsx(Ct,{iv:n,open:p,onChange:t,onClose:k})]})}),Qo=S(G)({"& div.MuiPaper-root":{margin:"20px"},"& article":{margin:"1rem",display:"grid",gridTemplateColumns:"max-content 1fr",gridGap:"1rem",rowGap:"0.5rem",fontSize:"0.9rem",alignItems:"start","& > span.energy":{display:"flex",alignItems:"center"}},"& section":{margin:"0.5rem 1rem 0 1rem","& div.line":{fontSize:".9rem",paddingBottom:2,display:"flex",flex:"0 auto",alignItems:"center","& > label":{"&.indent":{paddingLeft:"1rem"},marginRight:"auto"},"& > div":{paddingLeft:".5rem","& > button":{padding:"2px 7px"}}},"& button.MuiToggleButton-root":{lineHeight:1.3,textTransform:"none"}}}),Zo=a.memo(({rp:n,iv:s,open:t,onClose:r})=>{const{t:l}=w(),[i,o]=a.useState(0),[c,d]=a.useState(!1),[m,u]=a.useState(0),[g,x]=a.useState(0),[h,p]=a.useState(!1),[j,b]=a.useState(2),[k,C]=a.useState(0),[v,N]=a.useState("frequency"),y=a.useCallback((K,z)=>{z!==null&&o(parseInt(z,10))},[]),E=a.useCallback(K=>{d(K.target.checked)},[]),D=a.useCallback((K,z)=>{z!==null&&u(parseInt(z,10))},[]),I=a.useCallback((K,z)=>{z!==null&&x(parseInt(z,10))},[]),F=a.useCallback(K=>{p(K.target.checked)},[]),L=a.useCallback((K,z)=>{z!==null&&b(parseInt(z,10))},[]),M=a.useCallback((K,z)=>{z!==null&&C(parseInt(z,10))},[]),X=a.useCallback((K,z)=>{z!==null&&N(z)},[]);if(!t)return e.jsx(e.Fragment,{});const W=n.getBaseFrequency(i,c,h&&j===0,h&&j===2),P=K=>{switch(v){case"frequency":return Bt(Math.floor(W*K),l);case"count":return l("help count per hour",{n:(3600/W/K).toFixed(2)});case"full":{const H=Math.ceil(s.carryLimit*(c?1.2:1))/n.getBagUsagePerHelp(m,g,h&&j!==2&&k===1)*W*K/60;return new sn(H).toString(l)}}return""},A=P(1),V=P(.66),he=P(.58),ae=P(.52),Fe=P(.45);return e.jsxs(Qo,{open:t,onClose:r,children:[e.jsxs("article",{children:[e.jsxs("span",{className:"energy",children:[e.jsx(Ke,{energy:100}),"81",l("range separator"),"150"]}),e.jsx("span",{children:Fe}),e.jsxs("span",{className:"energy",children:[e.jsx(Ke,{energy:80}),"61",l("range separator"),"80"]}),e.jsx("span",{children:ae}),e.jsxs("span",{className:"energy",children:[e.jsx(Ke,{energy:60}),"41",l("range separator"),"60"]}),e.jsx("span",{children:he}),e.jsxs("span",{className:"energy",children:[e.jsx(Ke,{energy:40}),"1",l("range separator"),"40"]}),e.jsx("span",{children:V}),e.jsxs("span",{className:"energy",children:[e.jsx(Ke,{energy:20}),"0"]}),e.jsx("span",{children:A})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[l("helping bonus"),":"]}),e.jsxs(J,{size:"small",exclusive:!0,value:i,onChange:y,children:[e.jsx(R,{value:0,children:"0"}),e.jsx(R,{value:1,children:"1"}),e.jsx(R,{value:2,children:"2"}),e.jsx(R,{value:3,children:"3"}),e.jsx(R,{value:4,children:"4"}),e.jsx(R,{value:5,children:"5"})]})]}),e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[l("good camp ticket"),":"]}),e.jsx(te,{checked:c,onChange:E})]}),e.jsxs(de,{in:v==="full",children:[e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[l("berry bonus from event"),":"]}),e.jsxs(J,{size:"small",exclusive:!0,value:m,onChange:D,children:[e.jsx(R,{value:0,children:l("none")}),e.jsx(R,{value:1,children:"+1"})]})]}),e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[l("ingredient bonus from event"),":"]}),e.jsxs(J,{size:"small",exclusive:!0,value:g,onChange:I,children:[e.jsx(R,{value:0,children:l("none")}),e.jsx(R,{value:1,children:"+1"})]})]})]}),e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[l("expert mode"),":"]}),e.jsx(te,{checked:h,onChange:F})]}),e.jsx(de,{in:h,children:e.jsxs("div",{className:"line",children:[e.jsxs("label",{className:"indent",children:[l("berry"),":"]}),e.jsxs(J,{size:"small",exclusive:!0,value:j,onChange:L,children:[e.jsx(R,{value:0,children:l("main")}),e.jsx(R,{value:1,children:l("sub")}),e.jsx(R,{value:2,children:l("others")})]})]})}),e.jsx(de,{in:h&&j!==2&&v==="full",children:e.jsxs("div",{className:"line",children:[e.jsxs("label",{className:"indent",children:[l("expert effect"),":"]}),e.jsxs(J,{size:"small",exclusive:!0,value:k,onChange:M,children:[e.jsx(R,{value:1,children:l("expert ing effect")}),e.jsx(R,{value:0,children:l("others")})]})]})}),e.jsx("div",{className:"line",children:e.jsxs("label",{children:[l("value"),":"]})}),e.jsx("div",{className:"value",children:e.jsxs(J,{exclusive:!0,size:"small",value:v,onChange:X,children:[e.jsx(R,{value:"frequency",children:l("frequency")}),e.jsx(R,{value:"count",children:l("help count")}),e.jsx(R,{value:"full",children:l("time to full inventory")})]})})]}),e.jsx(_,{children:e.jsx(T,{onClick:r,children:l("close")})})]})});function Bt(n,s){const t=Math.floor(n/3600),r=Math.floor(n/60%60),l=Math.floor(n%60);return s("freq hhmmss",{h:t,m:r,s:l})}const Tt=a.memo(({value:n,dispatch:s})=>{const{t}=w(),r=a.useCallback(l=>{s({type:"changeParameter",payload:{parameter:{...n,period:parseInt(l,10)}}})},[s,n]);return e.jsxs(ee,{onChange:r,value:n.period,menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(f,{value:1,dense:!0,children:t("1hour")}),e.jsx(f,{value:3,dense:!0,children:t("3hours")}),e.jsx(f,{value:8,dense:!0,children:t("8hours")}),e.jsx(f,{value:16,dense:!0,children:t("16hours")}),e.jsx(f,{value:24,dense:!0,children:t("1day")}),e.jsx(f,{value:168,dense:!0,children:t("1week")}),e.jsx(Ae,{style:{gridColumn:"1 / -1"}}),e.jsx(f,{value:-10,dense:!0,children:t("help x10")}),e.jsx(f,{value:-30,dense:!0,children:t("help x30")}),e.jsx(f,{value:-100,dense:!0,children:t("help x100")}),e.jsx(f,{value:Oe,dense:!0,children:t("whistle")})]})}),Nt=a.memo(({open:n,value:s,onClose:t,onChange:r})=>{const{t:l}=w(),[i,o]=a.useState(s.customEventBonus?.target?.type??["normal"]),[c,d]=a.useState(s.customEventBonus?.target?.specialty??"Berries"),m=a.useCallback(L=>{const M=L.target.value,X=Es.getBonusByName(M);if(X===void 0){r({...s,event:"custom",customEventBonus:{target:{},effects:tr({})}});return}Array.isArray(X.target.type)&&o(X.target.type),typeof X.target.specialty<"u"&&d(X.target.specialty),r({...s,event:X.name,customEventBonus:{target:X.target,effects:X.effects}})},[s,r]),u=a.useCallback((L,M)=>{if(M===null)return;const X={};switch(M){case"type":X.type=i;break;case"specialty":X.specialty=c;break}r({...s,event:"custom",customEventBonus:{...s.customEventBonus,target:X}})},[i,c,s,r]),g=a.useCallback(L=>{o(L),r({...s,event:"custom",customEventBonus:{...s.customEventBonus,target:{type:L}}})},[s,r]),x=a.useCallback(L=>{d(L),r({...s,event:"custom",customEventBonus:{...s.customEventBonus,target:{specialty:L}}})},[s,r]),h=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,skillTrigger:M}}})},[s,r]),p=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,skillLevel:M}}})},[s,r]),j=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,berry:M}}})},[s,r]),b=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,ingredient:M}}})},[s,r]),k=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,dreamShard:M}}})},[s,r]),C=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,ingredientMagnet:M}}})},[s,r]),v=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,ingredientDraw:M}}})},[s,r]),N=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,skillIngredient:M}}})},[s,r]),y=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,berryBurst:M}}})},[s,r]),E=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,dish:M}}})},[s,r]),D=a.useCallback((L,M)=>{M!==null&&r({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,energyFromDish:M}}})},[s,r]);if(!n)return e.jsx(e.Fragment,{});const I=Es.bonus.map(L=>e.jsx(f,{value:L.name,children:l("events."+L.name)},L.name));I.unshift(e.jsx(f,{value:"custom",children:l("events.custom")},"custom"));const F=typeof s.customEventBonus.target.type<"u"?"type":typeof s.customEventBonus.target.specialty<"u"?"specialty":"all";return e.jsxs(ea,{open:n,onClose:t,children:[e.jsx("header",{children:e.jsxs("section",{children:[e.jsxs("label",{children:[l("event"),":"]}),e.jsx(xe,{value:s.event,onChange:m,slotProps:{select:{MenuProps:{PaperProps:{sx:{"& .MuiMenuItem-root":{minHeight:"32px",fontSize:"0.875rem",py:.5}}}}}},select:!0,size:"small",variant:"standard",children:I})]})}),e.jsxs("article",{children:[e.jsxs("section",{children:[e.jsxs("label",{children:[l("target"),":"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:F,onChange:u,children:[e.jsx(R,{value:"all",children:l("all")}),e.jsx(R,{value:"type",children:l("type")}),e.jsx(R,{value:"specialty",children:l("specialty")})]})})]}),e.jsx(de,{in:typeof s.customEventBonus.target.type<"u",sx:{textAlign:"right"},children:e.jsx(na,{onChange:g,value:i})}),e.jsxs(de,{in:typeof s.customEventBonus.target.specialty<"u",sx:{textAlign:"right"},children:[e.jsx(De,{specialty:"Berries",onClick:x,checked:c==="Berries"}),e.jsx(De,{specialty:"Ingredients",onClick:x,checked:c==="Ingredients"}),e.jsx(De,{specialty:"Skills",onClick:x,checked:c==="Skills"})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("berry"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.berry,onChange:j,children:[e.jsx(R,{value:0,children:l("none")}),e.jsx(R,{value:1,children:"+1"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("ingredient"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.ingredient,onChange:b,children:[e.jsx(R,{value:0,children:l("none")}),e.jsx(R,{value:1,children:"+1"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("skill rate"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.skillTrigger,onChange:h,children:[e.jsx(R,{value:1,children:"×1"}),e.jsx(R,{value:1.25,children:"×1.25"}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("skill level"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.skillLevel,onChange:p,children:[e.jsx(R,{value:0,children:l("none")}),e.jsx(R,{value:1,children:"+1"}),e.jsx(R,{value:3,children:"+3"}),e.jsx(R,{value:5,children:"+5"})]})})]})]}),e.jsxs("article",{className:"transparent",children:[e.jsxs("section",{children:[e.jsxs("label",{children:[l("skills.Dream Shard Magnet S"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.dreamShard,onChange:k,children:[e.jsx(R,{value:1,children:l("none")}),e.jsx(R,{value:1.5,children:"×1.5"}),e.jsx(R,{value:2,children:"×2"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("skills.Ingredient Magnet S"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.ingredientMagnet,onChange:C,children:[e.jsx(R,{value:1,children:l("none")}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("skills.Ingredient Draw S"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.ingredientDraw,onChange:v,children:[e.jsx(R,{value:1,children:l("none")}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("ingredients from main skills"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.skillIngredient,onChange:N,children:[e.jsx(R,{value:1,children:l("none")}),e.jsx(R,{value:1.25,children:"×1.25"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("skills.Berry Burst"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.berryBurst,onChange:y,children:[e.jsx(R,{value:1,children:l("none")}),e.jsx(R,{value:1.4,children:"×1.4"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("dish"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.dish,onChange:E,children:[e.jsx(R,{value:1,children:l("none")}),e.jsx(R,{value:1.1,children:"×1.1"}),e.jsx(R,{value:1.25,children:"×1.25"}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("energy from dish"),":"]}),e.jsx("div",{children:e.jsxs(J,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.energyFromDish,onChange:D,children:[e.jsx(R,{value:0,children:l("none")}),e.jsx(R,{value:5,children:"+5"})]})})]})]}),e.jsx(_,{children:e.jsx(T,{onClick:t,children:l("close")})})]})}),ea=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px",maxHeight:"calc(100% - 20px)"},"& .MuiPaper-root":{width:"100%","& > header, & > article":{margin:"0.8rem 0.8rem 0 0.8rem","& > section":{display:"flex",flex:"0 auto",fontSize:".85rem",marginTop:"0.5rem","&:first-of-type":{marginTop:0},"& > label":{marginRight:"auto",marginTop:0},"& > div":{}}},"& .MuiSelect-select":{fontSize:"0.8rem"},"& > article":{background:"#f0f0f0",padding:"0.5rem",borderRadius:"0.9rem","& button.MuiToggleButtonGroup-grouped":{padding:"0.2rem 0.4rem",background:"transparent"},"& button.MuiToggleButtonGroup-grouped.Mui-selected":{background:"rgba(0, 0, 0, 0.08)"}},"& > article.transparent":{marginTop:0,background:"transparent"}}}),na=a.memo(({value:n,onChange:s})=>{const t=a.useCallback((o,c)=>{const d=[...n];d[o]=c,s(d)},[n,s]),r=a.useCallback(o=>{const c=[...n];c.splice(o,1),s(c)},[n,s]),l=a.useCallback(()=>{const o=[...n];o.push(Ve.find(c=>!n.includes(c))??"normal"),s(o)},[n,s]),i=n.map((o,c)=>e.jsx(Ye,{type:o,size:"small",deletable:n.length>1,onChange:d=>t(c,d),onDelete:()=>r(c)},c));return e.jsxs(e.Fragment,{children:[i,i.length<3&&e.jsx(q,{size:"small",onClick:l,children:e.jsx(at,{fontSize:"small"})})]})}),sa=S("div")({padding:"0 1rem",marginBottom:"10rem","& section":{margin:"0.2rem 0",fontSize:".9rem",display:"flex",flex:"0 auto","&.mt":{marginTop:"1rem"},"& > label":{marginRight:"auto",marginTop:0,textWrap:"nowrap"},"& > span > button":{marginRight:0},"& > .MuiInput-underline":{fontSize:"0.9rem"},"& div.MuiToggleButtonGroup-root > button":{fontSize:"0.75rem",padding:"0.5rem 0.2rem",lineHeight:1.1,maxWidth:"7rem"}},"& > button":{marginLeft:"-.4rem"}}),ta=a.memo(({dispatch:n,value:s,hasHelpingBonus:t})=>{const{t:r}=w(),[l,i]=a.useState(!1),[o,c]=a.useState(!1),[d,m]=a.useState(!1),u=a.useCallback(()=>{i(!0)},[]),g=a.useCallback(()=>{i(!1)},[]),x=a.useCallback(A=>{n({type:"changeParameter",payload:{parameter:A}})},[n]),h=a.useCallback(A=>{x({...s,helpBonusCount:parseInt(A.target.value,10)})},[x,s]),p=a.useCallback(A=>{x({...s,evolved:A.target.checked})},[x,s]),j=a.useCallback(A=>{x({...s,maxSkillLevel:A.target.checked})},[x,s]),b=a.useCallback((A,V)=>{V!==null&&(V==="advanced"&&(V="custom"),x({...s,event:V}))},[x,s]),k=a.useCallback(()=>{c(!0)},[]),C=a.useCallback(()=>{c(!1)},[]),v=a.useCallback(A=>{x({...s,tapFrequency:A.target.value})},[x,s]),N=a.useCallback(A=>{x({...s,tapFrequencyAsleep:A.target.value})},[x,s]),y=a.useCallback(()=>{n({type:"openEnergyDialog"})},[n]),E=a.useCallback(A=>{x({...s,recipeBonus:parseInt(A.target.value)})},[x,s]),D=a.useCallback(A=>{x({...s,recipeLevel:A})},[x,s]),I=a.useCallback(()=>{m(!0)},[]),F=a.useCallback(()=>{m(!1)},[]),L=tt(new Date).map(A=>A.name).reverse();let M="";const X=["none",...L,"advanced"].map(A=>{let V=r(`events.${A}`);return M.replace(/\(.*/,"")===V.replace(/\(.*/,"")&&(V=V.replace(/.*\(/,"").replace(")","")),M=V,e.jsx(R,{value:A,style:{textTransform:"none"},children:V},A)}),W=["none",...L].includes(s.event)?s.event:"advanced",P=s.period!==Oe;return e.jsxs(sa,{children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("period"),":"]}),e.jsx(Tt,{dispatch:n,value:s})]}),e.jsx(kt,{value:s,onChange:x}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[r("event"),":"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(J,{size:"small",exclusive:!0,value:W,onChange:b,children:X}),e.jsx(de,{in:W==="advanced",children:e.jsx(T,{onClick:k,children:r("configure event details")})})]})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[r("level"),":"]}),e.jsx(Ss,{dispatch:n,value:s})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("calc with evolved"),":"]}),e.jsx(te,{checked:s.evolved,onChange:p})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("calc with max skill level"),":"]}),e.jsx(te,{checked:s.maxSkillLevel,onChange:j})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[r("helping bonus"),":"]}),e.jsxs(ge,{variant:"standard",value:s.helpBonusCount.toString(),onChange:h,children:[e.jsx(f,{value:0,children:t?"×1":r("none")}),e.jsx(f,{value:1,children:t?"×2":"×1"}),e.jsx(f,{value:2,children:t?"×3":"×2"}),e.jsx(f,{value:3,children:t?"×4":"×3"}),e.jsx(f,{value:4,children:t?"×5":"×4"})]})]}),e.jsxs(de,{in:P,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("tap frequency")," (",r("awake"),"):"]}),e.jsxs(ge,{variant:"standard",value:s.tapFrequency,onChange:v,children:[e.jsx(f,{value:"always",children:r("every minute")}),e.jsx(f,{value:"none",children:r("none")})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("tap frequency")," (",r("asleep"),"):"]}),s.tapFrequency==="none"?e.jsx("span",{style:{fontSize:"0.9rem"},children:r("none")}):e.jsxs(ge,{variant:"standard",value:s.tapFrequencyAsleep,onChange:N,children:[e.jsx(f,{value:"always",children:r("every minute")}),e.jsx(f,{value:"none",children:r("none")})]})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[r("energy"),":"]}),e.jsx(T,{onClick:y,children:r("edit")})]})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[r("recipe bonus"),":",e.jsx(se,{onClick:u})]}),e.jsx(ks,{size:"small",children:e.jsxs(ge,{variant:"standard",value:s.recipeBonus.toString(),onChange:E,children:[e.jsxs(f,{value:0,children:["0% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(",r("mixed recipe"),")"]})]}),e.jsxs(f,{value:19,children:["19% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(7",r("range separator"),"16 ",r("ingredients unit"),")"]})]}),e.jsxs(f,{value:20,children:["20% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(20",r("range separator"),"22 ",r("ingredients unit"),")"]})]}),e.jsxs(f,{value:21,children:["21% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(23",r("range separator"),"26 ",r("ingredients unit"),")"]})]}),e.jsxs(f,{value:25,children:["25% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(17",r("range separator"),"35 ",r("ingredients unit"),")"]})]}),e.jsxs(f,{value:35,children:["35% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(35",r("range separator"),"56 ",r("ingredients unit"),")"]})]}),e.jsxs(f,{value:48,children:["48% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(49",r("range separator"),"77 ",r("ingredients unit"),")"]})]}),e.jsxs(f,{value:61,children:["61% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(78",r("range separator"),"102 ",r("ingredients unit"),")"]})]}),e.jsxs(f,{value:78,children:["78% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(103",r("range separator"),"115 ",r("ingredients unit"),")"]})]})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("average recipe level"),":"]}),e.jsx(Ue,{value:s.recipeLevel,onChange:D,showSlider:!0,sx:{width:"2rem"}})]}),e.jsx("section",{className:"mt",children:e.jsx(T,{onClick:I,variant:"outlined",children:r("initialize all parameters")})}),e.jsx(la,{open:d,onClose:F,dispatch:n}),e.jsx(ra,{open:l,onClose:g}),e.jsx(Nt,{open:o,onClose:C,value:s,onChange:x})]})}),ra=a.memo(({open:n,onClose:s})=>{const{t}=w();return e.jsxs(G,{open:n,onClose:s,children:[e.jsxs(Y,{children:[e.jsx(Se,{sx:{marginBottom:"16px"},children:e.jsx(Q,{i18nKey:"recipe bonus help",components:{raenonx:e.jsx("a",{href:t("recipe bonus list"),children:"raenonx"})}})}),e.jsx(Se,{variant:"body2",children:t("recipe strength help")})]}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:t("close")})})]})}),la=a.memo(({dispatch:n,open:s,onClose:t})=>{const[r,l]=a.useState(!1),{t:i}=w(),o=a.useCallback(()=>{n({type:"changeParameter",payload:{parameter:Qs({})}}),l(!0),t()},[n,t]),c=a.useCallback(()=>{l(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:s,onClose:t,children:[e.jsx(me,{children:i("initialize all parameters")}),e.jsx(Y,{children:e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:i("initialize all parameters message")})}),e.jsxs(_,{children:[e.jsx(T,{onClick:o,color:"error",children:i("reset")}),e.jsx(T,{onClick:t,children:i("cancel")})]})]}),e.jsx(Pe,{open:r,autoHideDuration:2e3,onClose:c,message:i("initialized all parameters")})]})}),ia=S("div")({display:"grid",gridTemplateColumns:"4.8rem 1fr",marginLeft:"0.8rem",marginBottom:".4rem","& header":{marginTop:".7rem","&:first-of-type":{marginTop:0},gridColumn:"1 / -1",fontSize:"1rem","& > span":{display:"inline-block",width:"4rem",fontSize:".6rem",padding:".1rem 0",textAlign:"center",color:"white",borderRadius:".6rem",verticalAlign:"20%"},"& > div":{width:"4.5rem",textAlign:"right",fontWeight:800,display:"inline-block",color:"#555","& > span":{fontSize:"0.7rem",paddingLeft:".2rem"}},"& > button":{padding:0,marginLeft:"6px","& > svg":{width:"20px",height:"20px",color:"#bbb"}}},"& footer":{fontSize:"0.7rem",color:"#666","& > svg":{verticalAlign:"baseline",paddingLeft:".5rem","&:first-of-type":{paddingLeft:0},"&.MuiSvgIcon-root":{width:"1rem",height:"1rem",verticalAlign:"top",paddingRight:0}},"&.ings > svg.MuiSvgIcon-root":{width:".8rem",height:".8rem",paddingRight:"0.2rem"}}}),Mt=a.memo(n=>{const{t:s}=w();return e.jsxs(ia,{children:[e.jsxs("header",{children:[e.jsx("span",{style:{background:"#24d76a"},children:s("berry")}),e.jsx("div",{children:n.berryValue}),n.onBerryInfoClick!==void 0&&e.jsx(se,{onClick:n.onBerryInfoClick})]}),e.jsxs("footer",{children:[s("probability"),": ",n.berryProb,"%"]}),e.jsx("footer",{children:n.berrySubValue}),e.jsxs("header",{children:[e.jsx("span",{style:{background:"#fab855"},children:s("ingredient")}),e.jsx("div",{children:n.ingredientValue}),n.onIngredientInfoClick!==void 0&&e.jsx(se,{onClick:n.onIngredientInfoClick})]}),e.jsxs("footer",{children:[s("probability"),": ",n.ingredientProb,"%"]}),e.jsx("footer",{className:"ings",children:n.ingredientSubValue}),e.jsxs("header",{children:[e.jsx("span",{style:{background:"#44a2fd"},children:s("skill")}),e.jsx("div",{children:n.skillValue}),n.onSkillInfoClick!==void 0&&e.jsx(se,{onClick:n.onSkillInfoClick})]}),e.jsxs("footer",{children:[s("probability"),": ",n.skillProb,"%"]}),e.jsx("footer",{children:n.skillSubValue})]})}),Et=a.memo(({berry:n,ingredient:s,skill:t,width:r,height:l,specialty:i})=>{const m=Math.min(300,r-15-69.28),u=i==="Berries"?"#24d76a":i==="Ingredients"?"#fab855":i==="Skills"?"#44a2fd":"#e28197";return e.jsx("svg",{width:r,height:l,viewBox:`0 0 ${r} ${l}`,style:{position:"absolute",top:"-45px",left:"-0.5rem",pointerEvents:"none"},children:e.jsxs("g",{transform:`translate(${m}, 210)`,children:[e.jsx(oa,{r:80}),e.jsx(aa,{r:80,berry:n,ingredient:s,skill:t,color:u})]})})}),oa=a.memo(({r:n})=>{const{t:s}=w(),t=0,r=-n,l=-n*1.732/2,i=n/2,o=-l,c=i,d=1/4,m=1/2,u=3/4;return e.jsxs(e.Fragment,{children:[e.jsxs("g",{fill:"#666",fontSize:"70%",children:[e.jsx("text",{textAnchor:"middle",x:t,y:r-10,children:s("berry")}),e.jsx("text",{textAnchor:"end",dominantBaseline:"hanging",x:l+15,y:i+5,children:s("skill")}),e.jsx("text",{textAnchor:"end",dominantBaseline:"hanging",x:o+5,y:c+5,children:s("ingredient")})]}),e.jsxs("g",{stroke:"#ccc",fill:"none",children:[e.jsx("polygon",{points:`${t*m},${r*m},${l*m},${i*m},${o*m},${c*m}`}),e.jsx("polygon",{points:`${t},${r},${l},${i},${o},${c}`})]}),e.jsxs("g",{stroke:"#eee",fill:"none",children:[e.jsx("polygon",{points:`${t*d},${r*d},${l*d},${i*d},${o*d},${c*d}`}),e.jsx("polygon",{points:`${t*u},${r*u},${l*u},${i*u},${o*u},${c*u}`})]}),e.jsxs("g",{stroke:"#999",children:[e.jsx("line",{x1:"0",y1:"0",x2:t,y2:r}),e.jsx("line",{x1:"0",y1:"0",x2:l,y2:i}),e.jsx("line",{x1:"0",y1:"0",x2:o,y2:c})]})]})}),aa=a.memo(({r:n,berry:s,ingredient:t,skill:r,color:l})=>{s=s*n,t=t*n,r=r*n;const i=0,o=-s,c=-1.732/2*r,d=r/2,m=1.732/2*t,u=t/2;return e.jsx(e.Fragment,{children:e.jsx("g",{stroke:l,strokeWidth:2,fill:l,fillOpacity:"0.3",children:e.jsx("polygon",{points:`${i},${o},${c},${d},${m},${u}`})})})}),Ft=a.memo(({rp:n,iv:s,showIcon:t,isError:r,onClick:l})=>{const{t:i}=w(),o=s.level>pe,c=a.useCallback(()=>{l!==void 0&&l()},[l]);return e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"start"},children:[e.jsx("span",{style:{color:"#fd775d",fontWeight:"bold",paddingRight:".4rem",fontSize:".8rem",display:"inline-block",transform:"scale(1, 0.9)"},children:i("rp")}),e.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",display:"inline-block",transform:"scale(1, 0.9)"},children:i("num",{n})}),o&&e.jsx("span",{style:{border:"1px solid red",background:"#ffeeee",color:"red",fontSize:"0.7rem",borderRadius:"0.5rem",marginLeft:".5rem",padding:"0 0.3rem"},children:i("estimated value")}),t&&e.jsx(se,{onClick:c,isError:r})]})}),ca=a.memo(({state:n,width:s})=>{const{t}=w(),[r,l]=a.useState(!1),[i,o]=a.useState(!1),[c,d]=a.useState("berry"),m=a.useCallback(()=>{l(!0)},[]),u=a.useCallback(()=>{l(!1)},[]),g=a.useCallback(()=>{o(!0),d("berry")},[o]),x=a.useCallback(()=>{o(!0),d("ingredient")},[o]),h=a.useCallback(()=>{o(!0),d("skill")},[o]),p=a.useCallback(()=>{o(!1)},[o]),j=n.pokemonIv,b=new fn(j),k=b.calculate(),C=Qs({helpBonusCount:j.hasHelpingBonusInActiveSubSkills?1:0}),v=new hs(j,C).calculate(),N=b.pokemon,y=400,E=n.lowerTabIndex===1&&n.selectedItemId>=0&&(n.parameter.level>0||n.parameter.fieldIndex>=0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Ft,{rp:k.rp,iv:j,showIcon:!0,isError:E,onClick:m}),e.jsx(Mt,{berryValue:$(k.berryRp),berryProb:$(b.berryRate*100),berrySubValue:e.jsxs(e.Fragment,{children:[e.jsx(oe,{sx:{color:"#ff944b",width:"1rem",height:"1rem"}}),O(Math.round(v.berryTotalStrength))]}),onBerryInfoClick:g,ingredientValue:$(k.ingredientRp),ingredientProb:$(b.iv.ingredientRate*100),ingredientSubValue:e.jsx(e.Fragment,{children:v.ingredients.map(D=>e.jsxs(a.Fragment,{children:[e.jsx(Ie,{name:D.name}),$(D.count)]},D.name))}),onIngredientInfoClick:x,skillValue:$(k.skillRp),skillProb:$(b.iv.skillRate*100),skillSubValue:v.skillCount.toFixed(2)+t("times unit"),onSkillInfoClick:h}),e.jsx(da,{isError:E,open:r,onClose:u}),e.jsx(ua,{open:i,onClose:p,rp:b,rpResult:k,rpType:c})]}),e.jsx(Et,{width:s,height:y,specialty:N.specialty,berry:k.berryRp/2e3,ingredient:k.ingredientRp/2e3,skill:k.skillRp/2e3})]})}),da=a.memo(({isError:n,open:s,onClose:t})=>{const{t:r}=w();return s?n?e.jsxs(qs,{open:s,onClose:t,children:[e.jsx("article",{children:r("go to strength tab to show the current condition values")}),e.jsx(_,{children:e.jsx(T,{onClick:t,children:r("close")})})]}):e.jsxs(qs,{open:s,onClose:t,children:[e.jsxs("article",{children:[e.jsx("h2",{children:r("rp")}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"rp formula",components:{link:e.jsx("a",{href:r("rp formula doc url"),children:r("rp formula doc title")})}})}),e.jsx("p",{children:r("estimated beyond level",{level:pe})}),e.jsx("h2",{children:r("strength, ingredients, skill count")}),e.jsx("p",{children:r("the amount under the following condition")}),e.jsxs("ul",{children:[e.jsxs("li",{children:[r("period"),": ",r("1day")]}),e.jsxs("li",{children:[r("favorite berry"),": ",r("none")]}),e.jsxs("li",{children:[r("good camp ticket"),": ",r("none")]}),e.jsxs("li",{children:[r("area bonus"),": 0%"]}),e.jsxs("li",{children:[r("helping bonus other pokemon"),": ",r("none")]}),e.jsxs("li",{children:[r("skills.Energy for Everyone S"),": 18 × 3"]}),e.jsxs("li",{children:[r("sleep score"),": 100"]}),e.jsxs("li",{children:[r("tap frequency")," (",r("awake"),"): ",r("every minute")]}),e.jsxs("li",{children:[r("tap frequency")," (",r("asleep"),"): ",r("none")]})]}),e.jsx("p",{children:r("use strength tab if you want to change these condition")}),e.jsx("p",{children:r("estimated beyond level",{level:pe})})]}),e.jsx(_,{children:e.jsx(T,{onClick:t,children:r("close")})})]}):e.jsx(e.Fragment,{})}),qs=S(G)({"& article":{margin:"1rem 1rem 0 1rem","& > h2":{fontSize:"1rem",margin:"0.8rem 0 0 0",lineHeight:1.2,"&:first-of-type":{margin:0}},"& > p":{fontSize:"0.8rem",margin:"0.3rem 0"},"& > ul":{margin:"0.5rem 0",padding:"0 0 0 1.5rem","& > li":{margin:"0.2rem 0",fontSize:"0.8rem"}}}}),ma=S(G)({"& header":{margin:"1rem","& > h1":{fontSize:"1.5rem",margin:0,"& > span":{fontWeight:400,display:"inline-block",width:"4rem",fontSize:".6rem",padding:".1rem 0",textAlign:"center",color:"white",borderRadius:".6rem",verticalAlign:"50%"},"& > strong":{paddingLeft:"0.5rem"}},"& > h2":{display:"inline-block",fontWeight:"normal",fontSize:"0.9rem",margin:"0.3rem 0 0 0.5rem",lineHeight:"1.9"}},"& article":{margin:"1rem .5rem 0 .5rem",display:"grid",gridGap:".5rem",rowGap:".8rem",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem","& > div":{textAlign:"right"}},"& footer":{margin:"1rem 1rem 0 1rem",fontSize:"0.8rem","& > p":{margin:".5rem 0 0 0"}},"& span.box":{borderRadius:".3rem",padding:".1rem .4rem",margin:"0",color:"white",textAlign:"center"},"& span.box1":{background:"#1ebee1"},"& span.box2":{background:"#27c18e"},"& span.box3":{background:"#e7c300"},"& span.box4":{background:"#ce5052"},"& span.box5":{background:"#ce3fa3"}}),ua=a.memo(({open:n,onClose:s,rp:t,rpResult:r,rpType:l})=>{const{t:i}=w();if(!n)return e.jsx(e.Fragment,{});let o="",c="";const d=i(l),m=ie(t.helpCountPer5Hour),u=i("helps per 5 hours");let g="",x="",h="",p="",j="",b="";const C=t.bonus.toString();return l==="berry"?(o="#24d76a",c=$(r.berryRp),g=$(t.berryRate*100)+"%",x=i("berry rate"),h=t.berryStrength.toString(),p=i("berry strength"),j=t.berryCount.toString(),b=i("berry count")):l==="ingredient"?(o="#fab855",c=$(r.ingredientRp),g=$(t.iv.ingredientRate*100)+"%",x=i("ingredient rate"),h=$(t.ingredientEnergy),p=i("ingredient strength"),j=Ut(t.ingredientG),b=i("ingredient factor")):(o="#44a2fd",c=$(r.skillRp),g=$(t.iv.skillRate*100)+"%",x=i("skill rate"),h=O(t.skillValue),p=i("skill strength")),e.jsxs(ma,{open:n,onClose:s,children:[e.jsxs("header",{children:[e.jsxs("h1",{children:[e.jsx("span",{style:{background:o},children:d}),e.jsx("strong",{children:c})]}),e.jsxs("h2",{children:[e.jsx("span",{className:"box box1",children:m}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:g}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box3",children:h}),e.jsx(e.Fragment,{children:" × "}),j!==""&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"box box4",children:j}),e.jsx(e.Fragment,{children:" × "})]}),e.jsx("span",{className:"box box5",children:C})]})]}),e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box1",children:m})}),e.jsx("span",{children:u}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:g})}),e.jsx("span",{children:x}),e.jsx("div",{children:e.jsx("span",{className:"box box3",children:h})}),e.jsx("span",{children:p}),j!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:j})}),e.jsx("span",{children:b})]}),e.jsx("div",{children:e.jsx("span",{className:"box box5",children:C})}),e.jsx("span",{children:e.jsx(Q,{i18nKey:"bonus factor",components:{nature:e.jsx(e.Fragment,{children:ie(t.energyBonus)}),subskill:e.jsx(e.Fragment,{children:ie(t.subSkillBonus)})}})})]}),e.jsxs("footer",{children:[e.jsx("p",{children:e.jsx(Q,{i18nKey:"rp formula",components:{link:e.jsx("a",{href:i("rp formula doc url"),children:i("rp formula doc title")})}})}),e.jsx("p",{children:i("estimated beyond level",{level:pe})})]}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:i("close")})})]})}),zt=a.memo(({open:n,onClose:s,iv:t,fieldBonus:r,berryBonus:l})=>{const{t:i}=w();if(!n)return e.jsx(e.Fragment,{});const o=new fn(t).berryStrength,c=Math.ceil(Math.ceil(o*(1+r/100))*l);return e.jsxs(Vn,{open:n,onClose:s,PaperProps:{style:{maxWidth:"20rem"}},children:[e.jsxs(me,{children:[e.jsxs("article",{children:[e.jsx(oe,{sx:{color:"#ff944b"}}),O(c)]}),e.jsxs("footer",{children:[e.jsx("span",{className:"box box3",children:o}),e.jsx(e.Fragment,{children:" × "}),"(1 + ",e.jsxs("span",{className:"box box4",children:[r,"%"]}),")",e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box5",children:l})]})]}),e.jsx(Y,{children:e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box3",children:o})}),e.jsx("span",{children:i("berry strength")}),e.jsx("div",{children:e.jsxs("span",{className:"box box4",children:[r,"%"]})}),e.jsx("span",{children:i("area bonus")}),e.jsx("div",{children:e.jsx("span",{className:"box box5",children:l})}),e.jsx("span",{children:i("favorite berry")})]})}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:i("close")})})]})}),xa=a.memo(({open:n,onClose:s,strength:t,result:r})=>{const{t:l}=w(),[i,o]=a.useState(!1),c=a.useCallback(()=>{o(!0)},[]),d=a.useCallback(()=>{o(!1)},[]);if(!n)return e.jsx(e.Fragment,{});const m=t.parameter,u=Math.ceil(r.berryStrength*t.berryStrengthBonus),g=r.bonus.berry>0,x=r.berryCount+r.bonus.berry,h=g?$(r.notFullHelpCount*r.berryRate):$(r.berryHelpCount);return e.jsxs(Vn,{open:n,onClose:s,children:[e.jsxs(me,{children:[e.jsxs("article",{children:[e.jsx(oe,{sx:{color:"#ff944b"}}),O(Math.round(r.berryTotalStrength))]}),e.jsxs("footer",{children:[e.jsx("span",{className:"box box1",children:u}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:x}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box3",children:h}),g&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(e.Fragment,{children:" + "}),e.jsx("span",{className:"box box1",children:u}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:r.berryCount}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box3",children:$(r.fullHelpCount)})]})]})]}),e.jsx(Y,{children:e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box1",children:u})}),e.jsxs("span",{children:[l("actual berry strength"),e.jsx(se,{onClick:c})]}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:x})}),e.jsx("span",{children:l("berry count")}),e.jsx("div",{children:e.jsx("span",{className:"box box3",children:h})}),e.jsxs("span",{children:[l("berry help count"),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx("strong",{children:$(r.notFullHelpCount*r.berryRate)}),l("times unit"),": ",l("berry picking count"),e.jsxs("footer",{children:[$(r.notFullHelpCount),e.jsxs("small",{children:[" (",l("normal help count"),")"]}),e.jsx(e.Fragment,{children:" × "}),$(r.berryRate*100),"%",e.jsxs("small",{children:[" (",l("berry rate"),")"]})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:$(r.fullHelpCount)}),l("times unit"),": ",l("sneaky snacking")]})]})]})]})}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:l("close")})}),e.jsx(zt,{open:i,onClose:d,iv:t.pokemonIv,fieldBonus:m.fieldBonus,berryBonus:t.berryStrengthBonus})]})}),ha=a.memo(({open:n,iv:s,energy:t,parameter:r,onClose:l,dispatch:i})=>{const{t:o}=w(),[c,d]=Cs(),[m,u]=a.useState(!1),g=a.useCallback(y=>{i({type:"changeParameter",payload:{parameter:{...r,e4eEnergy:parseInt(y.target.value,10)}}})},[i,r]),x=a.useCallback(y=>{i({type:"changeParameter",payload:{parameter:{...r,e4eCount:parseInt(y.target.value,10)}}})},[i,r]),h=a.useCallback(y=>{i({type:"changeParameter",payload:{parameter:{...r,recoveryBonusCount:parseInt(y.target.value,10)}}})},[i,r]),p=a.useCallback(y=>{u(y.target.value==="");let E=parseInt(y.target.value,10);isNaN(E)&&(E=0),E=ye(0,E,100),i({type:"changeParameter",payload:{parameter:{...r,sleepScore:E}}})},[i,r]),j=a.useCallback(y=>{i({type:"changeParameter",payload:{parameter:{...r,isEnergyAlwaysFull:y.target.checked}}})},[i,r]),b=a.useCallback(y=>{i({type:"changeParameter",payload:{parameter:{...r,isGoodCampTicketSet:y.target.checked}}})},[i,r]),k=a.useCallback(y=>{i({type:"changeParameter",payload:{parameter:{...r,tapFrequency:y.target.value}}})},[i,r]),C=a.useCallback(y=>{i({type:"changeParameter",payload:{parameter:{...r,tapFrequencyAsleep:y.target.value}}})},[i,r]);if(!n)return e.jsx(e.Fragment,{});const v=s.hasEnergyRecoveryBonusInActiveSubSkills,N=t.carryLimit;return e.jsxs(ga,{open:n,onClose:l,children:[e.jsx(pa,{width:c,period:r.period,result:t}),e.jsx(de,{in:!r.isEnergyAlwaysFull,children:e.jsxs("section",{children:[e.jsxs("div",{children:[e.jsxs("label",{children:[o("skills.Energy for Everyone S"),":"]}),e.jsxs("div",{children:[e.jsxs(ge,{variant:"standard",value:r.e4eEnergy.toString(),onChange:g,children:[e.jsx(f,{value:5,children:"5"}),e.jsx(f,{value:7,children:"7"}),e.jsx(f,{value:9,children:"9"}),e.jsx(f,{value:11,children:"11"}),e.jsx(f,{value:15,children:"15"}),e.jsx(f,{value:18,children:"18"})]}),e.jsx("span",{style:{margin:"0 0.5rem"},children:"×"}),e.jsxs(ge,{variant:"standard",value:r.e4eCount.toString(),onChange:x,children:[e.jsx(f,{value:0,children:"0"}),e.jsx(f,{value:1,children:"1"}),e.jsx(f,{value:2,children:"2"}),e.jsx(f,{value:3,children:"3"}),e.jsx(f,{value:4,children:"4"}),e.jsx(f,{value:5,children:"5"}),e.jsx(f,{value:6,children:"6"}),e.jsx(f,{value:7,children:"7"}),e.jsx(f,{value:8,children:"8"}),e.jsx(f,{value:9,children:"9"}),e.jsx(f,{value:10,children:"10"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[o("subskill.Energy Recovery Bonus"),":"]}),e.jsxs(ge,{variant:"standard",value:r.recoveryBonusCount.toString(),onChange:h,children:[e.jsx(f,{value:0,children:v?"×1":o("none")}),e.jsx(f,{value:1,children:v?"×2":"×1"}),e.jsx(f,{value:2,children:v?"×3":"×2"}),e.jsx(f,{value:3,children:v?"×4":"×3"}),e.jsx(f,{value:4,children:v?"×5":"×4"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[o("sleep score"),":"]}),e.jsx("div",{children:e.jsx(xe,{variant:"standard",type:"number",size:"small",value:m?"":r.sleepScore,onChange:p,slotProps:{htmlInput:{min:0,max:100}}})})]})]})}),e.jsx("section",{ref:d,children:e.jsxs("div",{children:[e.jsxs("label",{children:[o("always 81%+"),":"]}),e.jsx("div",{children:e.jsx(te,{size:"small",checked:r.isEnergyAlwaysFull,onChange:j})})]})}),e.jsx("section",{children:e.jsxs("div",{children:[e.jsxs("label",{children:[o("good camp ticket"),":"]}),e.jsx("div",{children:e.jsx(te,{size:"small",checked:r.isGoodCampTicketSet,onChange:b})})]})}),e.jsxs("section",{children:[e.jsxs("div",{children:[e.jsxs("label",{children:[o("tap frequency")," (",o("awake"),"):"]}),e.jsxs(ge,{variant:"standard",value:r.tapFrequency,onChange:k,children:[e.jsx(f,{value:"always",children:o("every minute")}),e.jsx(f,{value:"none",children:o("none")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[o("tap frequency")," (",o("asleep"),"):"]}),r.tapFrequency==="none"?e.jsx("span",{style:{fontSize:"0.9rem"},children:o("none")}):e.jsxs(ge,{variant:"standard",value:r.tapFrequencyAsleep,onChange:C,children:[e.jsx(f,{value:"always",children:o("every minute")}),e.jsx(f,{value:"none",children:o("none")})]})]})]}),e.jsxs("footer",{children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[o("average help efficiency"),":"]}),e.jsx("div",{children:t.averageEfficiency.total}),r.period>=24&&e.jsxs("footer",{children:[e.jsxs("span",{children:[o("awake"),": ",t.averageEfficiency.awake]}),e.jsxs("span",{children:[o("asleep"),": ",t.averageEfficiency.asleep]})]})]}),e.jsxs(de,{in:t.canBeFullInventory&&r.period>=24,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[o("full inventory while sleeping"),":"]}),e.jsx("div",{children:t.timeToFullInventory<0?o("none"):new sn(t.timeToFullInventory).toString(o)}),e.jsxs("footer",{children:[e.jsxs("span",{children:[o("carry limit"),": ",N]}),e.jsxs("span",{children:[o("sneaky snacking"),": ",t.timeToFullInventory<0?o("none"):t.helpCount.asleepFull.toFixed(1)+" "+o("times unit")]})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[o("skill trigger after wake up"),":"]}),e.jsx("div",{children:s.pokemon.specialty!=="Skills"?e.jsxs(e.Fragment,{children:[(t.skillProbabilityAfterWakeup.once*100).toFixed(1),"%"]}):e.jsxs(e.Fragment,{children:["❶",(t.skillProbabilityAfterWakeup.once*100).toFixed(1),"%",e.jsx(e.Fragment,{children:" "}),"❷",(t.skillProbabilityAfterWakeup.twice*100).toFixed(1),"%"]})}),e.jsx("footer",{children:e.jsxs("span",{children:[o("lottery count"),": ",t.helpCount.asleepNotFull.toFixed(2)]})})]})]})]}),s.pokemon.skill==="Charge Energy S"&&e.jsx("div",{className:"warning",children:o("charge energy not implemented")}),e.jsx(_,{disableSpacing:!0,children:e.jsx(T,{onClick:l,children:o("close")})})]})}),ga=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px",maxHeight:"calc(100% - 20px)"},"& .MuiPaper-root":{width:"100%","& > svg":{padding:"0.5rem 0 1rem",width:"100%",userSelect:"none"},"& section":{padding:"0 1rem","& > div":{display:"flex",flex:"0 auto",flexWrap:"wrap",alignItems:"center","& > label":{marginRight:"auto",fontSize:"0.9rem","&.indent":{marginLeft:"1rem"}},"& .MuiSelect-select":{paddingTop:"1px",paddingBottom:"1px",fontSize:"0.9rem"},"& input.MuiInput-input":{fontSize:"0.9rem",paddingBottom:0}}},"& > footer":{margin:"0.5rem 1rem 0 1rem",fontSize:"0.9rem",background:"#eee",borderRadius:"0.9rem",padding:"0.5rem 0.7rem","& section":{display:"grid",gridTemplateColumns:"1fr fit-content(200px)",marginTop:"0.4rem","&.first":{marginTop:0},padding:0,"& > div":{textAlign:"right"},"& > footer":{gridColumn:"1 / -1",color:"#666",fontSize:"0.7rem",marginLeft:"0.8rem","& > span":{marginRight:"1rem"}}}},"& > div.warning":{fontSize:"0.8rem",color:"#666",padding:"0.4rem 1rem 0 1rem",marginLeft:"1.2rem"}}}),pa=a.memo(({width:n,period:s,result:t})=>{const r=a.useRef(null),l=ya(r);return e.jsx("svg",{width:n,height:"200",viewBox:`0 0 ${n} 200`,ref:r,children:e.jsxs("g",{transform:"translate(25,3)",children:[e.jsx(fa,{width:n-50,height:180,period:s,sleepTime:t.sleepTime}),e.jsx(ja,{width:n-50,height:180,result:t}),l!==null&&e.jsx(ba,{width:n-50,height:180,x:l.svgX-25,gx:l.x,gy:l.y,result:t})]})})}),fa=a.memo(({width:n,height:s,period:t,sleepTime:r})=>{const l=Be(100,s),i=Be(80,s),o=Be(60,s),c=Be(40,s),d=Be(20,s),m=Be(0,s),u=pn(2,s),g=pn(1.5,s),x=pn(1,s),h=D=>D/1440*n,p=h(120),j=h(300),b=h(480),k=h(660),C=h(840),v=h(1020),N=h(1200),y=h(1380),E=s+5;return e.jsxs(e.Fragment,{children:[e.jsxs("g",{stroke:"#ddd",children:[e.jsx("line",{x1:"0",y1:l,x2:n,y2:l}),e.jsx("line",{x1:"0",y1:i,x2:n,y2:i}),e.jsx("line",{x1:"0",y1:o,x2:n,y2:o}),e.jsx("line",{x1:"0",y1:c,x2:n,y2:c}),e.jsx("line",{x1:"0",y1:d,x2:n,y2:d}),e.jsx("line",{x1:"0",y1:m,x2:n,y2:m})]}),e.jsxs("g",{stroke:"#bbb",children:[e.jsx("line",{x1:y,y1:s,x2:y,y2:E}),e.jsx("line",{x1:p,y1:s,x2:p,y2:E}),e.jsx("line",{x1:j,y1:s,x2:j,y2:E}),e.jsx("line",{x1:b,y1:s,x2:b,y2:E}),e.jsx("line",{x1:k,y1:s,x2:k,y2:E}),e.jsx("line",{x1:C,y1:s,x2:C,y2:E}),e.jsx("line",{x1:v,y1:s,x2:v,y2:E}),e.jsx("line",{x1:N,y1:s,x2:N,y2:E})]}),e.jsxs("g",{fontSize:"60%",fill:"#999",textAnchor:"end",children:[e.jsx("text",{alignmentBaseline:"central",x:"-5",y:l,children:"100"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:i,children:"80"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:o,children:"60"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:c,children:"40"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:d,children:"20"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:m,children:"0"})]}),e.jsxs("g",{transform:`translate(${n+2},0)`,fontSize:"60%",fill:"#999",textAnchor:"start",children:[e.jsx("text",{alignmentBaseline:"central",x:"0",y:u,children:"2.0"}),e.jsx("text",{alignmentBaseline:"central",x:"0",y:g,children:"1.5"}),e.jsx("text",{alignmentBaseline:"central",x:"0",y:x,children:"1.0"})]}),e.jsxs("g",{transform:`translate(0,${E+3})`,fontSize:"60%",fill:"#999",textAnchor:"middle",children:[e.jsx("text",{alignmentBaseline:"hanging",x:p,y:"0",children:"9:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:j,y:"0",children:"12:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:b,y:"0",children:"15:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:k,y:"0",children:"18:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:C,y:"0",children:"21:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:v,y:"0",children:"24:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:N,y:"0",children:"3:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:y,y:"0",children:"6:00"})]}),e.jsx("rect",{x:n*r/1440,y:"0",width:n*(1440-r)/1440,height:s,fill:"#000080",fillOpacity:"0.08"}),t<24&&e.jsx("rect",{x:n*t*60/1440,y:"0",width:n*(1440-t*60)/1440,height:s,fill:"#6666tt",fillOpacity:"0.15"})]})}),ja=a.memo(({width:n,height:s,result:t})=>{const r=g=>g/1440*n,l=[],i=[];let o=t.events[0].isSnacking,c=o?r(0).toFixed(2):n.toString();for(let g=0;g<t.events.length;g++){const x=Be(t.events[g].energyBefore,s).toFixed(2),h=Be(t.events[g].energyAfter,s).toFixed(2),p=r(t.events[g].minutes).toFixed(2),j=o?i:l;j.push(`${p},${x}`),g<t.events.length-1&&j.push(`${p},${h}`),!o&&t.events[g].isSnacking&&(o=!0,i.push(`${p},${h}`),c=p)}const d=[...l];d.push(`${c},${s} 0,${s}`);const m=[...i];m.length>0&&m.push(`${n},${s} ${c},${s}`);const u=[];for(const g of t.efficiencies){const x=r(g.start),h=r(g.end),p=pn(g.efficiency,s);u.push(`${x},${p} ${h},${p}`)}return e.jsxs(e.Fragment,{children:[e.jsx("polygon",{points:d.join(" "),stroke:"none",fill:"#1976d2",fillOpacity:.2}),e.jsx("polyline",{points:l.join(" "),stroke:"#1976d2",fill:"none"}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("polyline",{points:i.join(" "),stroke:"#000000",fill:"none"}),e.jsx("polygon",{points:m.join(" "),stroke:"none",fill:"#000000",fillOpacity:.2})]}),e.jsx("polyline",{points:u.join(" "),stroke:"#ff0000",fill:"none",strokeWidth:"1.2"})]})}),ba=a.memo(({width:n,height:s,x:t,gx:r,gy:l,result:i})=>{const{t:o}=w(),c=20;if(t<-c||t>n+c)return e.jsx(e.Fragment,{});t=ye(0,t,n);const d=Math.round(t/n*1440/10)*10;t=d/1440*n;const m=i.events.findIndex(j=>d<j.minutes);let u;if(m<=0)u=i.events[i.events.length-1].energyBefore;else{const j=i.events[m-1],b=i.events[m],k=(d-j.minutes)/(b.minutes-j.minutes);u=j.energyAfter+(b.energyBefore-j.energyAfter)*k}let g=i.efficiencies.find(j=>j.start<=d&&d<j.end);g===void 0&&(g=i.efficiencies[i.efficiencies.length-1]);let x="";const h=g.isSnacking;g.isAwake?x=o(h?"asleep (full inventory)":"awake"):x=o(h?"asleep (full inventory)":"asleep");const p={getBoundingClientRect:()=>new DOMRect(r-window.scrollX,l-window.scrollY,0,0)};return e.jsxs(e.Fragment,{children:[e.jsx("line",{stroke:"#999",x1:t,y1:0,x2:t,y2:s}),e.jsx("circle",{fill:h?"#000":"#1976d2",cx:t,cy:Be(u,s),r:"3"}),e.jsx("circle",{fill:"#ff0000",cx:t,cy:pn(g.efficiency,s),r:"3"}),e.jsx(ka,{open:!0,anchorEl:p,placement:"right-end",children:e.jsxs("div",{children:[e.jsx("h3",{children:x}),e.jsxs("h2",{children:[e.jsx(Ke,{energy:u}),Math.floor((d+420)/60)%24,":",Math.floor(d%60).toString().padStart(2,"0")]}),e.jsxs("dl",{children:[e.jsxs("dt",{children:[o("help efficiency"),":"]}),e.jsx("dd",{children:g.efficiency}),e.jsxs("dt",{children:[o("energy"),":"]}),e.jsx("dd",{children:Math.ceil(u)})]})]})})]})}),ka=S(rt)({pointerEvents:"none",padding:"1rem",zIndex:2147483647,"& > div":{padding:".5rem",background:"rgba(246, 246, 246, 0.8)",borderRadius:"0.8rem",boxShadow:"4px 2px 5px 3px rgba(128, 128, 128, 0.2)","& > h2":{fontSize:"0.9rem",color:"#666",margin:0,display:"flex",alignItems:"center","& > svg":{marginRight:"0.1rem"}},"& > h3":{fontSize:"0.6rem",color:"#889",fontWeight:"normal",margin:0},"& > dl":{fontSize:"0.8rem",display:"grid",gridTemplateColumns:"auto auto",margin:"0.3rem 0 0 0","& > dt":{margin:"0 0.4rem 0 0",color:"#333"},"& > dd":{margin:0,textAlign:"right"}}}}),Be=(n,s)=>(150-n)/150*s,pn=(n,s)=>(210-80*n)/150*s;function ya(n){const[s,t]=a.useState(null),r=a.useCallback((d,m)=>{if(n.current===null)return;const u=n.current,g=u.createSVGPoint();g.x=d,g.y=m;const x=u.getScreenCTM();if(!x)return;const h=g.matrixTransform(x.inverse());t({x:d,y:m,svgX:h.x})},[n]),l=a.useCallback(d=>{r(d.touches[0].pageX,d.touches[0].pageY)},[r]),i=a.useCallback(()=>{t(null)},[]),o=a.useCallback(d=>{"ontouchstart"in window||r(d.pageX,d.pageY)},[r]),c=a.useCallback(()=>{t(null)},[]);return a.useEffect(()=>{if(n.current===null)return;const d=n.current;return d.addEventListener("touchstart",l),d.addEventListener("touchmove",l),d.addEventListener("touchend",i),d.addEventListener("mousemove",o),d.addEventListener("mouseleave",c),()=>{d.removeEventListener("touchstart",l),d.removeEventListener("touchmove",l),d.removeEventListener("touchend",i),d.removeEventListener("mousemove",o),d.removeEventListener("mouseleave",c)}},[n,l,i,o,c]),s}const va=a.memo(({open:n,strength:s,result:t,dispatch:r,onClose:l})=>{const{t:i}=w(),[o,c]=a.useState(!1),d=a.useCallback(v=>{r({type:"changeParameter",payload:{parameter:v}})},[r]),m=a.useCallback(v=>{d({...s.parameter,recipeBonus:parseInt(v.target.value)})},[d,s.parameter]),u=a.useCallback(v=>{d({...s.parameter,recipeLevel:v})},[d,s.parameter]),g=a.useCallback(()=>{c(!0)},[]),x=a.useCallback(()=>{c(!1)},[]);if(!n)return e.jsx(e.Fragment,{});const h=s.parameter;if(h.tapFrequency==="none")return e.jsxs(G,{open:n,onClose:l,children:[e.jsx(Y,{style:{fontSize:"0.95rem",whiteSpace:"pre-wrap"},children:i("no ingredient")}),e.jsx(_,{children:e.jsx(T,{onClick:l,children:i("close")})})]});const p=s.pokemonIv.level<30?1:s.pokemonIv.level<60?2:3,j=[[t.ing1]];p>1&&(t.ing2.name==="unknown"||(j[0][0].name===t.ing2.name?j[0].push(t.ing2):j.push([t.ing2]))),p>2&&t.ing3!==void 0&&(t.ing3.name==="unknown"||(j[0][0].name===t.ing3.name?j[0].push(t.ing3):j.length>1&&j[1][0].name===t.ing3.name?j[1].push(t.ing3):j.push([t.ing3])));const k=(h.recipeBonus===0?1:(1+h.recipeBonus/100)*(1+Bs[h.recipeLevel]/100))*.8+.2,C=Ee(h.event,h.customEventBonus)?.dish??1;return e.jsxs(Vn,{open:n,onClose:l,children:[e.jsx(me,{children:e.jsxs("article",{children:[e.jsx(oe,{sx:{color:"#ff944b"}}),O(Math.round(t.ingStrength))]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:`inggrid ings${j.length}`,children:[ss(s,t,k,p,j[0],i),j.length>1&&ss(s,t,k,p,j[1],i),j.length>2&&ss(s,t,k,p,j[2],i)]}),e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box3",children:ie(t.ingHelpCount)})}),e.jsx("span",{children:i("ing help count")}),e.jsxs("footer",{children:[$(t.notFullHelpCount),e.jsxs("small",{children:[" (",i("normal help count"),")"]}),e.jsx(e.Fragment,{children:" × "}),$(t.ingRate*100),"%",e.jsxs("small",{children:[" (",i("ingredient rate"),")"]})]}),e.jsx("div",{children:e.jsx("span",{className:"box box1",children:$(j[0].reduce((v,N)=>v+N.count,0))})}),e.jsx("span",{children:i("ing count")}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:Zs[j[0][0].name]})}),e.jsx("span",{children:i("strength per ing")}),e.jsx("div",{children:e.jsx("span",{className:"box box5",children:ie(k)})}),e.jsxs("span",{children:[i("recipe multiplier"),e.jsx(se,{onClick:g})]}),e.jsxs("footer",{children:[e.jsx(e.Fragment,{children:"("}),ie(h.recipeBonus===0?1:1+h.recipeBonus/100),e.jsxs("small",{children:[" (",i("recipe bonus"),")"]}),e.jsx(e.Fragment,{children:" × "}),ie(1+Bs[h.recipeLevel]/100),e.jsxs("small",{children:["(",i("average recipe level"),")"]}),e.jsx(e.Fragment,{children:") × 0.8 + 0.2"})]}),e.jsx("div",{children:e.jsxs("span",{className:"box box4",children:[h.fieldBonus,"%"]})}),e.jsx("span",{children:i("area bonus")}),C!==1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box6",children:C})}),e.jsx("span",{children:i("event bonus")})]})]}),e.jsxs("section",{style:{marginTop:"1.8rem"},children:[e.jsxs("label",{children:[i("recipe bonus"),":"]}),e.jsx(ks,{size:"small",children:e.jsxs(ge,{variant:"standard",value:s.parameter.recipeBonus.toString(),onChange:m,children:[e.jsxs(f,{value:0,children:["0% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(",i("mixed recipe"),")"]})]}),e.jsxs(f,{value:19,children:["19% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(7",i("range separator"),"16 ",i("ingredients unit"),")"]})]}),e.jsxs(f,{value:20,children:["20% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(20",i("range separator"),"22 ",i("ingredients unit"),")"]})]}),e.jsxs(f,{value:21,children:["21% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(23",i("range separator"),"26 ",i("ingredients unit"),")"]})]}),e.jsxs(f,{value:25,children:["25% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(17",i("range separator"),"35 ",i("ingredients unit"),")"]})]}),e.jsxs(f,{value:35,children:["35% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(35",i("range separator"),"56 ",i("ingredients unit"),")"]})]}),e.jsxs(f,{value:48,children:["48% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(49",i("range separator"),"77 ",i("ingredients unit"),")"]})]}),e.jsxs(f,{value:61,children:["61% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(78",i("range separator"),"102 ",i("ingredients unit"),")"]})]}),e.jsxs(f,{value:78,children:["78% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(103",i("range separator"),"115 ",i("ingredients unit"),")"]})]})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[i("average recipe level"),":"]}),e.jsx(Ue,{value:s.parameter.recipeLevel,onChange:u,showSlider:!0,sx:{width:"2rem"}})]})]}),e.jsx(_,{children:e.jsx(T,{onClick:l,children:i("close")})}),e.jsx(Ca,{open:o,onClose:x})]})});function ss(n,s,t,r,l,i){if(n.parameter.tapFrequency==="none")return e.jsx("article",{children:"ー"});const o=l.reduce((u,g)=>u+g.count,0),c=l[0].name,d=n.parameter,m=Ee(d.event,d.customEventBonus)?.dish??1;return e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[e.jsx(Ie,{name:l[0].name}),$(o)]}),e.jsxs("div",{children:[e.jsx("span",{className:"box box3",children:ie(s.ingHelpCount)}),e.jsx(e.Fragment,{children:" × "}),l.length>1?"(":"",l.map((u,g)=>e.jsxs("span",{children:[g===0?"":" + ",e.jsx(Te,{count:u.helpCount,name:c})]},g)),l.length>1?")":"",e.jsx(e.Fragment,{children:r>1?` / ${r}`:""})]}),e.jsxs("span",{style:{marginTop:"-0.5rem"},children:[e.jsx(oe,{sx:{color:"#ff944b"},className:"strength"}),Re(l.reduce((u,g)=>u+g.strength,0),i)]}),e.jsxs("div",{style:{marginTop:"-0.5rem"},children:[e.jsx("span",{className:"box box1",children:$(o)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:Zs[c]}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box5",children:ie(t)}),e.jsx(e.Fragment,{children:" × "}),e.jsxs("span",{children:[e.jsx(e.Fragment,{children:"(1+"}),e.jsxs("span",{className:"box box4",children:[d.fieldBonus,"%"]}),e.jsx(e.Fragment,{children:")"})]}),m!==1&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box6",children:m})]})]})]})}const Ca=a.memo(({open:n,onClose:s})=>{const{t}=w();return e.jsxs(G,{open:n,onClose:s,children:[e.jsxs(Y,{children:[e.jsx(Se,{sx:{marginBottom:"16px"},children:e.jsx(Q,{i18nKey:"recipe bonus help",components:{raenonx:e.jsx("a",{href:t("recipe bonus list"),children:"raenonx"})}})}),e.jsx(Se,{variant:"body2",children:t("recipe strength help")})]}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:t("close")})})]})}),Sa=a.memo(({open:n,dispatch:s,onClose:t,strength:r,result:l})=>{const{t:i}=w(),[o,c]=a.useState(!1),[d,m]=a.useState(r.pokemonIv),[u,g]=a.useState(1),x=a.useCallback((A,V)=>{c(!0);const he=new Ne({pokemonName:fs.find(ae=>ae.type===A)?.name??"Bulbasaur",level:V});m(he),g(new hs(he,r.parameter).berryStrengthBonus)},[r.parameter]),h=a.useCallback(()=>{c(!1)},[]),p=a.useCallback((A,V)=>{if(V===null)return;const he=r.pokemonIv.clone({skillLevel:parseInt(V,10)});s({type:"updateIv",payload:{iv:he}})},[s,r.pokemonIv]),j=r.parameter;if(j.period<=Oe||j.tapFrequency==="none")return e.jsxs(G,{open:n,onClose:t,children:[e.jsx(Y,{style:{fontSize:"0.95rem",whiteSpace:"pre-wrap"},children:i("strength skill info.not triggered")}),e.jsx(_,{children:e.jsx(T,{onClick:t,children:i("close")})})]});if(!n)return e.jsx(e.Fragment,{});const b=r.pokemonIv,k=b.pokemon.skill.replace(" (Random)",""),C=i(`strength skill info.${k}`),v=b.pokemon.skill,N=v==="Metronome"||v.startsWith("Skill Copy"),y=Ys(b.pokemon.skill),E=Array.from({length:y},(A,V)=>e.jsx(R,{value:V+1,children:V+1},V+1)),D=r.getSkillLevel(),I=r.bonusEffects,[F,L]=wa(r,D,i),[M,X]=Ia(r,D,i);let W=0;const P=Math.ceil(j.period/24);return v==="Berry Burst (Disguise)"&&(W=1-Math.pow(1-.18,l.skillCount/P)),e.jsxs(Vn,{open:n,onClose:t,children:[e.jsxs(me,{children:[e.jsxs("article",{children:[e.jsx(qe,{mainSkill:v,firstIngredient:b.pokemon.ing1.name}),Re(l.skillValue,i)]}),!N&&e.jsxs("footer",{children:[e.jsx("span",{className:"box box1",children:O(l.skillValuePerTrigger)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:ie(l.skillCount)}),v==="Ingredient Draw S (Hyper Cutter)"&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box4",children:ie(1+Ts)})]}),v==="Ingredient Draw S (Super Luck)"&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),e.jsxs("span",{className:"box box5",children:[Ns*100,"%"]})]}),v==="Berry Burst (Disguise)"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(e.Fragment,{children:" + "}),e.jsx("span",{className:"box box1",children:O(l.skillValuePerTrigger)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box4",children:2*P}),e.jsx(e.Fragment,{children:" × "}),e.jsxs("span",{className:"box box5",children:[$(W*100),"%"]})]})]})]}),e.jsxs(Y,{children:[e.jsxs("article",{children:[!N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box1",children:O(l.skillValuePerTrigger)})}),e.jsx("span",{children:F}),L!==null&&e.jsx("footer",{children:L})]}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:ie(l.skillCount)})}),e.jsx("span",{children:i("skill count")}),v==="Ingredient Draw S (Hyper Cutter)"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:ie(1+Ts)})}),e.jsx("span",{children:i("additional ingredient rate")})]}),v==="Ingredient Draw S (Super Luck)"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("span",{className:"box box5",children:[Ns*100,"%"]})}),e.jsx("span",{children:i("ingredient obtain rate")})]}),v==="Berry Burst (Disguise)"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:2*P})}),e.jsx("span",{children:i("great success increasment")}),e.jsx("div",{children:e.jsxs("span",{className:"box box5",children:[$(W*100),"%"]})}),e.jsx("span",{children:i("great success rate")})]})]}),l.skillValue2!==0&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"second-skill",style:{marginTop:"1.2rem"},children:[e.jsxs("article",{children:[v==="Ingredient Magnet S (Plus)"?e.jsx(Ie,{name:b.pokemon.ing1.name}):e.jsx(qe,{mainSkill:v,second:!0}),Re(l.skillValue2,i)]}),e.jsxs("footer",{children:[e.jsx("span",{className:"box box4",children:O(l.skillValuePerTrigger2)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:ie(l.skillCount)})]})]}),e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:O(l.skillValuePerTrigger2)})}),e.jsx("span",{children:M}),X!==null&&e.jsx("footer",{children:X})]})]}),!N&&e.jsxs("section",{style:{marginTop:"1.8rem"},children:[e.jsxs("label",{children:[i("skill level"),":"]}),e.jsx(ks,{size:"small",children:e.jsx(J,{exclusive:!0,value:b.skillLevel,onChange:p,children:E})})]}),e.jsx(de,{in:!N&&(I.skillLevel>0||j.maxSkillLevel)&&D!==b.skillLevel,children:e.jsx("div",{className:"skillLevelNotice",children:e.jsx(Q,{i18nKey:j.maxSkillLevel?"max skill level affected":"skill level bonus affected",components:{level:e.jsx("strong",{children:D}),bonus:e.jsx("strong",{children:I.skillLevelReason==="event+ex"?i("event bonus")+i("text separator")+i("expert mode"):I.skillLevelReason==="event"?i("event bonus"):i("expert mode")})}})})}),Ra(r,s,x,i),C!==""&&e.jsx("div",{className:"footnote",children:C})]}),e.jsx(_,{children:e.jsx(T,{onClick:t,children:i("close")})}),e.jsx(zt,{open:o,onClose:h,iv:d,fieldBonus:j.fieldBonus,berryBonus:u})]})});function wa(n,s,t){const r=n.pokemonIv.pokemon.skill;if(r.startsWith("Charge Energy"))return Ba(n,s,t);if(r.startsWith("Charge Strength"))return Ta(n,s,t);if(r.startsWith("Ingredient Magnet S")||r.startsWith("Ingredient Draw S"))return Na(n,s,t);if(r.startsWith("Dream Shard Magnet"))return Ma(n,s,t);if(r==="Energizing Cheer S"){const l=Le(r,s);return ms(l,s,t,t("nature effect.Energy recovery"))}if(r.startsWith("Energy for Everyone S")){const l=Le(r,s);return ms(l,s,t,t("e4e per pokemon"))}return r.startsWith("Cooking Power-Up S")?hn(t,t("pot size power up")):r==="Tasty Chance S"?hn(t,t("tasty chance increase")):r==="Extra Helpful S"?hn(t,t("help count")):r==="Helper Boost"?hn(t,t("help count per pokemon")):r.startsWith("Berry Burst")?Rt(n,t,t("berry strength per berry burst")):[null,null]}function Ia(n,s,t){const r=n.pokemonIv.pokemon.skill;if(r==="Ingredient Draw S (Super Luck)")return Ea(n,s,t,t("expected dream shard"));if(r==="Ingredient Magnet S (Plus)")return Fa(n,s,t);if(r==="Ingredient Magnet S (Present)")return za(n,s,t);if(r==="Cooking Power-Up S (Minus)"){const l=Fn(r,s);return ms(l,s,t,t("nature effect.Energy recovery"))}return r==="Energy for Everyone S (Berry Juice)"?hn(t,t("expected berry juice")):r==="Energy for Everyone S (Lunar Blessing)"?Rt(n,t,t("berry strength per berry burst")):[null,null]}function Ba(n,s,t){const r=n.pokemonIv,l=n.pokemonIv.pokemon.skill,i=t("value per skill",{value:t("nature effect.Energy recovery")}),o=Le(l,s);return[e.jsxs(e.Fragment,{children:[i,e.jsx("br",{}),e.jsx("span",{className:"box box4",children:o}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box5",children:r.nature.energyRecoveryFactor}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx("span",{className:"box box4",children:o}),e.jsxs(e.Fragment,{children:[": ",t("base value",{value:t("nature effect.Energy recovery")})]})]}),e.jsxs("li",{children:[e.jsx("span",{className:"box box5",children:r.nature.energyRecoveryFactor}),e.jsxs(e.Fragment,{children:[": ",t("nature factor")]}),r.nature.energyRecoveryFactor>1&&e.jsxs("small",{children:[" (",e.jsx(Xe,{children:t("nature effect.Energy recovery")}),")"]}),r.nature.energyRecoveryFactor<1&&e.jsxs("small",{children:[" (",e.jsx(ln,{children:t("nature effect.Energy recovery")}),")"]})]})]})]}),null]}function Ta(n,s,t){const r=n.parameter,l=n.pokemonIv.pokemon.skill,i=t("value per skill",{value:t("strength2")});let o=null;if(l==="Charge Strength S (Random)"){const[d,m]=is(l,s);o=e.jsxs("small",{children:[" (",t("range average",{min:O(d),max:O(m)}),")"]})}else if(l==="Charge Strength S (Stockpile)"){const[d,m]=is(l,s);o=e.jsxs("small",{children:[" (",t("range expected",{min:O(d),max:O(m)}),")"]})}const c=Le(l,s);return[e.jsxs(e.Fragment,{children:[i,e.jsx("br",{}),e.jsx("span",{className:"box box4",children:c}),e.jsx(e.Fragment,{children:" × (1 + "}),e.jsxs("span",{className:"box box5",children:[r.fieldBonus,"%"]}),e.jsx(e.Fragment,{children:")"}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx("span",{className:"box box4",children:c}),e.jsxs(e.Fragment,{children:[": ",t("base value",{value:t("strength2")})]}),o]}),e.jsxs("li",{children:[e.jsxs("span",{className:"box box5",children:[r.fieldBonus,"%"]}),e.jsxs(e.Fragment,{children:[": ",t("area bonus")]})]})]})]}),null]}function Na(n,s,t){const r=n.parameter,l=Le(n.pokemonIv.pokemon.skill,s),i=Ee(r.event,r.customEventBonus),o=n.pokemonIv.pokemon.skill;let c=1;if(o.startsWith("Ingredient Magnet S"))c=Math.max(i?.ingredientMagnet??1,i?.skillIngredient??1);else if(o.startsWith("Ingredient Draw S"))c=Math.max(i?.ingredientDraw??1,i?.skillIngredient??1);else throw new Error(`invalid skill: ${o}`);const d=t("value per skill",{value:t("ing count")});return c===1?[d,null]:[d,e.jsxs(e.Fragment,{children:[l,e.jsxs("small",{children:[" (",t("base value",{value:t("ing count")}),")"]}),e.jsx(e.Fragment,{children:" × "}),c,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]}function Ma(n,s,t){const r=n.parameter,l=n.pokemonIv.pokemon.skill,i=Ee(r.event,r.customEventBonus)?.dreamShard??1,o=t("value per skill",{value:t("dream shard")});if(l==="Dream Shard Magnet S"){if(i===1)return[o,null];{const c=Le(l,s);return[o,e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[c,e.jsxs("small",{children:[" (",t("base value",{value:t("dream shard")}),")"]}),e.jsx(e.Fragment,{children:" × "}),i,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})})]}}else if(l==="Dream Shard Magnet S (Random)"){const[c,d]=is(l,s);if(i===1)return[o,e.jsx(e.Fragment,{children:t("range average",{min:c,max:d})})];{const m=Le(l,s);return[o,e.jsxs(e.Fragment,{children:[m,e.jsxs("small",{children:[" (",t("range average",{min:c,max:d}),")"]}),e.jsx(e.Fragment,{children:" × "}),i,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]}}return[null,null]}function Ea(n,s,t,r){const l=t("value per skill",{value:r}),i=Fn("Ingredient Draw S (Super Luck)",s),o=n.parameter,c=Ee(o.event,o.customEventBonus)?.ingredientMagnet??1;return[e.jsxs(e.Fragment,{children:[l,e.jsx("br",{}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsxs("strong",{children:[O(i),c!==1&&e.jsxs(e.Fragment,{children:[" × ",c]})]}),": ",$(Xt*100),"%"]}),e.jsxs("li",{children:[e.jsxs("strong",{children:[O(i*5),c!==1&&e.jsxs(e.Fragment,{children:[" × ",c]})]}),": ",$(Kt*100),"%"]})]})]}),null]}function Fa(n,s,t){const r=t("value per skill",{value:t("additional ingredients")}),l=n.parameter,i=Ee(l.event,l.customEventBonus),o=Math.max(i?.ingredientMagnet??1,i?.skillIngredient??1);if(o===1)return[r,null];const c=Fn(n.pokemonIv.pokemon.skill,s,n.pokemonIv.pokemon.ing1.name);return[r,e.jsxs(e.Fragment,{children:[c,e.jsxs("small",{children:[" (",t("base value",{value:t("additional ingredients")}),")"]}),e.jsx(e.Fragment,{children:" × "}),o,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]}function za(n,s,t){const r=t("value per skill",{value:t("candy")}),l=n.parameter,i=Ee(l.event,l.customEventBonus)?.ingredientMagnet??1,o=Fn(n.pokemonIv.pokemon.skill,s,n.pokemonIv.pokemon.ing1.name);return[r,e.jsxs(e.Fragment,{children:[o,e.jsxs("small",{children:[" (",t("base value",{value:t("candy")}),")"]}),e.jsx(e.Fragment,{children:" × "}),Jt*100,"%",i!==1&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),i,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]})]}function ms(n,s,t,r){const l=t("value per skill",{value:r});return[e.jsxs(e.Fragment,{children:[l,e.jsx("br",{}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx(Xe,{children:t("nature effect.Energy recovery")}),e.jsx(e.Fragment,{children:": "}),Math.floor(n*new ve("Bold").energyRecoveryFactor)]}),e.jsxs("li",{children:[t("nature effect.Energy recovery"),e.jsx(e.Fragment,{children:" ーー: "}),n]}),e.jsxs("li",{children:[e.jsx(ln,{children:t("nature effect.Energy recovery")}),e.jsx(e.Fragment,{children:": "}),Math.floor(n*new ve("Hasty").energyRecoveryFactor)]})]})]}),null]}function Rt(n,s,t){const r=s("value per skill",{value:t}),l=n.parameter,i=Ee(l.event,l.customEventBonus)?.berryBurst??1,o=Yt(n.pokemonIv,n.parameter,i,n.getSkillLevel());return[e.jsxs(e.Fragment,{children:[r,e.jsx("br",{}),e.jsxs("div",{className:"bbgrid",children:[e.jsxs("label",{children:[s(`pokemons.${n.pokemonIv.pokemon.name}`),":"]}),e.jsx("span",{children:O(o.members[0].total)}),e.jsxs("small",{children:["(",o.members[0].perBerry," × ",o.members[0].count,")"]}),e.jsxs("label",{children:[s("other team member")," 1:"]}),e.jsx("span",{children:O(o.members[1].total)}),e.jsxs("small",{children:["(",o.members[1].perBerry," × ",o.members[1].count,")"]}),e.jsxs("label",{children:[s("other team member")," 2:"]}),e.jsx("span",{children:O(o.members[2].total)}),e.jsxs("small",{children:["(",o.members[2].perBerry," × ",o.members[2].count,")"]}),e.jsxs("label",{children:[s("other team member")," 3:"]}),e.jsx("span",{children:O(o.members[3].total)}),e.jsxs("small",{children:["(",o.members[3].perBerry," × ",o.members[3].count,")"]}),e.jsxs("label",{children:[s("other team member")," 4:"]}),e.jsx("span",{children:O(o.members[4].total)}),e.jsxs("small",{children:["(",o.members[4].perBerry," × ",o.members[4].count,")"]})]})]}),null]}function hn(n,s){return[n("value per skill",{value:s}),null]}function Ra(n,s,t,r){const l=n.parameter;if(!(n.pokemonIv.pokemon.skill.startsWith("Berry Burst")||n.pokemonIv.pokemon.skill==="Energy for Everyone S (Lunar Blessing)"))return e.jsx(e.Fragment,{});const o=n.pokemonIv,c=l.berryBurstTeam.auto,d=Qt(o,l),m=d.filter(j=>j.type===o.pokemon.type).length+1,u=c?m:l.berryBurstTeam.species,g=j=>{s({type:"changeParameter",payload:{parameter:{...l,berryBurstTeam:{...l.berryBurstTeam,auto:!j.target.checked}}}})},x=(j,b)=>{const k=[...l.berryBurstTeam.members];k[j].type=b,s({type:"changeParameter",payload:{parameter:{...l,berryBurstTeam:{...l.berryBurstTeam,members:k}}}})},h=(j,b)=>{const k=[...l.berryBurstTeam.members];k[j].level=b,s({type:"changeParameter",payload:{parameter:{...l,berryBurstTeam:{...l.berryBurstTeam,members:k}}}})},p=j=>{s({type:"changeParameter",payload:{parameter:{...l,berryBurstTeam:{...l.berryBurstTeam,species:parseInt(j,10)}}}})};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{style:{marginTop:"0.5rem"},children:[e.jsxs("label",{children:[r("events.advanced"),":"]}),e.jsx(te,{checked:!c,size:"small",onChange:g})]}),e.jsxs("section",{style:{paddingLeft:"1rem"},children:[e.jsxs("label",{children:[r(`pokemons.${n.pokemonIv.pokemon.name}`),":"]}),e.jsxs("span",{style:{color:"#999"},children:[e.jsx(Ye,{size:"small",disabled:!0,type:n.pokemonIv.pokemon.type,onChange:()=>{}}),e.jsx("span",{style:{padding:"0 0.2rem 0 0.6rem"},children:"Lv."}),n.pokemonIv.level,e.jsx(se,{onClick:()=>t(o.pokemon.type,o.level)})]})]}),[0,1,2,3].map(j=>e.jsxs("section",{style:{paddingLeft:"1rem"},children:[e.jsxs("label",{children:[r("other team member")," ",j+1,":"]}),e.jsxs("span",{style:{color:c?"#999":"inherit"},children:[e.jsx(Ye,{size:"small",disabled:c,type:d[j].type,onChange:b=>x(j,b)}),e.jsx("span",{style:{padding:"0 0.2rem 0 0.6rem"},children:"Lv."}),c?d[j].level:e.jsx(Ue,{value:d[j].level,sx:{width:"1.2rem",fontSize:"0.9rem"},showSlider:!0,onChange:b=>h(j,b)}),e.jsx(se,{onClick:()=>t(d[j].type,d[j].level)})]})]},j)),o.pokemon.name==="Cresselia"&&e.jsxs("section",{style:{paddingLeft:"1rem"},children:[e.jsxs("label",{children:[r("different species"),":"]}),e.jsx("span",{style:{color:"#999"},children:c?u:e.jsxs(ee,{value:u.toString(),sx:{padding:"0 0.5rem"},onChange:p,children:[e.jsx(f,{dense:!0,value:"1",children:"1"}),m>1&&e.jsx(f,{dense:!0,value:"2",children:"2"}),m>2&&e.jsx(f,{dense:!0,value:"3",children:"3"}),m>3&&e.jsx(f,{dense:!0,value:"4",children:"4"}),m>4&&e.jsx(f,{dense:!0,value:"5",children:"5"})]})})]})]})}const Da=a.memo(({open:n,onClose:s,parameter:t,strength:r,result:l,dispatch:i})=>{const{t:o}=w(),c=a.useCallback(m=>{i({type:"changeParameter",payload:{parameter:{...t,helperBoostLevel:parseInt(m,10)}}})},[i,t]),d=a.useCallback(m=>{i({type:"changeParameter",payload:{parameter:{...t,helperBoostSpecies:parseInt(m,10)}}})},[i,t]);return n?e.jsxs(La,{open:n,onClose:s,children:[e.jsxs("article",{children:[e.jsxs("section",{className:"first",children:[e.jsxs("h2",{children:[o("help yield"),":"]}),e.jsxs("span",{children:[$(et(t,r,l)),o("berry unit"),"/",Math.abs(t.period),o("help unit")]})]}),e.jsx("footer",{children:o("help yield description",{n:Math.abs(t.period)})}),e.jsxs("section",{children:[e.jsxs("h2",{children:[o("helps for cap"),":"]}),e.jsxs("span",{children:[$(Zt(r,l)),o("help unit")]})]}),e.jsx("footer",{children:o("helps for cap description")}),e.jsxs("section",{children:[e.jsxs("h2",{children:[o("required helper boost"),":"]}),e.jsxs("span",{children:[$(nt(t,r,l)),o("times unit")]})]}),e.jsx("footer",{children:o("required helper boost description")})]}),e.jsxs("footer",{children:[e.jsxs("h3",{children:[e.jsx(qe,{mainSkill:"Helper Boost"}),o("skills.Helper Boost")]}),e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[o("skill level"),":"]}),e.jsxs(ee,{value:t.helperBoostLevel,onChange:c,children:[e.jsx(f,{dense:!0,value:1,children:"1"}),e.jsx(f,{dense:!0,value:2,children:"2"}),e.jsx(f,{dense:!0,value:3,children:"3"}),e.jsx(f,{dense:!0,value:4,children:"4"}),e.jsx(f,{dense:!0,value:5,children:"5"}),e.jsx(f,{dense:!0,value:6,children:"6"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[o("different species"),":"]}),e.jsxs(ee,{value:t.helperBoostSpecies,onChange:d,children:[e.jsx(f,{dense:!0,value:1,children:"1"}),e.jsx(f,{dense:!0,value:2,children:"2"}),e.jsx(f,{dense:!0,value:3,children:"3"}),e.jsx(f,{dense:!0,value:4,children:"4"}),e.jsx(f,{dense:!0,value:5,children:"5"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[o("helps per skill"),":"]}),e.jsxs("span",{children:[Le("Helper Boost",t.helperBoostLevel,t.helperBoostSpecies),o("times unit")]})]})]}),e.jsx(_,{disableSpacing:!0,children:e.jsx(T,{onClick:s,children:o("close")})})]}):e.jsx(e.Fragment,{})}),La=S(G)({"& .MuiPaper-root":{"& > article":{padding:"0.8rem",maxWidth:"18rem","& > section":{display:"flex",flex:"0 auto",marginTop:"0.8rem","&.first":{marginTop:"0.2rem"},"& > h2":{padding:"0 0 .2rem 0",margin:0,fontSize:"0.9rem",marginRight:"auto"},"& > span":{fontSize:"0.8rem"}},"& > footer":{fontSize:"0.7rem",color:"#666",padding:"0.1rem 0 0 0.7rem"}},"& > footer":{margin:"0.2rem 0.7rem 0 0.7rem",fontSize:"0.8rem",background:"#eee",borderRadius:"0.9rem",padding:"0.5rem 0.7rem","& > h3":{display:"flex",alignItems:"center",fontSize:"0.9rem",fontWeight:"bold",color:"#66cc66",margin:0},"& > section":{display:"flex",flex:"0 auto",marginTop:"0.4rem","& > label":{padding:"0 0 .2rem 0",margin:0,marginRight:"auto"},"& > .MuiButtonBase-root":{fontSize:"0.8rem",textAlign:"center",padding:"0 0.5rem"}}}}}),Aa=a.memo(({param:n,result:s,open:t,dispatch:r,onClose:l})=>{const{t:i}=w(),o=a.useCallback(d=>{const m=[...n.totalFlags];d<m.length&&(m[d]=!m[d]),r({type:"changeParameter",payload:{parameter:{...n,totalFlags:m}}})},[r,n]),c=a.useCallback(()=>{r({type:"changeParameter",payload:{parameter:{...n,addHelpingBonusEffect:!n.addHelpingBonusEffect}}})},[r,n]);return e.jsxs(Pa,{open:t,onClose:l,children:[e.jsxs("article",{children:[e.jsxs("h1",{children:[e.jsx(oe,{sx:{color:"#ff944b"}}),e.jsx("span",{style:{transform:"scale(1, 0.9)"},children:O(Math.round(s.totalStrength))})]}),e.jsxs("div",{className:"grid",children:[e.jsx(De,{disabled:!0,specialty:"Berries"}),e.jsx("div",{className:n.totalFlags[0]?"":"disabled",children:O(Math.round(s.berryTotalStrength))}),e.jsx(q,{size:"small",onClick:()=>o(0),className:n.totalFlags[0]?"":"disabled",children:e.jsx(qn,{fontSize:"small"})}),e.jsx(De,{disabled:!0,specialty:"Ingredients"}),e.jsx("div",{className:n.totalFlags[1]?"":"disabled",children:O(Math.round(s.ingStrength))}),e.jsx(q,{size:"small",onClick:()=>o(1),className:n.totalFlags[1]?"":"disabled",children:e.jsx(qn,{fontSize:"small"})}),e.jsx(De,{disabled:!0,specialty:"Skills"}),e.jsx("div",{className:n.totalFlags[2]?"":"disabled",children:O(Math.round(s.skillStrength+s.skillStrength2))}),e.jsx(q,{size:"small",onClick:()=>o(2),className:n.totalFlags[2]?"":"disabled",children:e.jsx(qn,{fontSize:"small"})})]}),e.jsx(fe,{show:s.helpingBonusStrength>0,children:e.jsxs("footer",{className:"helpingBonus",children:[e.jsxs("label",{children:[i("helping bonus addition"),": "]}),e.jsx("strong",{children:O(s.helpingBonusStrength)})]})}),e.jsx(In,{control:e.jsx(ot,{size:"small",checked:n.addHelpingBonusEffect,onChange:c}),label:i("helping bonus addition label")}),e.jsx(fe,{show:n.addHelpingBonusEffect,children:e.jsx("footer",{className:"helpingBonusNote",children:i("helping bonus addition note")})}),e.jsx("p",{children:i("strength detail1")}),e.jsx("p",{children:i("strength detail2")}),e.jsx("ul",{style:{paddingLeft:"1rem"},children:e.jsx("li",{children:i("strength restriction2")})})]}),e.jsx(_,{children:e.jsx(T,{onClick:l,children:i("close")})})]})}),Pa=S(G)({"& article":{margin:"0.8rem 0.8rem 0 0.8rem","& > h1":{fontSize:"1.4rem",margin:0,display:"flex",alignItems:"center"},"& > div.grid":{margin:"0.2rem 0 0.5rem 1rem",display:"grid",gridTemplateColumns:"min-content min-content min-content",gridGap:"0.2rem 0rem",alignItems:"center","& > div":{textAlign:"right",fontWeight:"bold",paddingLeft:"0.5rem","&.disabled":{color:"#ccc",textDecoration:"line-through #ff0000"}},"& > button":{"& > svg":{fill:"#ccc"},"&.disabled > svg":{fill:"#ff0000"}}},"& footer.helpingBonus":{padding:"0 0 0.5rem 1rem",fontSize:"0.9rem"},"& > label.MuiFormControlLabel-root":{alignItems:"start",marginRight:0,"& > span.MuiFormControlLabel-label":{paddingTop:"0.5rem",fontSize:"0.9rem"}},"& footer.helpingBonusNote":{padding:"0 0 0.5rem 1.8rem",fontSize:"0.8rem",color:"#999"},"& > p":{margin:"0.5rem 0",fontSize:"0.9rem"},"& > ul":{margin:0,fontSize:"0.9rem"}}}),Oa=S("div")({display:"grid",gridTemplateColumns:"1fr 1fr 1fr",margin:"0 -0.5rem","& > h2":{gridColumn:"1 / -1",display:"flex",alignItems:"center",margin:"0 0.2rem",fontSize:"1.5rem","& > span.strength":{transform:"scale(1, 0.9)"},"& > span.evolved":{paddingLeft:"0.8rem",fontSize:"0.8rem"}},"& > section":{borderLeft:"2px dotted #ccc",position:"relative",padding:"0 0 2rem","&:first-of-type":{borderLeft:0},"& > h3":{width:"calc(100% - 1rem)",fontSize:".8rem",fontWeight:400,textAlign:"center",color:"white",borderRadius:".8rem",verticalAlign:"20%",margin:".3rem 0 .1rem 0.5rem","& > button":{position:"absolute",top:"0.45rem",right:"0.7rem","& > svg":{color:"#f0f0f0",width:"16px",height:"16px"}}},"& > article":{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",fontWeight:600,textAlign:"center",verticalAlign:"middle",fontSize:"1.1rem",margin:"auto 0",height:"3rem","& span":{verticalAlign:"middle"},"& svg":{verticalAlign:"middle"},"& span.unit":{display:"inline-block",paddingLeft:".1rem",fontSize:"0.6rem",verticalAlign:"bottom"},"&.ingc":{display:"grid",gridTemplateColumns:"auto auto","& > span.ing":{textAlign:"right","& > svg":{width:"0.6em",height:"0.6em",paddingRight:"0.1rem"},"& > span":{fontSize:"0.8em"}},"& > span.strength":{paddingLeft:"0.3rem",textAlign:"right","& > svg":{width:"0.6em",height:"0.6em"},"& > span":{fontSize:"0.6em"}}},"&.ing2":{lineHeight:"50%"},"&.ing3":{"& > span.ing > svg":{width:"0.4em",height:"0.4em"},fontSize:"0.8em",lineHeight:"50%"},"&.skill2":{lineHeight:"1.6",fontSize:"0.8rem","& > div > svg":{width:"16px",height:"16px"}},"&.skillc":{display:"grid",gridTemplateColumns:"auto auto","&.skill1":{fontSize:"0.9rem","& > div > svg":{width:"0.8em",height:"0.8em"}},"& > span.strength":{paddingLeft:"0.3rem",textAlign:"right",fontSize:"0.7em","& > svg":{width:"0.6em",height:"0.6em"}}}},"& > footer":{fontSize:"0.7rem",bottom:0,color:"#666",position:"absolute",right:"1rem","& > div":{textAlign:"right"}}},"& > footer":{gridColumn:"1 / -1",fontSize:"0.7rem",color:"#666",padding:".6rem .8rem 0","& > span":{paddingRight:"0.8rem","& > small":{fontSize:"0.6rem",padding:"0 0.1rem"}},"& > span:last-of-type":{paddingRight:0}}}),$a=a.memo(({pokemonIv:n,settings:s,energyDialogOpen:t,dispatch:r})=>{const{t:l}=w(),[i,o]=a.useState(!1),[c,d]=a.useState(0),[m,u]=a.useState(!1),[g,x]=a.useState(!1),[h,p]=a.useState(!1),[j,b]=a.useState(!1),k=new hs(n,s,c),C=k.calculate();let v=[];n.pokemon.name!==k.pokemonIv.pokemon.name&&(v=n.decendants),n=k.pokemonIv;const N=a.useCallback(()=>{u(!0)},[]),y=a.useCallback(()=>{u(!1)},[]),E=a.useCallback(()=>{x(!0)},[]),D=a.useCallback(()=>{x(!1)},[]),I=a.useCallback(()=>{p(!0)},[]),F=a.useCallback(()=>{p(!1)},[]),L=a.useCallback(()=>{r({type:"openEnergyDialog"})},[r]),M=a.useCallback(()=>{b(!0)},[]),X=a.useCallback(()=>{b(!1)},[]),W=a.useCallback(()=>{r({type:"closeEnergyDialog"})},[r]),P=O(Math.round(C.berryTotalStrength)),A=Ha(C,s,l),V=Wa(n,C,s,l),he=a.useCallback(()=>{o(!0)},[o]),ae=a.useCallback(()=>{o(!1)},[o]),Fe=a.useCallback(K=>{d(parseInt(K.target.value,10))},[]);return e.jsxs(Oa,{children:[e.jsxs("h2",{children:[e.jsx(oe,{sx:{color:"#ff944b"}}),e.jsx("span",{className:"strength",children:O(Math.round(C.totalStrength))}),e.jsx(se,{onClick:he}),e.jsx(Aa,{param:s,result:C,open:i,dispatch:r,onClose:ae}),v.length===1&&e.jsx("span",{className:"evolved",children:l("strength of x",{x:l(`pokemons.${n.pokemon.name}`)})}),v.length>1&&e.jsx("span",{className:"evolved",children:e.jsx(ge,{variant:"standard",value:n.pokemon.id.toString(),onChange:Fe,children:v.map(K=>e.jsx(f,{value:K.id,children:l("strength of x",{x:l(`pokemons.${K.name}`)})},K.id))})})]}),e.jsxs("section",{children:[e.jsxs("h3",{style:{background:"#24d76a"},children:[l("berry"),e.jsx(se,{onClick:N})]}),e.jsx("article",{children:e.jsxs("div",{children:[e.jsx(oe,{sx:{color:"#ff944b"}}),e.jsx("span",{children:P})]})}),e.jsxs("footer",{children:[e.jsxs("div",{children:[$(C.berryRate*100),"%"]}),e.jsxs("div",{children:[$(C.berryHelpCount),l("times unit")]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{style:{background:"#fab855"},children:[l("ingredient"),e.jsx(se,{onClick:E})]}),A,e.jsxs("footer",{children:[e.jsxs("div",{children:[$(C.ingRate*100),"%"]}),e.jsxs("div",{children:[$(C.ingHelpCount),l("times unit")]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{style:{background:"#44a2fd"},children:[l("skill"),e.jsx(se,{onClick:I})]}),V,e.jsxs("footer",{children:[e.jsxs("div",{children:[$(C.skillRate*100),"%"]}),e.jsxs("div",{children:[ie(C.skillCount),l("times unit")]})]})]}),s.period>Oe&&e.jsxs("footer",{children:[C.energy.canBeFullInventory&&s.period>=24?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[l("full inventory while sleeping (short)"),": ",C.energy.timeToFullInventory<0?l("none"):new sn(C.energy.timeToFullInventory).toString(l)]}),e.jsxs("span",{children:[l("skill trigger after wake up (short)"),e.jsx(e.Fragment,{children:": "}),n.pokemon.specialty!=="Skills"&&n.pokemon.specialty!=="All"?$(C.energy.skillProbabilityAfterWakeup.once*100)+"%":e.jsxs(e.Fragment,{children:["❶",$(C.energy.skillProbabilityAfterWakeup.once*100),"%",e.jsx(e.Fragment,{children:" "}),"❷",$(C.energy.skillProbabilityAfterWakeup.twice*100),"%"]})]})]}):e.jsx(e.Fragment,{children:e.jsxs("span",{children:[l("help efficiency"),": ",C.energy.averageEfficiency.total,s.period>=24&&e.jsxs(e.Fragment,{children:[" (",l("awake"),": ",C.energy.averageEfficiency.awake,", ",l("asleep"),": ",C.energy.averageEfficiency.asleep,")"]})]})}),e.jsx(se,{onClick:L})]}),s.period<0&&e.jsxs("footer",{children:[e.jsxs("span",{children:[l("help yield"),": ",$(et(s,k,C)),l("berry unit"),"/",Math.abs(s.period),l("help unit")]}),e.jsxs("span",{children:[l("required helper boost"),": ",$(nt(s,k,C))]}),e.jsx(se,{onClick:M})]}),k.pokemonIv.pokemon.skill==="Energy for Everyone S (Berry Juice)"&&e.jsx("div",{style:{gridColumn:"1 / -1",border:"1px solid red",background:"#ffeeee",color:"red",fontSize:"0.8rem",borderRadius:"0.5rem",margin:".2rem .5rem 0",padding:"0 0.3rem"},children:l("berry juice assumption")}),e.jsx(xa,{open:m,onClose:y,strength:k,result:C}),e.jsx(va,{open:g,onClose:D,dispatch:r,strength:k,result:C}),e.jsx(Sa,{open:h,onClose:F,dispatch:r,strength:k,result:C}),e.jsx(ha,{open:t,onClose:W,iv:n,energy:C.energy,parameter:s,dispatch:r}),e.jsx(Da,{open:j,onClose:X,parameter:s,strength:k,result:C,dispatch:r})]})});function Ha(n,s,t){if(s.period!==Oe&&s.tapFrequency==="none")return e.jsx("article",{children:"ー"});const r=e.jsx(e.Fragment,{children:n.ingredients.map(l=>e.jsxs(a.Fragment,{children:[e.jsxs("span",{className:"ing",children:[e.jsx(Ie,{name:l.name}),e.jsx("span",{children:$(l.count)})]}),e.jsxs("span",{className:"strength",children:[e.jsx(oe,{sx:{color:"#ff944b"}}),e.jsx("span",{children:Re(Math.floor(l.strength),t)})]})]},l.name))});return e.jsx("article",{className:`ingc ing${n.ingredients.length}`,children:r})}function Wa(n,s,t,r){if(t.period<=Oe||t.tapFrequency==="none")return e.jsx("article",{children:"ー"});const l=n.pokemon.skill,i=Re(s.skillValue,r),o=s.skillValue2===0?"":Re(s.skillValue2,r),c=e.jsxs("div",{children:[e.jsx(qe,{mainSkill:l,firstIngredient:n.pokemon.ing1.name}),e.jsx("span",{style:{paddingLeft:"0.2rem"},children:i})]});let d=null;s.skillValue!==s.skillStrength&&s.skillStrength>0&&(d=e.jsxs("span",{className:"strength",children:[e.jsx(oe,{sx:{color:"#ff944b"}}),e.jsx("span",{children:Re(s.skillStrength,r)})]}));let m=null;s.skillValue2!==s.skillStrength2&&s.skillStrength2>0&&(m=e.jsxs("span",{className:"strength",children:[e.jsx(oe,{sx:{color:"#ff944b"}}),e.jsx("span",{children:Re(s.skillStrength2,r)})]}));let u=null;o!==""&&(u=e.jsxs("div",{style:d!==null&&m===null?{gridColumn:"1 / -1"}:{},children:[l==="Ingredient Magnet S (Plus)"?e.jsx(Ie,{name:n.pokemon.ing1.name}):e.jsx(qe,{mainSkill:l,second:!0}),e.jsx("span",{style:{paddingLeft:"0.2rem"},children:o})]}));const g=d!==null||m!==null?" skillc":"";return e.jsxs("article",{className:o!==""?`skill2${g}`:`skill1${g}`,children:[c,d,u,m]})}const Vn=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px",maxHeight:"calc(100% - 90px)"},"& .MuiPaper-root":{"& > h2.MuiDialogTitle-root, & > div.MuiDialogContent-root > header.second-skill":{margin:"0.5rem 0.5rem 0 0.5rem",padding:0,display:"grid",gridTemplateColumns:"auto 1fr",gridGap:".4rem",alignItems:"start","& > article":{fontSize:"1.4rem",margin:0,display:"flex",alignItems:"center"},"& > footer":{display:"inline-block",fontWeight:"normal",fontSize:"0.9rem",margin:"0.3rem 0 0 0.5rem",lineHeight:"1.8"}},"& > ul":{margin:0,marginTop:"-0.2rem",paddingLeft:"1.5rem",gridColumn:"span 2","& > li > footer":{fontSize:"0.8rem"}},"& > .MuiDialogContent-root":{padding:0,"& > div.inggrid":{margin:"0 0 1rem 1.5rem",display:"grid",gridTemplateColumns:"auto 1fr",gridGap:"0.7rem 0.5rem",alignItems:"start","& > span":{display:"flex",alignItems:"center",fontWeight:"bold","& > svg":{width:"15px",height:"15px",paddingRight:"4px"},"& > svg.strength":{width:"18px",height:"18px",paddingRight:0}},"& > div":{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"0.1rem","& > span.box":{padding:"0.1rem 0.2rem"},"& > span > span.MuiBadge-root":{marginRight:0,"& > svg":{paddingTop:"3px",width:"15px",height:"15px"},"& > .MuiBadge-badge":{top:"18px",right:"10px"}}},"&.ings1, &.ings2":{fontSize:"0.9rem","& > div":{fontSize:"0.8rem"}},"&.ings3":{fontSize:"0.8rem","& > div":{fontSize:"0.7rem"}}},"& > article":{margin:"0.5rem .5rem 0 .5rem",display:"grid",gridGap:".5rem",rowGap:".8rem",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem","& > div":{textAlign:"right"},"& > span > ul.detail":{margin:"0.2rem 0 0 1rem",padding:0,fontSize:"0.8rem","& span.box":{padding:"0 0.3rem"}},"& > span > div.bbgrid":{display:"grid",fontSize:"0.8rem",gridTemplateColumns:"auto auto 1fr",alignItems:"center",gap:"0 0.1rem",background:"#f0f0f0",borderRadius:"0.3rem",padding:"0.1rem 0.5rem","& > label":{fontWeight:"bold",color:"#666"},"& > span":{paddingLeft:"0.8rem",textAlign:"right"},"& > small":{paddingLeft:"0.4rem"}},"& > ul":{margin:0,marginTop:"-0.2rem",paddingLeft:"1.5rem",gridColumn:"span 2","& > li > footer":{fontSize:"0.8rem"}},"& > footer":{margin:"-0.3rem 0 0 1.5rem",fontSize:"0.8rem",gridColumn:"span 2"},"& > span > footer":{margin:"0.2rem 0 0 -1.5rem",fontSize:"0.8rem"}},"& > div.footnote":{margin:"1rem 1rem 0 1rem",fontSize:"0.7rem",whiteSpace:"pre-wrap",color:"#999"},"& > section":{margin:"0.2rem 0.5rem",fontSize:".9rem",display:"flex",flex:"0 auto","&.mt":{marginTop:"1rem"},"& > label":{marginRight:"auto",marginTop:0,textWrap:"nowrap"},"& > span":{display:"flex",alignItems:"center"},"& > div > div > button.MuiToggleButton-root":{margin:0,padding:"0 0.5rem"}},"& div.skillLevelNotice":{fontSize:"0.7rem",color:"#999",margin:"0.2rem 0.5rem 0 2rem"}}},"& span.box":{borderRadius:".3rem",padding:".1rem .4rem",margin:"0",color:"white",textAlign:"center"},"& span.box1":{background:"#1ebee1"},"& span.box2":{background:"#27c18e"},"& span.box3":{background:"#e7c300"},"& span.box4":{background:"#ce5052"},"& span.box5":{background:"#ce3fa3"},"& span.box6":{background:"#ff8822"}}),_a=a.memo(({state:n,dispatch:s})=>{const{t}=w(),[r,l]=a.useState(!1),[i,o]=a.useState(!1),c=n.parameter,d=a.useCallback(()=>{s({type:"changeLowerTab",payload:{index:2}})},[s]),m=a.useCallback(()=>{l(!0)},[]),u=a.useCallback(()=>{l(!1)},[]),g=a.useCallback(E=>{s({type:"changeParameter",payload:{parameter:E}})},[s]),x=a.useCallback(()=>{s({type:"changeParameter",payload:{parameter:{...c,maxSkillLevel:!1}}})},[s,c]),h=a.useCallback(()=>{s({type:"changeParameter",payload:{parameter:{...c,isGoodCampTicketSet:!c.isGoodCampTicketSet}}})},[s,c]),p=a.useCallback(E=>{E==="advanced"&&(E="custom"),s({type:"changeParameter",payload:{parameter:{...c,event:E}}})},[s,c]),j=a.useCallback(()=>{o(!0)},[]),b=a.useCallback(()=>{o(!1)},[]);let k;c.fieldIndex===ls?k=t("favorite berry")+": "+t("all"):c.fieldIndex===rs?k=t("favorite berry")+": "+t("none"):c.fieldIndex===0?k=c.favoriteType.map(E=>t(`types.${E}`)).join(t("text separator")):gs(c.fieldIndex)?k=e.jsxs(e.Fragment,{children:[t(`types.${c.favoriteType[0]}`),e.jsxs("small",{children:[" (",t("main"),")"]}),t("text separator"),t(`types.${c.favoriteType[1]}`),t("text separator"),t(`types.${c.favoriteType[2]}`)]}):k=t(`area.${c.fieldIndex}`);const C=e.jsxs("small",{children:[" (",c.fieldBonus,"%)"]}),v=tt(new Date).map(E=>E.name).reverse();c.event!=="none"&&c.event!=="custom"&&v.indexOf(c.event)<0&&v.unshift(c.event);const N=v.length>0,y=["none",...v,"custom"].map(E=>{const D=E==="none"?t("no event"):E==="custom"?t("event")+": "+t("events.advanced"):t(`events.${E}`);return e.jsx(f,{value:E,dense:!0,style:{textTransform:"none"},children:D},E)});return e.jsxs(Va,{children:[e.jsx("span",{className:"edit",children:e.jsx(T,{onClick:d,size:"small",children:t("details")})}),e.jsx("span",{children:e.jsxs(Je,{onClick:m,children:[k,C]})}),e.jsx("span",{children:e.jsx(Tt,{dispatch:s,value:c})}),c.level!==0&&e.jsx("span",{className:"level",children:e.jsx(Ss,{value:c,dispatch:s})}),c.maxSkillLevel&&e.jsx("span",{children:e.jsx(Je,{onClick:x,children:e.jsx("strong",{children:t("calc with max skill level (short)")})})}),c.period!==Oe&&e.jsxs("span",{children:[e.jsxs(e.Fragment,{children:[t("good camp ticket (short)"),": "]}),e.jsx(Je,{onClick:h,style:{width:"2rem"},children:t(c.isGoodCampTicketSet?"on":"off")})]}),N&&e.jsxs("span",{children:[e.jsx(ee,{value:c.event,onChange:p,children:y}),c.event==="custom"&&e.jsx(q,{size:"small",style:{padding:"2px"},onClick:j,children:e.jsx(dt,{})})]}),e.jsx(yt,{open:r,onClose:u,value:n.parameter,onChange:g}),e.jsx(Nt,{open:i,onClose:b,value:n.parameter,onChange:g})]})}),Va=S("div")({marginTop:"0.2rem",padding:".4rem .6rem",border:"1px solid #ccc",borderRadius:"1rem",background:"#f3f5f0",fontSize:"0.8rem",lineHeight:1.8,"& > span":{float:"left",textWrap:"none",paddingRight:"1rem","&:last-child":{paddingRight:0},"& > button.MuiButtonBase-root":{"&::before":{borderBottomColor:"rgba(0, 0, 0, 0.25)"},marginTop:"-2px",fontSize:"0.8rem",lineHeight:1.5,"& > svg":{fontSize:"1rem"}},"&.level > button":{fontWeight:"bold"},"&.edit":{float:"right",padding:0,"& > button":{textTransform:"none",minWidth:0,textWrap:"nowrap"}}},"&::after":{content:"''",display:"table",clear:"both"}}),Ga=a.memo(({state:n,dispatch:s})=>{const t=n.pokemonIv,r=n.parameter,l=n.lowerTabIndex;return e.jsxs("div",{children:[e.jsx($a,{pokemonIv:t,settings:r,energyDialogOpen:n.energyDialogOpen,dispatch:s}),e.jsx(de,{in:l!==2,children:e.jsx(_a,{state:n,dispatch:s})})]})}),qa=a.memo(({pokemonIv:n,width:s})=>{const{t}=w(),[r,l]=a.useState(!1),i=a.useCallback(()=>{l(!0)},[l]),o=a.useCallback(()=>{l(!1)},[l]),d=new er(n).calculate(),m=400,u=g=>(g=Math.round(g*10)/10,t("num",{n:Math.floor(g)})+"."+g*10%10);return e.jsxs("div",{children:[e.jsxs("p",{style:{margin:"0"},children:[t("rate subskill and nature"),e.jsx(se,{onClick:i})]}),e.jsx(Mt,{berryValue:e.jsxs(e.Fragment,{children:[u(d.berryScore),e.jsx("span",{children:"pt"})]}),berryProb:u(d.berryRate*100),berrySubValue:"",ingredientValue:e.jsxs(e.Fragment,{children:[u(d.ingScore),e.jsx("span",{children:"pt"})]}),ingredientProb:u(d.ingRate*100),ingredientSubValue:"",skillValue:e.jsxs(e.Fragment,{children:[u(d.skillScore),e.jsx("span",{children:"pt"})]}),skillProb:u(d.skillRate*100),skillSubValue:""}),e.jsx(Et,{width:s,height:m,specialty:n.pokemon.specialty,berry:d.berryScore/100,ingredient:d.ingScore/100,skill:d.skillScore/100}),e.jsx(Ua,{open:r,onClose:o})]})}),Ua=a.memo(({open:n,onClose:s})=>{const{t}=w();return e.jsxs(G,{open:n,onClose:s,children:[e.jsx(me,{children:t("rating")}),e.jsxs(Y,{dividers:!0,style:{fontSize:"0.95rem"},children:[e.jsx("p",{style:{marginTop:0},children:t("rating detail1")}),e.jsx("p",{children:t("rating detail2")})]}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:t("close")})})]})}),Xa=a.forwardRef(function(s,t){return e.jsx(Or,{direction:"up",ref:t,...s})}),Ka=a.memo(({open:n,boxItem:s,isEdit:t,onClose:r,onChange:l})=>(t||(s=new Sn(new Ne({pokemonName:"Venusaur"}),void 0,-1)),s===null?e.jsx(e.Fragment,{}):e.jsx(Ya,{open:n,onClose:r,fullScreen:!0,slots:{transition:Xa},children:e.jsx(Ja,{originalBoxItem:s,isEdit:t,onClose:r,onChange:l})}))),Ja=a.memo(({originalBoxItem:n,isEdit:s,onChange:t,onClose:r})=>{const{t:l}=w(),[i,o]=a.useState(n),[c,d]=a.useState(n.nickname),[m,u]=a.useState(new fn(i.iv).calculate().rp),[g,x]=a.useState(!1),h=l(`pokemons.${i.iv.pokemonName}`),p=a.useCallback(y=>{o(new Sn(y,i.nickname,i.id)),u(new fn(y).calculate().rp),c===h&&d("")},[o,i,u,h,c]),j=a.useCallback(y=>{d(y.target.value)},[d]),b=a.useCallback(()=>{x(!0),c===""&&d(h)},[x,d,c,h]),k=a.useCallback(()=>{x(!1),c===h&&d("")},[d,x,c,h]),C=a.useCallback(()=>{s&&t(new Sn(i.iv,c,i.id)),r()},[s,t,r,i,c]),v=a.useCallback(()=>{s||t(new Sn(i.iv,c,i.id)),r()},[s,t,r,i,c]);let N=c;return!g&&c===""&&(N=l(`pokemons.${i.iv.pokemonName}`)),e.jsxs(e.Fragment,{children:[e.jsxs("article",{children:[e.jsx(Ft,{rp:m,iv:i.iv}),e.jsx("div",{className:"icon",children:e.jsx(Wn,{idForm:i.iv.idForm,size:80})}),e.jsx("div",{className:"nickname",children:e.jsx(xe,{variant:"standard",size:"small",value:N,onChange:j,onFocus:b,onBlur:k})}),e.jsx(It,{pokemonIv:i.iv,fixMode:s,onChange:p})]}),e.jsxs(_,{children:[e.jsx(T,{onClick:C,children:l("close")}),!s&&e.jsx(T,{onClick:v,children:l("add")})]})]})}),Ya=S(G)({"& div.MuiDialog-paper":{"& > article":{padding:".5rem .5rem 4rem .5rem","& > div.icon":{margin:".2rem auto",width:"82px"},"& > div.nickname":{margin:"0 auto 1.2rem auto",width:"10rem","& input":{fontSize:"1.2rem",fontWeight:"bold",textAlign:"center"}}},"& > div.MuiDialogActions-root":{position:"fixed",padding:"0 0.5rem 1rem 0.5rem",margin:0,background:"rgba(255, 255, 255, 0.8)",width:"calc(100% - 1rem)",bottom:0}}}),Qa=a.memo(({box:n,open:s,onClose:t})=>{const[r,l]=a.useState(!1),{t:i}=w(),o=n.items.map(m=>m.serialize()).join(`
`),c=a.useCallback(()=>{xs(o).then(()=>{l(!0)}).catch(()=>{})},[l,o]),d=a.useCallback(()=>{l(!1)},[l]);return e.jsxs(G,{open:s,onClose:t,children:[e.jsx(me,{children:i("export")}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:i("export message1")}),e.jsx("p",{style:{fontSize:"0.9rem",margin:"0.5rem 0 1rem 0"},children:i("export message2")}),e.jsx(xe,{label:i("box data"),multiline:!0,fullWidth:!0,rows:6,defaultValue:o})]}),e.jsxs(_,{children:[e.jsx(T,{onClick:c,children:i("copy to clipboard")}),e.jsx(T,{onClick:t,children:i("close")})]}),e.jsx(Pe,{open:r,autoHideDuration:2e3,onClose:d,message:i("copied to clipboard")})]})}),Za=a.memo(({box:n,open:s,onClose:t})=>{const[r,l]=a.useState(""),[i,o]=a.useState(""),{t:c}=w(),d=a.useCallback(h=>{l(h.target.value)},[l]),m=a.useCallback(()=>{l(""),t()},[l,t]),u=a.useCallback(()=>{const h=r.split(/\n/g);let p=0;for(const j of h){if(!n.canAdd)break;const b=n.deserializeItem(j);b!==null&&(n.add(b.iv,b.nickname),p++)}p===0?o(c("failed to import")):(n.save(),o(c("imported N pokemon",{n:p})),m())},[n,o,c,m,r]),g=a.useCallback(()=>{o("")},[o]),x=i!=="";return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:s,onClose:m,children:[e.jsx(me,{children:c("import")}),e.jsxs(Y,{children:[e.jsx("p",{style:{fontSize:"0.9rem",margin:"0 0 1rem 0"},children:c("import message")}),e.jsx(xe,{label:c("box data"),multiline:!0,fullWidth:!0,rows:6,value:r,onChange:d})]}),e.jsxs(_,{children:[e.jsx(T,{onClick:u,children:c("import")}),e.jsx(T,{onClick:m,children:c("close")})]})]}),e.jsx(Pe,{open:x,autoHideDuration:2e3,onClose:g,message:i})]})}),ec=a.memo(({box:n,open:s,onClose:t})=>{const[r,l]=a.useState(!1),{t:i}=w(),o=a.useCallback(()=>{n.removeAll(),l(!0),t()},[n,t]),c=a.useCallback(()=>{l(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:s,onClose:t,children:[e.jsx(me,{children:i("delete all")}),e.jsx(Y,{children:e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:i("delete all message")})}),e.jsxs(_,{children:[e.jsx(T,{onClick:o,color:"error",children:i("delete")}),e.jsx(T,{onClick:t,children:i("cancel")})]})]}),e.jsx(Pe,{open:r,autoHideDuration:2e3,onClose:c,message:i("deleted all pokemon")})]})}),nc=S(kn)({minHeight:"36px",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),ts=S(en)({minHeight:"36px",padding:"6px 16px"}),sc=ci(),tc=a.memo(()=>{const[n,s]=a.useReducer(mi,sc),{t}=w(),r=rc(),l=n.box.getById(n.selectedItemId),i=a.useCallback(b=>{s({type:"updateIv",payload:{iv:b}})},[]),o=a.useCallback((b,k)=>{s({type:"changeUpperTab",payload:{index:k}})},[]),c=a.useCallback(()=>{s({type:"restoreItem"})},[]),d=a.useCallback(()=>{s({type:"saveItem"})},[]),m=a.useCallback(()=>{s({type:"closeAlert"})},[]),u=a.useCallback(()=>{s({type:"editDialogClose"})},[]),g=a.useCallback(b=>{s({type:"addOrEditDone",payload:{item:b}})},[]),x=l!==null&&!l.iv.isEqual(n.pokemonIv),h=a.useCallback(()=>{s({type:"exportClose"})},[]),p=a.useCallback(()=>{s({type:"importClose"})},[]),j=a.useCallback(()=>{s({type:"deleteAllClose"})},[]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{padding:"0 .5rem",position:"sticky",top:0,zIndex:1,background:"#f9f9f9"},children:[e.jsxs(nc,{value:n.tabIndex,onChange:o,children:[e.jsx(ts,{label:t("rp")}),e.jsx(ts,{label:t("strength2")}),e.jsx(ts,{label:t("rating")})]}),n.tabIndex===0&&e.jsx(ca,{state:n,width:r}),n.tabIndex===1&&e.jsx(Ga,{state:n,dispatch:s}),n.tabIndex===2&&e.jsx(qa,{pokemonIv:n.pokemonIv,width:r}),n.pokemonIv.pokemon.rateNotFixed&&e.jsx("div",{style:{border:"1px solid red",background:"#ffeeee",color:"red",fontSize:"0.9rem",borderRadius:"0.5rem",marginTop:"3px",padding:"0 0.3rem"},children:t("rate is not fixed")}),e.jsx(ui,{state:n,dispatch:s,isBoxEmpty:n.box.items.length===0})]}),n.lowerTabIndex===0&&e.jsx("div",{style:{margin:"0 0.5rem 10rem 0.5rem"},children:e.jsx(It,{pokemonIv:n.pokemonIv,onChange:i})}),n.lowerTabIndex===1&&e.jsx(ho,{items:n.box.items,iv:n.pokemonIv,selectedId:n.selectedItemId,dispatch:s,parameter:n.parameter}),n.lowerTabIndex===2&&e.jsx(ta,{value:n.parameter,hasHelpingBonus:n.pokemonIv.hasHelpingBonusInActiveSubSkills,dispatch:s}),e.jsx(Ka,{open:n.boxItemDialogOpen,boxItem:l,isEdit:n.boxItemDialogIsEdit,onClose:u,onChange:g},n.boxItemDialogKey),e.jsx(Qa,{box:n.box,open:n.boxExportDialogOpen,onClose:h}),e.jsx(Za,{box:n.box,open:n.boxImportDialogOpen,onClose:p}),e.jsx(ec,{box:n.box,open:n.boxDeleteAllDialogOpen,onClose:j}),e.jsx(Pe,{open:n.alertMessage!=="",message:t(n.alertMessage),autoHideDuration:2e3,onClose:m}),e.jsx(Pe,{open:x,message:t("pokemon in the box is edited"),action:e.jsxs(e.Fragment,{children:[e.jsx(T,{onClick:c,children:t("reset")}),e.jsx(T,{onClick:d,children:t("save")})]})})]})});function rc(){const[n,s]=a.useState(0);return a.useEffect(()=>{const t=()=>{s(document.documentElement.clientWidth)};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),n}function lc({open:n,onClose:s}){const{t}=w();return e.jsxs(G,{open:n,onClose:s,children:[e.jsx(me,{children:t("about")}),e.jsxs(Y,{dividers:!0,children:[e.jsx(Se,{sx:{marginBottom:"16px"},children:e.jsx(Q,{i18nKey:"about1",components:{profile:e.jsx("a",{href:t("profile"),children:"profile"})}})}),e.jsx(Se,{sx:{marginBottom:"16px"},children:e.jsx(Q,{i18nKey:"about2",components:{x:e.jsxs("a",{href:`https://twitter.com/${t("x username")}`,children:["@",t("x username")]}),github:e.jsx("a",{href:"https://github.com/nitoyon/pokesleep-tool/discussions",children:"GitHub"})}})}),e.jsxs(Se,{sx:{marginBottom:"16px"},children:[e.jsx(Q,{i18nKey:"about3",components:{wiki:e.jsx("a",{href:"https://wikiwiki.jp/poke_sleep/",children:"wiki"}),rp:e.jsx("a",{href:"https://docs.google.com/spreadsheets/d/1kBrPl0pdAO8gjOf_NrTgAPseFtqQA27fdfEbMBBeAhs/#gid=1673887151",children:"RP collection project"}),raenonx:e.jsx("a",{href:"https://pks.raenonx.cc/",children:"RaenonX"})}}),e.jsx(Q,{i18nKey:"about4"})]})]}),e.jsx(_,{children:e.jsx(T,{onClick:s,children:t("close")})})]})}function ic({app:n,open:s,onClose:t}){const{t:r}=w();return e.jsxs(G,{open:s,onClose:t,children:[e.jsx(me,{children:r("how to use")}),e.jsxs(Y,{dividers:!0,children:[e.jsx(Se,{sx:{marginBottom:"16px"},children:r(`${n}.description`)}),e.jsx(Se,{sx:{marginBottom:"16px"},children:r(`${n}.notice detail1`)}),e.jsx(Se,{sx:{marginBottom:"16px"},children:e.jsx(Q,{i18nKey:`${n}.notice detail2`,components:{YouTube:e.jsx("a",{href:"https://www.youtube.com/@nitoyon-24",children:"YouTube channel"})}})})]}),e.jsx(_,{children:e.jsx(T,{onClick:t,children:r("close")})})]})}function oc({open:n,app:s,onAppConfigChange:t,onClose:r}){const l=a.useContext(Hn),[i,o]=a.useState(l.iconUrl??""),[c,d]=a.useState(!1),{t:m,i18n:u}=w(),g=u.language,x=(N,y)=>{u.changeLanguage(y)},h=[],p=u.options.resources;for(const N in p){const y=u.getResource(N,"translation","langname");h.push(e.jsx(R,{value:N,"aria-label":N,children:y},N))}let j=!1,b="";i!==""&&(i.match(/^https?:\/\//)?i.match(/@ID[1-4]@/)||(j=!0,b=m("custom icon id not found")):(j=!0,b=m("custom icon invalid url")));const k=a.useCallback(N=>{o(N.target.value)},[o]),C=a.useCallback(()=>{if(j){d(!0);return}t({...l,language:g,iconUrl:i!==""?i:null}),r()},[t,r,l,j,i,g]),v=a.useCallback(()=>{d(!1)},[d]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:n,onClose:C,fullWidth:!0,children:[e.jsxs(Y,{children:[e.jsx("h3",{style:{margin:"0 0 .3rem 0"},children:m("change language")}),e.jsx(J,{value:g,orientation:"vertical",exclusive:!0,onChange:x,children:h}),s==="IvCalc"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{margin:"1rem 0 0 0"},children:m("custom icon")}),e.jsx("p",{style:{margin:"0.3rem 0",fontSize:"0.9rem"},children:m("custom icon summary")}),e.jsx(xe,{variant:"standard",fullWidth:!0,value:i,placeholder:m("custom icon placeholder"),error:j,helperText:b,onChange:k}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#888",lineHeight:1.1,fontSize:"0.8rem"},children:[m("custom icon details"),e.jsx("br",{}),m("custom icon details japanese only")]})]})]}),e.jsx(_,{children:e.jsx(T,{onClick:C,children:m("close")})})]}),e.jsx(vs,{open:c,onClose:v,message:m("custom icon invalid message")})]})}function ac({app:n,onAppChange:s,onAppConfigChange:t}){const{t:r}=w(),[l,i]=B.useState(null),o=!!l,c=()=>{s("ResearchCalc"),i(null)},d=()=>{s("IvCalc"),i(null)},m=D=>{i(D.currentTarget)},u=()=>{i(null)},[g,x]=B.useState(!1),h=()=>{x(!0),i(null)},p=()=>{x(!1)},[j,b]=B.useState(!1),k=()=>{b(!0),i(null)},C=()=>{b(!1)},[v,N]=B.useState(!1),y=()=>{N(!0),i(null)},E=()=>{N(!1)};return e.jsxs(cc,{children:[e.jsx("div",{className:"title",children:r(`${n}.title`)}),e.jsx(q,{"aria-label":"actions",color:"inherit",onClick:m,children:e.jsx(js,{})}),e.jsxs(jn,{anchorEl:l,open:o,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[e.jsxs(f,{onClick:c,children:[e.jsx(re,{children:n==="ResearchCalc"?e.jsx(we,{}):e.jsx(os,{})}),r("ResearchCalc.short title")]}),e.jsxs(f,{onClick:d,children:[e.jsx(re,{children:n==="IvCalc"?e.jsx(we,{}):e.jsx(os,{})}),r("IvCalc.short title")]}),e.jsx(Ae,{}),e.jsxs(f,{onClick:h,children:[e.jsx(re,{children:e.jsx($r,{})}),r("how to use")]}),e.jsxs(f,{onClick:k,children:[e.jsx(re,{children:e.jsx(tn,{})}),r("about")]}),e.jsxs(f,{onClick:y,children:[e.jsx(re,{children:e.jsx(Hr,{})}),r("settings")]})]}),e.jsx(lc,{open:j,onClose:C}),e.jsx(ic,{app:n,open:g,onClose:p}),e.jsx(oc,{open:v,app:n,onAppConfigChange:t,onClose:E})]})}const cc=S("div")({background:"#665500",color:"white",padding:".2rem .5rem",fontSize:"1rem",display:"flex",alignItems:"center","@media all and (display-mode: standalone)":{background:"#002244"},"& > div.title":{flexGrow:1}}),dc=a.memo(({appType:n,onAppConfigChange:s})=>{const{t}=w(),r=a.useContext(Hn),l=a.useCallback(()=>{c(!0)},[]),i=a.useCallback(()=>{c(!1)},[]),[o,c]=a.useState(!1),d=rr.getArticles(n);if(d.length===0)return e.jsx(e.Fragment,{});const m=d[0],u=r.news[n];if(m.id===u)return e.jsx(e.Fragment,{});const g=()=>{const x={...r,news:{...r.news}};x.news[n]=m.id,s(x)};return e.jsxs(mc,{children:[e.jsx(tn,{}),e.jsxs("div",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:t(`${n}.news.${m.id}.headline`)}}),e.jsxs(T,{onClick:l,children:["[",t("details"),"]"]})]}),e.jsx(q,{onClick:g,children:e.jsx(Ln,{})}),e.jsx(uc,{open:o,onClose:i,appType:n,article:m})]})}),mc=S("div")({margin:"0.2rem .2rem",background:"#e5f6fd",border:"1px solid #d9e9e9",color:"#014343",borderRadius:"0.5rem",display:"grid",gridTemplateColumns:"26px 1fr 40px","& > svg":{color:"#0288d1",width:"18px",height:"18px",padding:"4px"},"& > div":{fontSize:"0.8rem",padding:"0.2rem 0",color:"#014480","& > span":{marginRight:".3rem"},"& > button":{padding:0,minWidth:0,fontSize:"0.8rem"}},"& > button":{width:"40px",height:"40px"}}),uc=a.memo(({appType:n,article:s,open:t,onClose:r})=>{const{t:l,i18n:i}=w();if(!t)return e.jsx(e.Fragment,{});const o=l(`${n}.news.${s.id}.detail`).split(/\n/g),c=l(`${n}.news.${s.id}.headline`);let d="";if(Intl&&Intl.RelativeTimeFormat){const m=Math.max(0,new Date().getTime()-s.date.getTime()),u=new Intl.RelativeTimeFormat(i.language,{style:"long"});m>31536e6?d=u.format(-Math.floor(m/31536e6),"year"):m>2592e6?d=u.format(-Math.floor(m/2592e6),"month"):m>864e5?d=u.format(-Math.floor(m/864e5),"day"):m>36e5?d=u.format(-Math.floor(m/36e5),"hour"):d=u.format(-Math.floor(m/6e4),"minute")}else d=s.date.toLocaleDateString();return e.jsxs(xc,{open:t,onClose:r,children:[e.jsx("time",{children:d}),e.jsx("header",{dangerouslySetInnerHTML:{__html:c}}),o.map((m,u)=>e.jsx("p",{children:m},u)),e.jsx(_,{disableSpacing:!0,children:e.jsx(T,{onClick:r,children:l("close")})})]})}),xc=S(G)({"& .MuiPaper-root":{padding:"1rem 1rem 0 1rem","& > time":{fontSize:"0.7rem",color:"#888"},"& > header":{fontSize:"1rem",fontWeight:"bold",marginBottom:"0.3rem"},"& > p":{fontSize:"0.9rem",margin:"0.4rem 0 0 0"}}});let un;const hc=3,gc=a.memo(({app:n,pwaCount:s,onClose:t})=>{const{t:r}=w();let l=!1;/iP(hone|od|ad)/.test(navigator.userAgent)&&!window.matchMedia("(display-mode: standalone)").matches&&s>=hc&&(l=!0);const[i,o]=B.useState(l),[c,d]=B.useState(!1),m=B.useCallback(h=>{un=h,o(!0)},[]);B.useEffect(()=>(window.addEventListener("beforeinstallprompt",m),()=>{window.removeEventListener("beforeinstallprompt",m)}),[m]);const u=B.useCallback(()=>{un!==void 0?(o(!1),un.prompt(),un.userChoice.then(()=>{un=void 0})):d(!0)},[o]),g=B.useCallback(()=>{o(!1),t()},[o,t]),x=B.useCallback(()=>{d(!1)},[d]);return e.jsx(pc,{open:i,children:e.jsxs("div",{className:"pwa_banner_container",children:[n==="ResearchCalc"?e.jsx(ul,{}):e.jsx(xl,{}),e.jsxs("div",{className:"pwa_banner_body",children:[e.jsx("p",{children:e.jsx(Q,{i18nKey:"pwa notice",values:{app:r(`${n}.short title`)}})}),e.jsx(T,{variant:"contained",size:"small",className:"add",onClick:u,children:r("add to home screen")}),e.jsx(T,{className:"later",onClick:g,children:r("later")})]}),e.jsx(q,{onClick:g,children:e.jsx(Ln,{})}),e.jsx(fc,{app:n,open:c,onClose:x})]})})}),pc=S(Pe)({background:"white",borderRadius:"1rem 1rem 0 0",boxShadow:"0 -.2rem .4rem #ccc",padding:".5rem",bottom:0,zIndex:1e3,"& > div.pwa_banner_container":{display:"flex","& > svg":{alignItems:"flex-start",paddingTop:".5rem",paddingRight:"6px",width:"24px",flexShrink:0},"& > div.pwa_banner_body":{flexGrow:1,paddingTop:".5rem","& > p":{margin:"0 0 .5rem 0"},"& > button":{fontSize:".8rem","&.add":{borderRadius:"1rem",background:"#24da6d"},"&.later":{color:"black"}}},"& > button.MuiIconButton-root":{marginRight:"auto",alignSelf:"start"}}}),fc=a.memo(({app:n,open:s,onClose:t})=>{const{t:r,i18n:l}=w(),[i,o]=B.useState(!1),c=B.useCallback(async()=>{let m="https://nitoyon.github.io/pokesleep-tool/"+(n==="IvCalc"?"iv/":"");l.language!=="en"&&(m+="index."+l.language+".html"),xs(m).then(()=>{o(!0)}).catch(()=>{})},[n,o,l.language]),d=B.useCallback(()=>{o(!1)},[o]);return e.jsxs(jc,{open:s,onClose:t,children:[e.jsx(me,{children:r("how to add to home screen")}),e.jsx(q,{onClick:t,className:"close_button",children:e.jsx(Ln,{})}),e.jsxs(Y,{dividers:!0,children:[e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx(Q,{i18nKey:"open in safari",components:{safari:e.jsx(hl,{})}}),e.jsx("div",{children:e.jsxs(T,{onClick:c,children:["[",r("copy url"),"]"]})})]}),e.jsx("li",{children:e.jsx(Q,{i18nKey:"push share icon",components:{share:e.jsx(bs,{})}})}),e.jsx("li",{children:e.jsx(Q,{i18nKey:"select add to home screen",components:{add:e.jsx(Wr,{})}})})]}),e.jsx(Pe,{open:i,onClose:d,autoHideDuration:1e3,message:r("copied")})]}),e.jsx(_,{children:e.jsx(T,{onClick:t,children:r("close")})})]})}),jc=S(G)({"& div.MuiDialogContent-root":{padding:"1rem","& > ol":{margin:0,paddingLeft:"1.6rem",listStyleType:"none","& > li":{counterIncrement:"step-counter",position:"relative",paddingBottom:".6rem","&::before":{content:"counter(step-counter)",position:"absolute",left:"-1.8rem",top:".6rem",backgroundColor:"#24da6d",color:"white",borderRadius:"1rem",width:"18px",height:"18px",fontSize:"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:1.5},"& button":{padding:0,paddingTop:".2rem"},"& > svg":{position:"relative",top:".4rem"}}}},"& button.close_button":{position:"absolute",right:"8px",top:"12px"}}),bc=ys({typography:{allVariants:{fontFamily:'"M PLUS 1p"'}}}),kc=ys({typography:{allVariants:{fontFamily:'"Noto Sans TC"'}}}),yc=ys({typography:{allVariants:{fontFamily:'"Noto Sans SC"'}}});function zc({config:n}){const s=vc(n),[t,r]=Cc(s),[l,i]=B.useState(n),o=B.useCallback(u=>{r(u)},[r]),c=B.useCallback(u=>{cs(u),i(u)},[i]),d=B.useCallback(()=>{l.pwacnt=0,cs(l),i(l)},[l,i]);let m=bc;return s==="zh-TW"?m=kc:s==="zh-CN"&&(m=yc),e.jsx(_r,{theme:m,children:e.jsxs(Hn.Provider,{value:l,children:[e.jsx(ac,{app:t,onAppChange:o,onAppConfigChange:c}),e.jsx(dc,{appType:t,onAppConfigChange:c}),t==="ResearchCalc"&&e.jsx(ai,{}),t==="IvCalc"&&e.jsx(tc,{}),e.jsx(gc,{app:t,pwaCount:n.pwacnt,onClose:d})]})})}function vc(n){const{i18n:s}=w(),[t,r]=B.useState(n.language),l=B.useCallback(i=>{r(i),cs({...n,language:i})},[n,r]);return B.useEffect(()=>(s.on("languageChanged",l),()=>{s.off("languageChanged",l)}),[s,l]),t}function Cc(n){const s=window.location.pathname.startsWith("/pokesleep-tool/iv/")?"IvCalc":"ResearchCalc",{t,i18n:r}=w(),[l,i]=B.useState(s);return B.useEffect(()=>{document.title=t(`${l}.title`);const o=document.querySelector("link[rel='manifest']");if(o!==null){const x=o.href;o.href=x.replace(/manifest.*/,"manifest."+n+".json")}const c=document.querySelector("meta[name='description']");c!==null&&(c.content=t(`${l}.description`));const d=document.querySelector("html");d!==null&&(d.lang=n.toLowerCase());const m=document.querySelector("link[rel='stylesheet'][href*='https']");m!==null&&(n==="zh-TW"?m.href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap":n==="zh-CN"?m.href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap":m.href="https://fonts.googleapis.com/css2?family=M+PLUS+1p&display=swap");let u=document.location.origin+"/pokesleep-tool/";l==="IvCalc"&&(u+="iv/"),n!=="en"&&(u+=`index.${n.toLowerCase()}.html`);const g=document.location.search+document.location.hash;window.history.replaceState(null,"",u+g)},[n,r,t,l]),[l,i]}export{zc as A,Fc as l,cs as s};
