import{f as p}from"./field-B3S_0DUv.js";import{e as m}from"./event-Bw2ifMvd.js";import{p as v}from"./pokemon-B9QZLuNc.js";import{r as b}from"./news-99KugwsW.js";const g=p,w=3e7;for(const r of g)r.ranks.push(w+1);function x(r){if(r<0)return!1;const t=g[r];if(!t)throw new Error(`Field with index ${r} does not exist.`);return t.expert}function A(r){if(r<0)return[];switch(r){case 0:return[];case 1:return["water","fairy","flying"];case 2:return["ground","fire","rock"];case 3:return["ice","normal","dark"];case 4:return["grass","psychic","fighting"];case 5:return["electric","ghost","steel"];case 6:return["poison","bug","dragon"];case 7:return[]}return[]}const f=["normal","fire","water","electric","grass","ice","fighting","poison","ground","flying","psychic","bug","rock","ghost","dragon","dark","steel","fairy"],D=["Berries","Ingredients","Skills","All"],S=["leek","mushroom","egg","potato","apple","herb","sausage","milk","honey","oil","ginger","tomato","cacao","tail","soy","corn","coffee","pumpkin","avocado"],l=v,o=new Map,B=848,L=849;function N(r,t=!1){if(o.size===0){const s=new Map;for(const n of l){const i=n.ancestor??0;if(i===0)continue;const c=s.get(i);c!==void 0?s.set(i,Math.max(n.evolutionCount,c)):s.set(i,n.evolutionCount)}for(const[n]of s)o.set(n,l.filter(i=>i.ancestor===n))}if(r.ancestor===null)return[];const e=o.get(r.ancestor);return e===void 0?[]:r.ancestor===B?e.filter(s=>t||s.evolutionLeft===0):e.filter(s=>s.form===r.form).filter(s=>t||s.evolutionLeft===0).sort((s,n)=>s.id===r.ancestor?-1:s.id-n.id)}class k{name;day;bonus;get startDate(){return new Date(this.day.getFullYear(),this.day.getMonth(),this.day.getDate(),4,0,0)}get endDate(){const t=this.startDate.getTime();return new Date(t+1440*60*1e3)}constructor(t){this.day=new Date(t.day),this.name=t.name,this.bonus=t.bonus}isInProgress(t){return this.startDate<=t&&t<this.endDate}}class d{name;start;end;target;effects;constructor(t){this.name=t.name,this.start=new Date(t.start),this.end=new Date(t.end),this.target=t.target,this.effects=y(t.effects)}isFinished(t){return t>=this.end}isTarget(t){return!(this.target?.specialty!==void 0&&t.specialty!==this.target.specialty&&t.specialty!=="All"||this.target?.type!==void 0&&!this.target.type.includes(t.type))}}function y(r){return{skillTrigger:r.skillTrigger??1,skillLevel:r.skillLevel??0,berry:r.berry??0,ingredient:r.ingredient??0,dreamShard:r.dreamShard??1,ingredientMagnet:r.ingredientMagnet??1,ingredientDraw:r.ingredientDraw??1,berryBurst:r.berryBurst??1,dish:r.dish??1,energyFromDish:r.energyFromDish??0,fixedBerries:r.fixedBerries??[],fixedAreas:r.fixedAreas??[]}}function j(r,t){const e=a.drowsy;for(const s of e)if(s.isInProgress(r))return s.bonus;return 1}function P(r,t){return a.bonus.filter(s=>!s.isFinished(r))}function _(r,t,e){const s=h(r,t);return s?.isTarget(e)?s.effects:void 0}function H(r,t){return h(r,t)?.effects}function h(r,t){let e;if(r!=="custom"?e=a.bonus.find(s=>s.name===r):e=new d({name:"custom",start:"2000-01-01",end:"2100-01-01",target:t.target,effects:t.effects}),e!==void 0)return e}const R={berry:0,skillTrigger:1,skillLevel:0,ingredient:0,dreamShard:1,ingredientMagnet:1,ingredientDraw:1,berryBurst:1,dish:1,energyFromDish:0,fixedBerries:[],fixedAreas:[]};class E{drowsy;bonus;constructor(t){this.drowsy=t.drowsy.map(e=>new k(e)),this.bonus=t.bonus.map(e=>new d(e))}getBonusByName(t){return this.bonus.find(e=>e.name===t)}}const a=new E(m);function z(r){const t={target:{},effects:y({})};if(typeof r!="object"||r===null)return t;if(typeof r.target=="object"){const e=r.target;typeof e.specialty=="string"&&D.includes(e.specialty)&&(t.target.specialty=e.specialty),typeof e.type=="string"&&f.includes(e.type)&&(t.target.type=[e.type]),Array.isArray(e.type)&&e.type.length<=3&&e.type.every(s=>f.includes(s))&&(t.target.type=e.type)}if(typeof r.effects=="object"){const e=r.effects;typeof e.berry=="number"&&[0,1].includes(e.berry)&&(t.effects.berry=e.berry),typeof e.skillLevel=="number"&&[0,1,3,5].includes(e.skillLevel)&&(t.effects.skillLevel=e.skillLevel),typeof e.skillTrigger=="number"&&[1,1.25,1.5].includes(e.skillTrigger)&&(t.effects.skillTrigger=e.skillTrigger),typeof e.ingredient=="number"&&[0,1].includes(e.ingredient)&&(t.effects.ingredient=e.ingredient),typeof e.dreamShard=="number"&&[1,1.5,2].includes(e.dreamShard)&&(t.effects.dreamShard=e.dreamShard),typeof e.ingredientMagnet=="number"&&[1,1.5].includes(e.ingredientMagnet)&&(t.effects.ingredientMagnet=e.ingredientMagnet),typeof e.ingredientDraw=="number"&&[1,1.5].includes(e.ingredientDraw)&&(t.effects.ingredientDraw=e.ingredientDraw),typeof e.berryBurst=="number"&&[1,1.4].includes(e.berryBurst)&&(t.effects.berryBurst=e.berryBurst),typeof e.dish=="number"&&[1,1.1,1.25,1.5].includes(e.dish)&&(t.effects.dish=e.dish),typeof e.energyFromDish=="number"&&[0,5].includes(e.energyFromDish)&&(t.effects.energyFromDish=e.energyFromDish)}return t}class T{researchCalc;ivCalc;constructor(t){this.researchCalc=t.ResearchCalc.map(e=>new u(e)),this.ivCalc=t.IvCalc.map(e=>new u(e))}getArticles(t){return t==="ResearchCalc"?this.researchCalc:this.ivCalc}}class u{date;id;constructor(t){this.date=new Date(Date.parse(t.date)),this.id=t.id}}const G=new T(b);export{S as I,w as M,f as P,D as S,H as a,y as b,P as c,R as d,a as e,g as f,j as g,B as h,x as i,A as j,_ as k,z as l,N as m,G as n,l as p,L as t};
