import{e as a,j as e,u as B,f as As,g as Ps,h as Y,r as w,k as Ct}from"./react-Cczsdgho.js";import{A as _e,g as es,R as $e,f as q,a as St,P as ze,b as ve,l as It,c as ns,S as gs,d as Ls,N as we,B as ie,M as bn,e as wt,w as Ee,n as Gn,h as Un,m as he,i as ps,j as Bt,k as Tt,s as Nt,o as Mt,p as Os,q as tn,r as Hs,t as ss,u as $,v as te,x as Et,y as fs,z as $s,C as Ie,D as js,E as bs,F as Te,G as kn,H as Kn,I as Ft,J as zt,K as Rt,L as Dt,O as At,Q as Ws,T as Pt,U as _s,V as Lt,W as mn}from"./util-BOxH_1x2.js";import{f as me,g as ks,M as Ot,a as Ce,i as ts,P as De,t as Ht,S as rs,I as yn,p as ls,e as ys,b as $t,c as Vs,n as Wt}from"./data-D4x728gA.js";import{s as S,D as ae,T as X,e as R,f as W,B as M,g as G,h as J,i as _t,C as fe,j as Vt,k as qt,l as vs,m as Gt,P as is,n as qs,o as Ut,I as Gs,p as Ne,q as K,r as Kt,t as Us,u as Xt,A as Jt,v as Yt,w as p,x as ce,y as oe,F as hn,z as Ks,E as rn,L as le,G as Ve,H as os,J as ln,K as Ae,N as ne,O as Xs,Q as as,R as Qt,U as Zt,V as er,W as nr,X as vn,Y as Cn,Z as Sn,_ as sr,$ as tr,a0 as In,a1 as Js,a2 as rr,a3 as lr,a4 as ir,a5 as Cs,a6 as or,a7 as Ss,a8 as ar,a9 as se,aa as Ys,ab as re,ac as Qs,ad as cr,ae as dr,af as ur,ag as mr,ah as xr,ai as hr,aj as wn,ak as gr,al as pr,am as Xn,an as fr,ao as jr,ap as cs,aq as pe,ar as Me,as as Rn,at as br,au as kr,av as yr,aw as vr,ax as ds,ay as Cr}from"./mui-_yF6R8_4.js";import{p as Dn}from"./pokemon-icon-Dmk6So16.js";import{T as Sr,a as Ir,S as wr,b as Br,P as Tr,c as Nr,O as Mr,M as Er,d as Fr,L as zr,H as Rr,e as Dr,G as Ar,E as Pr,C as Lr,f as Or,g as Hr,A as $r,h as Wr,i as Is,j as _r,D as Jn,k as Vr,I as qr,l as An,m as Bn,n as Le,R as Gr,o as Ur,p as Kr}from"./svg-icon-CDt6B9Bz.js";function Tn(n){return new _e(Math.max(0,Math.ceil((n-.5)/100*8.5*60)))}function cn(n){return new _e(Math.min(510,Math.ceil((n+1-.5)/100*8.5*60)-1))}function Ke(n,s){const t=nn(n,s,100),l=me[s.fieldIndex].powers,r={firstSleep:t,secondSleep:null,nextStrength:null};if(!s.secondSleep||!t.canGet||t.tooMuch||t.minScore===100)return r;const o=(100-t.minScore)*s.strength*s.bonus,c=es(l,o),d=nn(c,s,100-t.minScore);r.firstSleep.maxScore=Math.min(t.maxScore,100-d.minScore),r.firstSleep.maxTime=cn(r.firstSleep.maxScore),r.firstSleep.maxPower=r.firstSleep.maxScore*s.strength*s.bonus;let u=null;if(d.count<8){const x=d.count+1;u=nn(x,s,100-t.minScore).requiredStrength}return{firstSleep:t,secondSleep:d,nextStrength:u}}function nn(n,s,t){const l=s.strength*s.bonus,r=me[s.fieldIndex].powers,o=r[n-3],i=Math.ceil(o/s.bonus/t),c=Math.max(1,Math.ceil(o/l)),d=c<=t;let u=t;if(!(n===8)){const m=r[n-2];u=Math.max(0,Math.ceil(m/l)-1),u=Math.min(t,u)}return{count:n,power:o,canGet:d,tooMuch:u===0,requiredStrength:i,minScore:c,minTime:Tn(c),minPower:c*l,maxScore:u,maxTime:cn(u),maxPower:u*l}}const en=5,Xr=10,Jr=15,ws=16;class Yr{start;score;constructor(s){this.start=new Date(s.start*1e3),this.score=s.score}calculateStage(){const s=this._calculateStageImpl(),t=s[s.length-1];return s.push({type:"finish",start:t.end,startMinute:t.endMinute,end:new Date(864e13),endMinute:Number.MAX_VALUE}),s}_calculateStageImpl(){const s=gn(this.score),t=s+en,l=this.getDateFromMinute(en),r=[];let o=this.start,i=0,c=en,d=l;return r.push({type:"init",start:o,startMinute:i,end:d,endMinute:c}),i=c,o=d,c+=Math.min(s,Xr),d=this.getDateFromMinute(c),r.push({type:"init2",start:o,startMinute:i,end:d,endMinute:c}),i=c,o=d,this.score<3?(c=i+ws,d=this.getDateFromMinute(c),r.push({type:"aborting",start:o,startMinute:i,end:d,endMinute:c}),i=c,o=d,c=90,d=this.getDateFromMinute(c),r.push({type:"aborted",start:o,startMinute:i,end:d,endMinute:c}),r):this.score<=16?(c=gn(this.score)+en,d=this.getDateFromMinute(c),r.push({type:"normal",start:o,startMinute:i,end:d,endMinute:c}),i=c,o=d,c=Math.min(90,c+ws),d=this.getDateFromMinute(c),r.push({type:"aborting",start:o,startMinute:i,end:d,endMinute:c}),i=c,o=d,c<90&&(c=90,d=this.getDateFromMinute(c),r.push({type:"aborted",start:o,startMinute:i,end:d,endMinute:c})),r):(c=t-Jr,d=this.getDateFromMinute(c),r.push({type:"normal",start:o,startMinute:i,end:d,endMinute:c}),i=c,o=d,c=t,d=this.getDateFromMinute(c),r.push({type:"finalizing",start:o,startMinute:i,end:d,endMinute:c}),r)}getDateFromMinute(s){return new Date(this.start.getTime()+s*60*1e3)}}function gn(n){const s=Tn(n),t=cn(n),l=s.h*60+s.m,r=t.h*60+t.m+1;return(l+r)/2}function Bs(n,s,t){const r=Math.max(90,gn(s)+5),o=new Date(n.getTime()+r*60*1e3),i=pn(n,t),c=pn(o,t);return[i,c]}function pn(n,s){return Intl.DateTimeFormat(s,{hour:"numeric",minute:"numeric"}).format(n)}const Nn=a.memo(({type:n,number:s})=>e.jsxs(Qr,{children:[e.jsx("span",{className:"rank_ball rank_ball_"+n,children:"◓"}),e.jsx("span",{className:"rank_number",children:s})]})),Qr=S("span")({"& .rank_ball_basic":{color:"#ff0000"},"& .rank_ball_great":{color:"#0000ff"},"& .rank_ball_ultra":{color:"#000000"},"& .rank_ball_master":{color:"#cc00cc"},"& .rank_number":{paddingLeft:".2em"}}),on=a.memo(({score:n})=>{const s=n,t=`radial-gradient(#ffffff 50%, transparent 51%), conic-gradient(#489eff 0% ${s}%, #dddddd ${s+1}% 100%)`;return e.jsx(Zr,{style:{backgroundImage:t},children:n})}),Zr=S("div")({display:"flex",justifyContent:"center",alignItems:"center",width:"2.4rem",height:"2.4rem",fontSize:".7rem",fontWeight:700,borderRadius:"50%",color:"#489eff",backgroundImage:"radial-gradient(#ffffff 50%, transparent 51%), conic-gradient(#489eff 0% 0%, #dddddd 1% 100%)"}),el=a.memo(({open:n,onClose:s,bonus:t,strength:l})=>{const{t:r}=B(),o=a.useRef(null),i=a.useRef(null),c=a.useRef(null),d=a.useRef(null),u=a.useRef(null),x=a.useCallback((m,g)=>{if(g===null)return;let b=null;switch(g){case 0:b=o?.current;break;case 25:b=i?.current;break;case 50:b=c?.current;break;case 75:b=d?.current;break;case 100:b=u?.current;break}b!==null&&b.scrollIntoView({behavior:"smooth",block:"start"})},[]);if(!n)return e.jsx(e.Fragment,{});const h=[];for(let m=0;m<=100;m++)h.push(e.jsxs("div",{className:"sleep_time",ref:m===0?o:m===25?i:m===50?c:m===75?d:m===100?u:null,children:[e.jsx(on,{score:m}),e.jsxs("div",{className:"time",children:[Tn(m).toString(r),e.jsxs(e.Fragment,{children:[" ",r("range separator")," "]}),cn(m).toString(r),e.jsx("div",{className:"time_power",children:r("num",{n:m*l*t})})]})]},m));return e.jsxs(nl,{open:n,onClose:s,scroll:"paper",children:[e.jsx(ae,{children:r("sleep score table")}),e.jsx("div",{className:"sleep_score_table",children:h}),e.jsx("div",{className:"form",children:e.jsxs(X,{onChange:x,exclusive:!0,children:[e.jsx(R,{value:0,children:"0"}),e.jsx(R,{value:25,children:"25"}),e.jsx(R,{value:50,children:"50"}),e.jsx(R,{value:75,children:"75"}),e.jsx(R,{value:100,children:"100"})]})}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:r("close")})})]})}),nl=S(G)({"& div.form":{margin:".4rem 1.2rem 0 1.2rem","& > div > button":{width:"3rem"}},"& div.sleep_score_table":{overflow:"scroll",padding:"0 1rem","& > div.sleep_time":{margin:".4rem 0",display:"flex",alignItems:"flex-start","& > div.time":{fontSize:".9rem",fontWeight:700,marginLeft:".3rem",marginTop:0,"& > div.time_power":{color:"#aaaaaa",fontSize:".8rem",fontWeight:500,marginTop:"-.2rem"}}}}}),fn=a.memo(({count:n})=>e.jsxs(sl,{children:[e.jsx("span",{className:"ball",children:"◓"}),e.jsx("span",{className:"multiply",children:"×"}),e.jsx("span",{className:"value",children:n})]})),sl=S("div")({"& > span.ball":{color:"#ff6347"},"& > span.multiply":{color:"#666"},"& > span.value":{color:"#e6a83a",fontSize:"1.16em"}}),us=a.memo(({message:n,open:s,onClose:t})=>{const{t:l}=B();return s?e.jsxs(G,{open:s,onClose:t,children:[e.jsx(J,{style:{paddingBottom:0},children:n}),e.jsx(W,{children:e.jsx(M,{onClick:t,autoFocus:!0,children:l("close")})})]}):e.jsx(e.Fragment,{})}),tl=S("button")({width:"1.3rem",height:"1.3rem",background:"white",fontSize:".8rem",borderRadius:"50%",padding:0,border:"1px solid #999",color:"#000",cursor:"pointer",flexShrink:0,position:"relative","&:hover":{background:"#f0f0ee"},"&:disabled":{background:"#eee",border:"1px solid #ccc"},"&::before":{content:'""',position:"absolute",top:0,left:0,width:"1.3rem",height:"1.3rem",display:"inline-block",borderRadius:"100%",overflow:"hidden",background:"#999999",opacity:0}}),We=a.memo(({disabled:n,label:s,onClick:t})=>{const l=r=>{r.stopPropagation(),r.preventDefault(),r.target.animate([{opacity:.5},{opacity:0,transform:"scale(3, 3)"}],{duration:200,easing:"ease-out",pseudoElement:"::before",iterations:1}),t?.()};return e.jsx(tl,{disabled:n,onClick:l,children:s})}),an=a.memo(({show:n,children:s})=>{const t=a.useRef(null),[l,r]=a.useState(0),[o,i]=a.useState(s),c=a.useRef(!n);a.useEffect(()=>{n&&i(s)},[s,n]),a.useLayoutEffect(()=>{r(t.current?t.current.scrollHeight:0)},[o,n]);const d=As({height:n?l:0,config:{tension:400,friction:40},immediate:!c.current,onRest:()=>{c.current=!0}});return e.jsx(Ps.div,{style:{...d,overflow:"hidden"},children:e.jsx("div",{ref:t,children:o})})}),rl=/iP(hone|od|ad)/.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Mn=a.memo(n=>{const{onChange2:s,...t}=n,l=a.useCallback((r,o)=>{r!==null&&(rl&&r.type==="mousedown"||typeof o=="number"&&s(o))},[s]);return e.jsx(ll,{onChange:l,...t})}),ll=S(_t)({userSelect:"none","& *":{userSelect:"none"}}),il=a.memo(({data:n,open:s,onClose:t,onStart:l})=>{const{t:r,i18n:o}=B(),[i,c]=a.useState(!1),[d,u]=a.useState(100),[x,h]=Bs(new Date,d,o.language),[m,g]=a.useState(x),[b,f]=a.useState(h),j=a.useCallback(()=>{c(!0)},[]),k=a.useCallback(()=>{c(!1)},[]),v=a.useCallback(D=>{const[L,P]=Bs(new Date,D,o.language);m!==L&&g(L),b!==P&&f(P)},[o.language,m,b]),y=a.useCallback(()=>{const D=Math.max(0,d-1);u(D),v(D)},[d,v]),E=a.useCallback(()=>{const D=Math.min(100,d+1);u(D),v(D)},[d,v]),C=a.useCallback(D=>{u(D),v(D)},[v]),F=a.useCallback(D=>{const L=nn(D,n,100);u(L.minScore),v(L.minScore)},[n,v]),A=a.useCallback(()=>{l({score:d,start:Math.floor(new Date().getTime()/1e3),area:n.fieldIndex,strength:n.strength,dp:Math.round(n.strength*n.bonus*d)}),t()},[n,d,l,t]);if(a.useEffect(()=>{if(!s)return;v(d);const D=setInterval(()=>{v(d)},1e3);return()=>{clearInterval(D)}},[s,v,d]),!s)return e.jsx(e.Fragment,{});const T=[];for(let D=4;D<=8;D++){const L=D,P=nn(L,n,100);if(!P.canGet||P.tooMuch)continue;const z=P.minScore<=d&&d<=P.maxScore;T.push(e.jsx(M,{variant:"outlined",className:z?"selected":"",onClick:()=>{F(L)},children:e.jsx(fn,{count:D})},D))}const I=new _e(Math.max(90,gn(d)+en)),N=Math.round(d*n.strength*n.bonus),H=new $e(n.strength,me[n.fieldIndex].ranks),Z=es(me[n.fieldIndex].powers,N);return e.jsxs(e.Fragment,{children:[e.jsxs(ol,{open:s,onClose:t,children:[e.jsxs(J,{children:[e.jsxs("div",{className:"notice",children:[e.jsx("p",{children:r("tracking title")}),e.jsx("label",{children:"❶"}),e.jsxs("div",{children:[r("tracking desc1"),e.jsx(M,{onClick:j,children:r("tracking go plus+ title")})]}),e.jsx("label",{children:"❷"}),e.jsx("div",{children:r("tracking desc2")}),e.jsx("label",{children:"❸"}),e.jsx("div",{children:r("tracking desc3")})]}),e.jsxs("label",{children:[r("sleep score"),":"]}),e.jsxs("header",{children:[e.jsx(on,{score:d}),e.jsxs("div",{className:"slider",children:[e.jsx(We,{label:"◀",disabled:d===1,onClick:y}),e.jsx(Mn,{min:1,max:100,size:"small",style:{userSelect:"none"},value:d,onChange2:C}),e.jsx(We,{label:"▶",disabled:d===100,onClick:E})]}),e.jsx("div",{className:"buttons",children:T})]}),e.jsx(an,{show:d<17,children:e.jsx("section",{className:"warning",children:e.jsx(Y,{i18nKey:"score is too low",components:{score:e.jsx("strong",{children:d})}})})}),e.jsxs("div",{className:"grid",children:[e.jsxs("label",{children:[r("strength2"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:r("num",{n:n.strength})}),e.jsx("br",{}),e.jsxs("small",{children:["(",r(`area.${n.fieldIndex}`)," ",e.jsx(Nn,{type:H.type,number:H.rankNumber}),")"]})]}),e.jsxs("label",{children:[r("drowsy power"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:r("num",{n:N})}),e.jsxs("small",{children:["(",e.jsx(fn,{count:Z}),")"]})]}),e.jsxs("label",{children:[r("time range"),":"]}),e.jsxs("section",{style:{display:"block"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:m}),r("range separator"),e.jsx("strong",{children:b})]}),e.jsxs("small",{style:{display:"block"},children:["(",I.toString(r),")"]})]})]})]}),e.jsxs(W,{children:[e.jsx(M,{onClick:A,variant:"contained",size:"small",children:r("start tracking")}),e.jsx(M,{onClick:t,size:"small",children:r("cancel")})]})]}),e.jsx(us,{open:i,onClose:k,message:e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:r("tracking go plus+ detail.0")}),e.jsx("p",{style:{fontSize:"0.9rem",margin:"0.5rem 0"},children:r("tracking go plus+ detail.1")}),e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:r("tracking go plus+ detail.2")})]})})]})}),ol=S(G)({"& div.MuiDialogContent-root":{minWidth:"250px",paddingBottom:"0.5rem","& > div.notice":{gap:"0.5rem 0.3rem",display:"grid",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem",marginBottom:"1.4rem","& > p":{gridColumn:"1 / -1",fontSize:"0.9rem",margin:"0 0 0.4rem 0",lineHeight:1.2},"& > label":{color:"#24da6d"},"& > div":{fontSize:"0.8rem","& > button":{fontSize:"0.8rem",lineHeight:1.2,padding:0,textTransform:"none",textAlign:"left"}}},"& > label":{fontSize:"0.9rem",marginTop:"1rem",display:"block","&:first-of-type":{marginTop:"0"}},"& > header":{paddingTop:"0.2rem",display:"grid",gridTemplateColumns:"40px 1fr",gap:"0.2rem 0.6rem","& > div:first-of-type":{gridRow:"1 / span 2"},"& > div.slider":{display:"flex",alignItems:"center",gap:".7rem",height:"1.8rem","& .MuiSlider-track":{color:"#489eff",height:".4rem"},"& .MuiSlider-rail":{color:"#cccccc",height:".4rem"},"& .MuiSlider-thumb":{color:"#489eff"}},"& > div.buttons":{gridColumn:"2 / -1","& > button":{minWidth:0,fontSize:"0.8rem",lineHeight:1,padding:"0.2rem 0.2rem",marginRight:"0.2rem",borderColor:"#bbb","&.selected":{background:"#eee"},"& > span":{padding:0}}}},"& > div section.warning":{paddingTop:"0.8rem",paddingLeft:"1.2rem",textIndent:"-1.2rem",fontSize:"0.8rem",color:"#666","&::before":{content:"'\\26a0\\fe0f'"}},"& > div.grid":{marginTop:"1.5rem",gap:"0.8rem 0.7rem",display:"grid",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem",lineHeight:1.3,"& > section":{display:"flex",flexWrap:"wrap",gap:"0 0.4rem",alignItems:"center","& > small":{textWrap:"nowrap","& > div":{display:"inline"}}}}}}),al=a.memo(({okLabel:n,message:s,open:t,onOk:l,onClose:r})=>{const{t:o}=B(),i=a.useCallback(()=>{l(),r()},[l,r]);return t?e.jsxs(G,{open:t,onClose:r,children:[e.jsx(J,{style:{paddingBottom:0},children:s}),e.jsxs(W,{children:[e.jsx(M,{onClick:i,color:"error",children:n}),e.jsx(M,{onClick:r,autoFocus:!0,children:o("cancel")})]})]}):e.jsx(e.Fragment,{})}),cl=a.memo(({data:n,onChange:s})=>{const{t,i18n:l}=B(),[r,o]=a.useState(!1),[i,c]=a.useState(!1),[d,u]=a.useState(!1),[x,h]=a.useState(!1),m=a.useRef([]),[g,b]=a.useState({type:"init",start:new Date,startMinute:0,end:new Date,endMinute:0}),[f,j]=a.useState(0),[k,v]=a.useState(0),y=a.useCallback(()=>{if(n.tracking===void 0||(m.current=new Yr(n.tracking).calculateStage(),m.current.length===0))return;const de=new Date().getTime();let Se=m.current.find(Ue=>Ue.start.getTime()<=de&&de<Ue.end.getTime());Se===void 0&&(Se=m.current[m.current.length-1]),b(Se),j(Se.type==="finish"?0:Math.ceil((m.current[m.current.length-2].end.getTime()-de)/1e3)),v(Se.type==="finish"?0:Math.ceil((Se.end.getTime()-de)/1e3))},[n]);a.useEffect(()=>{if(y(),n.tracking===void 0)return;const de=setInterval(()=>{y()},1e3);return()=>{clearInterval(de)}},[n,y]);const E=a.useCallback(()=>{o(!0)},[o]),C=a.useCallback(()=>{o(!1)},[o]),F=a.useCallback(()=>{c(!0)},[]),A=a.useCallback(()=>{c(!1)},[]),T=a.useCallback(de=>{s({tracking:de})},[s]),I=a.useCallback(()=>{s({tracking:void 0})},[s]),N=a.useCallback(()=>{u(!0)},[]),H=a.useCallback(()=>{u(!1)},[]),Z=a.useCallback(()=>{h(!0)},[]),D=a.useCallback(()=>{h(!1)},[]),L=m.current.length===0?"":pn(m.current[0].start,l.language),P=m.current.length===0?"":pn(m.current[m.current.length-2].end,l.language),z=n.tracking!==void 0&&g.type==="finish",O=n.tracking?.strength??0,U=n.tracking?.dp??0,Q=n?.tracking?.area??0,_=me[Q],V=new $e(O,_.ranks),be=es(me[n.fieldIndex].powers,U);return e.jsxs(dl,{children:[e.jsx(an,{show:n.tracking!==void 0,children:e.jsxs("section",{children:[e.jsxs("article",{className:g.type,children:[z?e.jsx(fe,{fontSize:"large"}):e.jsx(Vt,{size:30}),e.jsxs("header",{children:[e.jsx("h2",{children:t(z?"tracked":"tracking")}),e.jsxs("h3",{children:[e.jsx("strong",{children:L}),t("range separator"),e.jsx("strong",{children:P}),!z&&e.jsxs("span",{className:"remain",children:["(",t("remaining time",{time:Ts(f,t)}),")"]})]}),e.jsxs("article",{children:[e.jsxs("label",{children:[t("strength"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:t("num",{n:n.tracking?.strength??0})}),e.jsxs("small",{children:["(",t(`area.${Q}`)," ",e.jsx(Nn,{type:V.type,number:V.rankNumber}),")"]})]}),e.jsxs("label",{children:[t("sleep score"),":"]}),e.jsx("section",{children:e.jsx("strong",{children:n.tracking?.score??0})}),e.jsxs("label",{children:[t("drowsy power"),":"]}),e.jsxs("section",{children:[e.jsx("strong",{children:t("num",{n:U})}),e.jsxs("small",{children:["(",e.jsx(fn,{count:be}),")"]})]})]})]})]}),e.jsx("footer",{children:e.jsx(Y,{i18nKey:`sleep state.${g.type}`,components:{time:e.jsx("strong",{children:Ts(k,t)}),score:e.jsx("strong",{children:n.tracking?.score??0}),detail:e.jsxs(M,{onClick:Z,children:["[",t("details"),"]"]}),br:e.jsx("br",{})}})})]})}),e.jsxs("div",{className:"buttons",children:[e.jsx(M,{startIcon:e.jsx(qt,{}),onClick:E,children:t("sleep score table")}),z&&e.jsx(M,{startIcon:e.jsx(vs,{}),onClick:I,children:t("reset")}),!z&&n.tracking&&e.jsx(M,{startIcon:e.jsx(vs,{}),onClick:N,color:"error",children:t("abort tracking")}),!z&&!n.tracking&&e.jsx(M,{startIcon:e.jsx(Gt,{}),onClick:F,children:t("start tracking")})]}),e.jsx(el,{open:r,onClose:C,bonus:n.bonus,strength:n.strength}),e.jsx(il,{open:i,data:n,onClose:A,onStart:T}),e.jsx(al,{open:d,onClose:H,onOk:I,okLabel:t("ok"),message:t("confirm abort")}),e.jsx(us,{open:x,onClose:D,message:e.jsxs(ul,{children:[e.jsx("h1",{children:t("aim sleep type")}),e.jsxs("dl",{children:[e.jsx("dt",{className:"dozing",children:t("dozing")}),e.jsx("dd",{children:t("aim dozing")}),e.jsx("dt",{className:"snoozing",children:t("snoozing")}),e.jsx("dd",{children:t("aim snoozing")}),e.jsx("dt",{className:"slumbering",children:t("slumbering")}),e.jsx("dd",{children:t("aim slumbering")})]})]})})]})});function Ts(n,s){return n>=3600?s("hhmm_short",{h:Math.floor(n/3600),m:Math.floor(n/60%60)}):n>=60?s("mmss_short",{m:Math.floor(n/60),s:Math.floor(n%60)}):s("ss_short",{s:Math.floor(n%60)})}const dl=S("div")({"& > div.buttons":{textAlign:"right","& > button":{textTransform:"none","& > span.MuiButton-icon":{marginRight:2}}},"& > div > div > section":{border:"1px solid #aaa",background:"#f3f3f3",borderRadius:12,padding:"0.5rem","& > article":{display:"grid",gridTemplateColumns:"max-content 1fr",gap:"0.5rem","& > header > h2":{color:"#1976d2"},"&.finish":{"& > svg":{color:"#24d76a"},"& > header > h2":{color:"#24d76a"}},"& > header":{"& > h2":{margin:0,fontSize:"1.2rem"},"& > h3":{margin:0,fontWeight:400,fontSize:"0.9rem","& > span":{paddingLeft:"0.5rem",fontSize:"0.8rem"}},"& > article":{margin:"0.8rem 0 0 0",fontWeight:400,fontSize:"0.9rem",display:"grid",gridTemplateColumns:"max-content 1fr",gap:"0.3rem 0.5rem","& > section":{display:"flex",flexWrap:"wrap",gap:"0 0.4rem",alignItems:"center","& > small":{textWrap:"nowrap","& > div":{display:"inline"}}}}}},"& > footer":{marginTop:".8rem",fontSize:"0.8rem",color:"#777","& > button":{padding:"0 0 0 0.2rem",fontSize:"0.8rem",minWidth:0}}}}),ul=S("div")({"& > h1":{fontSize:"1.2rem",padding:0,margin:0},"& > dl":{margin:"0.8rem 0 0 0",fontSize:"0.9rem","& > dt":{marginTop:"0.8rem",padding:"0.1rem 0.4rem",borderRadius:5,display:"inline","&.dozing":{backgroundColor:"#fdec6e",color:"#862"},"&.snoozing":{backgroundColor:"#85fbff",color:"#226"},"&.slumbering":{backgroundColor:"#5592fc",color:"#fff"}},"& > dd":{fontSize:"0.8rem",display:"block",padding:"0.3rem 0 1rem",margin:0,"&:last-of-type":{paddingBottom:0}}}}),qe=a.memo(({anchorEl:n,children:s,open:t,onClose:l})=>{const r=a.useCallback(o=>{n?.contains(o.target)||o.target!==n&&l()},[n,l]);return e.jsx(is,{open:t,anchorEl:n,placement:"bottom-start",style:{zIndex:2147483647,maxWidth:"95vw"},children:e.jsx(qs,{elevation:10,children:e.jsx(Ut,{onClickAway:r,children:s})})})}),ml=window.matchMedia("(any-pointer: fine)").matches,ms=a.memo(a.forwardRef(({min:n,max:s,value:t,onChange:l,children:r,...o},i)=>ml?e.jsx(xl,{ref:i,min:n,max:s,value:t,onChange:l,children:r,...o}):e.jsx(hl,{ref:i,min:n,max:s,value:t,onChange:l,children:r,...o}))),xl=a.memo(a.forwardRef(({children:n,min:s,max:t,value:l,onChange:r,...o},i)=>{const[c,d]=a.useState(!1),[u,x]=a.useState(!1),[h,m]=a.useState(l.toString()),g=a.useRef(null),b=s??0,f=t??Number.MAX_SAFE_INTEGER,j=n!==void 0,k=a.useCallback(A=>{const T=A.target.value.replace(/,/g,"");if(m(T),T===""){r(Math.max(0,b));return}const I=parseInt(T,10);if(isNaN(I))return;const N=Math.min(Math.max(I,b),f);r(N)},[b,f,r]),v=a.useCallback(()=>{x(!0),n!==void 0&&d(!0),m(l.toString())},[n,l]),y=a.useCallback(()=>{x(!1),d(!1)},[]),E=a.useCallback(()=>{j||y()},[y,j]),C=a.useCallback(A=>{A.key==="Tab"&&c&&y()},[y,c]);a.useEffect(()=>{m(l.toString())},[l]),a.useImperativeHandle(i,()=>({close:y}),[y]);const F=u?h:q(l);return e.jsxs("div",{className:"numeric keyboard",children:[e.jsx(Gs,{...o,type:"tel",inputProps:{inputMode:"numeric"},value:F,ref:g,onChange:k,onFocus:v,onBlur:E,onKeyDown:C}),e.jsx(qe,{open:c,anchorEl:g.current,onClose:y,children:e.jsx("div",{children:n})})]})})),hl=a.memo(a.forwardRef(({children:n,min:s,max:t,value:l,onChange:r,...o},i)=>{const[c,d]=a.useState(!1),[u,x]=a.useState(!1),[h,m]=a.useState(0),g=a.useRef(null),b=a.useRef(null),[f,j]=a.useState({}),[k,v]=a.useState({x:0,y:0}),y=s??0,E=t??Number.MAX_SAFE_INTEGER,C=a.useRef(l),F=a.useRef(h),A=a.useRef(u);a.useEffect(()=>{C.current=l,F.current=h,A.current=u},[l,h,u]),a.useEffect(()=>{if(!g.current)return;const z=g.current.querySelector("input");if(!z)return;const O=window.getComputedStyle(z),U=g.current.getBoundingClientRect(),Q=z.getBoundingClientRect();j({fontSize:O.fontSize,fontFamily:O.fontFamily,fontWeight:O.fontWeight,fontStyle:O.fontStyle,letterSpacing:O.letterSpacing,lineHeight:O.lineHeight,width:O.width,height:parseFloat(O.height??"10")-2,padding:O.padding,boxSizing:O.boxSizing,transform:O.transform,top:Q.top-U.top,left:Q.left-U.left})},[]),a.useEffect(()=>{if(!(c&&b.current))return;const z=b.current.firstChild;if(z===null||z.nodeType!==Node.TEXT_NODE){v({x:0,y:0});return}const O=document.createRange(),U=u?"":q(l),Q=St(l,h),_=Math.min(Q,U.length);O.setStart(z,_),O.setEnd(z,_);const V=O.getBoundingClientRect(),be=b.current.getBoundingClientRect();v({x:V.left-be.left,y:V.top-be.top})},[c,h,l,u]);const T=a.useCallback(z=>{x(!1);const O=q(l);if(!(c&&b.current)){m(O.length),d(!0);return}const U=b.current.firstChild;if(U===null||U.nodeType!==Node.TEXT_NODE){m(O.length),d(!0);return}const Q=z.clientX,_=document.createRange();let V=O.length,be=1/0;for(let de=0;de<=O.length;de++){_.setStart(U,0),_.setEnd(U,de);const Se=_.getBoundingClientRect(),Ue=Math.abs(Q-Se.right);Ue<be&&(be=Ue,V=O.substring(0,de).replace(/,/g,"").length)}m(V),d(!0)},[c,l]),I=a.useCallback(()=>{x(!1),d(!1)},[]);a.useImperativeHandle(i,()=>({close:I}),[I]);const N=a.useCallback(z=>{x(!1);const O=A.current?"0":C.current.toString(),U=F.current,Q=z.toString();let _;O==="0"?(_=Q,m(1)):(_=O.slice(0,U)+Q+O.slice(U),m(U+1));let V=parseInt(_,10);isNaN(V)||(V=Math.max(y,Math.min(V,E)),r(V),V===E&&m(V.toString().length))},[E,y,r]),H=a.useCallback(()=>{const z=F.current;if(z===0)return;const O=C.current.toString(),U=A.current;if(O.length<=1||U)x(!0),r(Math.max(0,y)),m(0);else{const Q=O.slice(0,z-1)+O.slice(z),_=parseInt(Q,10);isNaN(_)||(r(Math.max(_,y)),m(z-1))}},[y,r]),Z=a.useCallback(()=>{x(!0),r(Math.max(0,y)),m(0)},[y,r]),D=a.useCallback(z=>{const O=A.current?0:C.current.toString().length,U=F.current;m(Math.max(0,Math.min(O,U+z)))},[]),L=a.useCallback(z=>{if(z.key>="0"&&z.key<="9"){z.preventDefault(),N(parseInt(z.key,10));return}if(z.key==="Backspace"){z.preventDefault(),H();return}if(z.key==="Delete"){z.preventDefault();const O=F.current,U=C.current.toString(),Q=A.current;if(O>=U.length)return;if(U.length===1||Q)x(!0),r(Math.max(0,y)),m(0);else{const _=U.slice(0,O)+U.slice(O+1),V=parseInt(_,10);isNaN(V)||r(Math.max(V,y))}return}if(z.key==="ArrowLeft"){z.preventDefault(),D(-1);return}if(z.key==="ArrowRight"){z.preventDefault(),D(1);return}if(z.key==="Home"){z.preventDefault(),m(0);return}if(z.key==="End"){z.preventDefault();const O=A.current?0:C.current.toString().length;m(O);return}if(z.key==="Enter"||z.key==="Escape"){z.preventDefault(),I();return}},[N,H,D,I,y,r,x,m]),P=u?" ":q(l);return e.jsxs(e.Fragment,{children:[e.jsxs(gl,{className:"numeric touch",children:[e.jsx(pl,{...o,ref:g,readOnly:!0,className:`${o.className??""} ${c?"focused":""}`,onClick:T,onKeyDown:L,inputProps:{inputMode:"none"},value:P}),e.jsx(jl,{ref:b,style:f,children:P}),c&&e.jsx(e.Fragment,{children:e.jsx(bl,{style:{...f,left:(f.left??0)+k.x,top:(f.top??0)+k.y,width:"2px",padding:0}})})]}),e.jsx(qe,{open:c,anchorEl:g.current,onClose:I,children:e.jsxs("div",{children:[n&&e.jsxs(e.Fragment,{children:[n,e.jsx(Ne,{})]}),e.jsxs(fl,{children:[e.jsx(K,{onClick:()=>N(1),children:"1"}),e.jsx(K,{onClick:()=>N(2),children:"2"}),e.jsx(K,{onClick:()=>N(3),children:"3"}),e.jsx(K,{className:"func",onClick:H,children:e.jsx(Kt,{})}),e.jsx(K,{onClick:()=>N(4),children:"4"}),e.jsx(K,{onClick:()=>N(5),children:"5"}),e.jsx(K,{onClick:()=>N(6),children:"6"}),e.jsx(K,{className:"close",onClick:Z,children:e.jsx(Us,{})}),e.jsx(K,{onClick:()=>N(7),children:"7"}),e.jsx(K,{onClick:()=>N(8),children:"8"}),e.jsx(K,{onClick:()=>N(9),children:"9"}),e.jsx(K,{className:"ok",onClick:I,children:e.jsx(Xt,{})}),e.jsx(K,{className:"nav",onClick:()=>D(-1),children:e.jsx(Jt,{})}),e.jsx(K,{onClick:()=>N(0),children:"0"}),e.jsx(K,{className:"nav",onClick:()=>D(1),children:e.jsx(Yt,{})})]})]})})]})})),gl=S("div")({position:"relative",display:"inline"}),pl=S(Gs)({"&.focused:after":{transform:"scaleX(1)"}}),fl=S("div")({display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",padding:"0.6rem",gap:"0.4rem","& > button":{width:"4.3rem",height:"3rem",borderRadius:"1rem",touchAction:"manipulation",fontFamily:"inherit","&, &:hover, &:focus, &:active":{background:"#ddd"}},"& > .close":{color:"#fff","&, &:hover, &:focus, &:active":{background:"#d32f2f"}},"& > .func":{color:"#fff","&, &:hover, &:focus, &:active":{background:"#ff944b"}},"& > .nav":{color:"#fff","&, &:hover, &:focus, &:active":{background:"#c6e55e"}},"& > .ok":{"&, &:hover, &:focus, &:active":{background:"#1976d2"},color:"#fff",gridRow:"3 / span 2",gridColumn:"4",height:"6.4rem",borderRadius:"1rem"}}),jl=S("span")({position:"absolute",pointerEvents:"none",visibility:"hidden",whiteSpace:"pre"}),bl=S("span")({position:"absolute",width:"2px",backgroundColor:"#1976d2",pointerEvents:"none",animation:"blink 1s step-end infinite","@keyframes blink":{"0%, 70%":{opacity:1},"75%, 95%":{opacity:0}}}),kl=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=a.useCallback(i=>{s(parseInt(i.target.value,10))},[s]),r=[],o=[...me];for(const i of o)i.powers.length!==0&&r.push(e.jsxs(p,{value:i.index,children:[e.jsx("span",{className:"field_icon",children:i.emoji}),t(`area.${i.index}`)]},i.index));return e.jsx(ce,{variant:"standard",size:"small",select:!0,value:n,onChange:l,slotProps:{select:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}}},children:r})});function yl({data:n,onChange:s}){const{t}=B(),l=me[n.fieldIndex],r=n.strength,o=new $e(r,l.ranks),i=w.useCallback(j=>{if(j<0||j>=l.ranks.length)return;const k=l.ranks[j];s?.({strength:k})},[l.ranks,s]),c=w.useCallback(j=>{i(j===-1?o.index-1:o.index+1)},[i,o.index]),d=w.useCallback(j=>{i(j)},[i]),u=w.useCallback(()=>{c(-1)},[c]),x=w.useCallback(()=>{c(1)},[c]),h=w.useCallback(j=>{s?.({fieldIndex:j})},[s]),m=w.useCallback(j=>{s?.({strength:j})},[s]);function g(j){const k=Math.min(j,o.nextStrength-1);s?.({...n,strength:k})}const b=a.useCallback(j=>{s?.({bonus:j})},[s]),f=w.useCallback(j=>{const k=j.target.checked;s?.({secondSleep:k})},[s]);return e.jsxs(e.Fragment,{children:[e.jsxs(vl,{children:[e.jsxs("div",{children:[t("research area"),":"]}),e.jsx("div",{children:e.jsx(kl,{value:n.fieldIndex,onChange:h})}),e.jsxs("div",{children:[t("strength"),":"]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr"},children:[e.jsx(Cl,{field:l,value:o.index,onChange:d}),e.jsx(Bl,{max:Ot,value:r,onChange:m})]}),e.jsxs("div",{className:"strength_second_line",children:[e.jsx(We,{disabled:o.index===0,label:"◀",onClick:u}),e.jsx(Mn,{className:"strength_progress",size:"small",onChange2:g,min:o.thisStrength,max:o.nextStrength,value:r}),e.jsx(We,{disabled:o.rankNumber===20,label:"▶",onClick:x})]})]}),e.jsxs("div",{children:[t("bonus"),":"]}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Nl,{value:n.bonus,onChange:b})}),e.jsx(Ml,{value:n.secondSleep,onChange:f})]})]}),e.jsx(cl,{data:n,onChange:s})]})}const vl=S("div")({marginTop:".8rem",display:"grid",gap:"0.8rem 1.2rem",gridTemplateColumns:"fit-content(200px) 1fr",'& form.main div[role="combobox"]':{paddingBottom:"2px"},"& span.field_icon":{paddingRight:".2rem"},"& div.strength_second_line":{display:"flex",alignItems:"center",marginTop:".2rem",userSelect:"none"},"& .MuiInput-input:focus":{background:"inherit"},"& span.strength_progress":{width:"calc(100% - 4rem)",margin:"0 1rem","& .MuiSlider-track":{color:"#f7ac33",height:".5rem"},"& .MuiSlider-rail":{color:"#999999",height:".5rem"},"& .MuiSlider-thumb":{color:"#f7ac33",width:".9rem",height:".9rem","&::after":{width:"1rem",height:"1rem"},"&.Mui-active, &:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 6px rgba(235,219,102,0.4)"}}}}),Cl=a.memo(({value:n,onChange:s,field:t})=>{const{t:l}=B(),r=a.useCallback(i=>{const c=parseInt(i.target.value,10);s(c)},[s]),o=[];for(let i=0;i<35;i++){const c=n===i,d=$e.rankIndexToType(i),u=$e.rankIndexToRankNumber(i),x=t.ranks[i];o.push(e.jsxs(Il,{value:i,dense:!0,selected:c,children:[e.jsx(Nn,{type:d,number:u}),e.jsxs("span",{className:"strength",children:[l("num",{n:x}),l("range separator")]})]},i))}return e.jsx(Sl,{className:"rank",variant:"standard",size:"small",select:!0,value:n,SelectProps:{MenuProps:{sx:{height:"400px"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}},onChange:r,children:o})}),Sl=S(ce)({width:"4rem",marginRight:"1rem","& span.strength":{display:"none"}}),Il=S(p)({"& > span.strength":{paddingLeft:"1.2rem",color:"#999",fontSize:".9rem",fontWeight:"normal"}}),wl=e.jsx(rn,{position:"start",sx:{color:"#ff944b"},children:e.jsx(le,{})}),Bl=a.memo(({max:n,value:s,onChange:t})=>e.jsx(Tl,{size:"small",max:n,value:s,onChange:t,startAdornment:wl})),Tl=S(ms)({width:"100%","& input":{fontWeight:800,fontSize:"1rem",paddingBottom:"2px"}}),Nl=a.memo(({value:n,onChange:s})=>{const{t}=B(),[l,r]=w.useState(ks(new Date));a.useEffect(()=>{const u=setInterval(function(){r(ks(new Date))},5e3);return()=>clearInterval(u)},[]);const o=a.useCallback(u=>{s(parseFloat(u.target.value))},[s]),i=a.useCallback(()=>{s(l)},[s,l]),c=l!==n,d=l===1?t("none"):`×${l}`;return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{variant:"standard",size:"small",select:!0,value:n,onChange:o,children:[e.jsx(p,{value:1,dense:!0,children:t("none")},"1"),e.jsx(p,{value:1.5,dense:!0,children:"×1.5"},"1.5"),e.jsx(p,{value:2,dense:!0,children:"×2"},"2"),e.jsx(p,{value:2.5,dense:!0,children:"×2.5"},"2.5"),e.jsx(p,{value:3,dense:!0,children:"×3"},"3"),e.jsx(p,{value:4,dense:!0,children:"×4"},"4")]}),e.jsx(oe,{in:c,style:{paddingTop:"0.2rem"},children:e.jsxs(M,{onClick:i,sx:{padding:"0 0 0 1rem",margin:0,fontSize:"0.8rem",textIndent:"-1rem",textTransform:"none",lineHeight:1.2,textAlign:"left"},children:["⚠️",t("bonus not match",{bonus:d})]})})]})}),Ml=a.memo(({value:n,onChange:s})=>{const{t}=B();return e.jsx(hn,{control:e.jsx(Ks,{checked:n,onChange:s}),label:t("sleep twice")})}),El=a.memo(({fieldIndex:n})=>{const{t:s}=B(),t=n>7;return e.jsx(oe,{in:t,children:e.jsxs(Fl,{children:[e.jsx(Ve,{}),e.jsx("div",{children:s("border is not fixed")})]})})}),Fl=S("div")({background:"#e5f6fd",borderRadius:".5rem",padding:"0.4rem",color:"#014343",display:"grid",gridTemplateColumns:"22px 1fr","& > svg":{color:"#0288d1",width:"18px",height:"18px",paddingTop:"2px"},"& > div":{fontSize:"0.8rem",color:"#014480","& > button":{padding:"0 0 0 0.3rem",minWidth:0,fontSize:"0.8rem"}}});function zl({open:n,onClose:s,data:t}){const{t:l}=B();if(!n)return e.jsx(e.Fragment,{});const r=[];for(let o=0;o<2;o++){const i=[t.first,t.second][o],c=Tn(i.score).toString(l),d=cn(i.score).toString(l);r.push(e.jsxs("div",{className:"better_preview",children:[e.jsx("div",{className:"ball",children:"◓"}),e.jsx("span",{className:"ball_value",children:i.count}),e.jsx("span",{className:"strength",children:e.jsx(le,{})}),e.jsxs("span",{className:"strength_value",children:[l("num",{n:i.strength}),o===1&&" "+l("range separator")]}),e.jsx(on,{score:i.score}),e.jsxs("span",{className:"time_value",children:[e.jsx("span",{children:c}),e.jsxs("span",{children:[" ",l("range separator")," "]}),o===0&&e.jsx("span",{children:d})]})]},o))}return e.jsxs(G,{open:n,onClose:s,children:[e.jsxs(Rl,{dividers:!0,className:"better_dialog",children:[e.jsx(Y,{i18nKey:"next strength to get 1 more pokemon",components:{count2:e.jsx("strong",{children:t.second.count}),score1:e.jsx("strong",{children:t.first.score}),strength2:e.jsx("strong",{children:l("num",{n:t.second.strength-t.first.strength})})}}),e.jsx("h3",{children:l("first sleep")}),e.jsx("div",{children:r[0]}),e.jsx("h3",{children:l("second sleep")}),e.jsx("div",{children:r[1]})]}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:l("close")})})]})}const Rl=S(J)({"& > h3":{marginBottom:".2rem",fontSize:"1.1rem"},"& div.better_preview":{padding:"0 .5rem",display:"grid",gridTemplateColumns:"2.5rem auto",gap:".5rem .3rem",alignItems:"center","& > div.ball":{color:"#ff6347",textAlign:"center",alignItems:"center",fontSize:"1.3rem"},"& > span.ball_value":{fontSize:"1.3rem"},"& > span.strength":{color:"#ff944b",textAlign:"center","& > svg":{transform:"scale(1.2)"}},"& > span.strength_value":{fontSize:"1.2rem"}}});function Xe(n){const{t:s}=B(),t=n.ranges,l=t.firstSleep,r=Ns(l,n.data,s);if(!l.canGet||l.tooMuch)return e.jsx(Pn,{children:e.jsx("div",{className:"preview_warning",children:r})});if(t.secondSleep==null)return e.jsx(Pn,{children:e.jsx("div",{className:"preview_grid",children:r})});const o=Ns(t.secondSleep,n.data,s),i=l.count+t.secondSleep.count;let c=null;if(t.nextStrength!==null){const d=t.secondSleep.count+1,u=t.nextStrength-n.data.strength,x=function(){const h={first:{count:t.firstSleep.count,score:t.firstSleep.minScore,strength:n.data.strength},second:{count:d,score:100-t.firstSleep.minScore,strength:n.data.strength+u}};n.onSecondSleepDetailClick(h)};c=e.jsxs("div",{className:"meet1more",children:[e.jsx(Ve,{}),e.jsxs("div",{children:[e.jsx(Y,{i18nKey:"next strength to get 1 more pokemon",components:{score1:e.jsx("strong",{children:t.firstSleep.minScore}),count2:e.jsx("strong",{children:d}),strength2:e.jsx("strong",{children:s("num",{n:u})})}}),e.jsxs(M,{onClick:x,children:["[",s("details"),"]"]})]})]})}return e.jsxs(Pn,{children:[e.jsx("div",{className:"sum-tooltip",children:e.jsx(Y,{i18nKey:"total n pokemon",components:{n:e.jsx("strong",{children:i})}})}),e.jsxs("div",{className:"preview_grid",children:[r,o]}),c]})}const Pn=S("div")({padding:".7rem 0",borderBottom:"3px dotted #ddd","& > .preview_grid":{display:"grid",width:"100%",gridTemplateColumns:"4.5rem max-content 1.5rem max-content",rowGap:".5rem"},"& > div > .count_box":{width:"5rem",fontSize:"1.2rem"},"& > .preview_warning":{display:"grid",width:"100%",gridTemplateColumns:"4.5rem 1fr"},"& div.power":{color:"#aaaaaa",fontSize:".7rem",marginTop:"-.2rem",whiteSpace:"nowrap"},"& div.start, div.end":{paddingTop:".3rem","& > div.sleep_time":{display:"flex",alignItems:"flex-start","& > div.time":{fontSize:".9rem",fontWeight:700,marginLeft:".3rem",marginTop:"0rem","& > div.time_power":{color:"#aaaaaa",fontSize:".8rem",fontWeight:500,marginTop:"-.2rem"}}}},"& div.score_separator":{padding:".3rem .2rem",textAlign:"center"},"& > .sum-tooltip":{display:"inline-block",position:"relative",border:"3px solid #ffffff",backgroundColor:"#f7ac33",color:"white",fontSize:".9rem",borderRadius:".5rem",padding:".1rem .5rem",boxShadow:"0 0 .1rem #999",marginBottom:".2rem","&::before":{content:"''",position:"absolute",display:"block",width:"0px",left:"50%",bottom:0,border:"10px solid transparent",borderBottom:0,borderTop:"10px solid #f7ac33",transform:"translate(-50%, calc(100% - .1rem))"},"& > strong":{fontSize:"1rem",fontWeight:700}},"& div.meet1more":{color:"#888",fontSize:".95rem",marginTop:".8rem",display:"flex",gap:".5rem","& > svg":{color:"#bbb",paddingTop:".2rem"},"& strong":{fontSize:"1rem"},"& button":{padding:0,minWidth:"2rem"}},"& div.warning":{paddingLeft:"2.2rem",textIndent:"-1.2rem",color:"#666","&::before":{content:"'\\26a0\\fe0f'"}}});function Ns(n,s,t){const l=e.jsxs("div",{className:"count_box",children:[e.jsx(fn,{count:n.count}),e.jsx("div",{className:"power",children:e.jsxs("span",{children:[t("num",{n:n.power}),t("range separator")]})})]});if(!n.canGet||n.tooMuch){let r;if(n.canGet)r=e.jsx("span",{children:t("strength too much")});else{const o=me[s.fieldIndex].ranks,i=new $e(n.requiredStrength,o),c=Math.floor((n.requiredStrength-i.thisStrength)/(i.nextStrength-i.thisStrength)*100+.5);r=e.jsx("span",{children:e.jsx(Y,{i18nKey:"strength too low",components:{strength:e.jsxs(e.Fragment,{children:[e.jsxs("strong",{children:[t("num",{n:n.requiredStrength})," "]}),"(",e.jsx(Nn,{type:i.type,number:i.rankNumber}),e.jsxs("span",{children:[" + ",c,"%"]}),")"]})}})})}return e.jsxs(e.Fragment,{children:[l,e.jsx("div",{className:"warning",children:r})]})}return e.jsxs(e.Fragment,{children:[l,e.jsx("div",{className:"start",children:e.jsxs("div",{className:"sleep_time",children:[e.jsx(on,{score:n.minScore}),e.jsxs("div",{className:"time",children:[n.minTime.toString(t),e.jsx("div",{className:"time_power",children:t("num",{n:n.minPower})})]})]})}),e.jsx("div",{className:"score_separator",children:t("range separator")}),e.jsx("div",{className:"end",children:e.jsxs("div",{className:"sleep_time",children:[e.jsx(on,{score:n.maxScore}),e.jsxs("div",{className:"time",children:[n.maxTime.toString(t),e.jsx("div",{className:"time_power",children:t("num",{n:n.maxPower})})]})]})})]})}function Dl({data:n}){const[s,t]=w.useState(!1),l=()=>{t(!1)},[r,o]=w.useState({first:{count:0,score:0,strength:0},second:{count:0,score:0,strength:0}});function i(c){o(c),t(!0)}return e.jsxs("div",{style:{marginBottom:"10rem"},children:[e.jsx(Xe,{count:4,data:n,ranges:Ke(4,n),onSecondSleepDetailClick:i}),e.jsx(Xe,{count:5,data:n,ranges:Ke(5,n),onSecondSleepDetailClick:i}),e.jsx(Xe,{count:6,data:n,ranges:Ke(6,n),onSecondSleepDetailClick:i}),e.jsx(Xe,{count:7,data:n,ranges:Ke(7,n),onSecondSleepDetailClick:i}),e.jsx(Xe,{count:8,data:n,ranges:Ke(8,n),onSecondSleepDetailClick:i}),e.jsx(zl,{data:r,open:s,onClose:l})]})}function Al(){const n={fieldIndex:0,strength:73120,bonus:1,secondSleep:!1,tracking:void 0},s=localStorage.getItem("ResearchCalcPokeSleep");if(s===null)return n;const t=JSON.parse(s);return typeof t!="object"||t==null||(typeof t.fieldIndex=="number"&&t.fieldIndex>=0&&t.fieldIndex<me.length&&(n.fieldIndex=t.fieldIndex),typeof t.strength=="number"&&t.strength>=0&&(n.strength=t.strength),typeof t.bonus=="number"&&[1,1.5,2,2.5,3,4].includes(t.bonus)&&(n.bonus=t.bonus),typeof t.secondSleep=="boolean"&&(n.secondSleep=t.secondSleep),typeof t.tracking=="object"&&typeof t.tracking.score=="number"&&t.tracking.score>0&&t.tracking.score<=100&&typeof t.tracking.start=="number"&&t.tracking.score<new Date().getTime()/1e3&&typeof t.tracking.area=="number"&&t.tracking.area>=0&&t.tracking.area<me.length&&typeof t.tracking.strength=="number"&&t.tracking.strength>=0&&typeof t.tracking.dp=="number"&&t.tracking.dp>=0&&(n.tracking={score:t.tracking.score,start:t.tracking.start,area:t.tracking.area,strength:t.tracking.strength,dp:t.tracking.dp})),n}function Pl(n){localStorage.setItem("ResearchCalcPokeSleep",JSON.stringify(n))}const Ll=Al();function Ol(){const[n,s]=w.useState(Ll),t=w.useCallback(r=>{const o={...n,...r};s(o),Pl(o)},[n]),l=w.useCallback(r=>{t(r)},[t]);return e.jsxs("div",{style:{margin:"0 .5rem"},children:[e.jsx(yl,{data:n,onChange:l}),e.jsx(El,{fieldIndex:n.fieldIndex}),e.jsx(Dl,{data:n})]})}const xn=new ze;xn.load();function Hl(){const n=$l();let s=new ve("Venusaur");if(n.iv!=="")try{s=ve.deserialize(n.iv)}catch{}let t=-1;if(n.selectedIv!=="")try{const o=ve.deserialize(n.selectedIv),i=xn.items.findIndex(c=>c.iv.isEqual(o));i>=0&&(t=xn.items[i].id)}catch{}const l={tabIndex:n.tabIndex,lowerTabIndex:n.lowerTabIndex,pokemonIv:s,parameter:It(),box:xn,selectedItemId:t,energyDialogOpen:!1,boxItemDialogOpen:!1,boxItemDialogKey:"",boxItemDialogIsEdit:!1,boxExportDialogOpen:!1,boxImportDialogOpen:!1,boxDeleteAllDialogOpen:!1,alertMessage:""},r=document.location.hash.match(/#p=(.*)/);if(r!==null)try{l.pokemonIv=ve.deserialize(r[1])}catch{}return l}function $l(){const n={tabIndex:0,lowerTabIndex:0,iv:"",selectedIv:""},s=localStorage.getItem("PstIvState");if(s===null)return n;const t=JSON.parse(s);return typeof t!="object"||t===null||(typeof t.tabIndex=="number"&&t.tabIndex>=0&&t.tabIndex<=2&&(n.tabIndex=t.tabIndex),typeof t.lowerTabIndex=="number"&&t.lowerTabIndex>=0&&t.lowerTabIndex<=2&&(n.lowerTabIndex=t.lowerTabIndex),typeof t.iv=="string"&&(n.iv=t.iv),typeof t.selectedIv=="string"&&(n.selectedIv=t.selectedIv)),n}function Fe(n){const s=n.box.getById(n.selectedItemId),t={tabIndex:n.tabIndex,lowerTabIndex:n.lowerTabIndex,iv:n.pokemonIv.serialize(),selectedIv:s===null?"":s.iv.serialize()};localStorage.setItem("PstIvState",JSON.stringify(t))}function Wl(n,s){const t=s.type,l=n.box.getById(n.selectedItemId);if(t==="changeUpperTab"){const i=s.payload.index;let c=n.lowerTabIndex;i!==1&&c===2&&(c=0);const d={...n,tabIndex:i,lowerTabIndex:c};return Fe(d),d}if(t==="changeLowerTab"){const i={...n,lowerTabIndex:s.payload.index};return Fe(i),i}if(t==="changeParameter"){const i=s.payload.parameter,c=Je({...n,parameter:i});return localStorage.setItem("PstStrenghParam",JSON.stringify(c.parameter)),c}if(t==="openEnergyDialog")return{...n,energyDialogOpen:!0};if(t==="closeEnergyDialog")return{...n,energyDialogOpen:!1};if(t==="add")return n.box.canAdd?{...n,boxItemDialogOpen:!0,boxItemDialogKey:"dlg"+new Date().getTime().toString(),boxItemDialogIsEdit:!1}:{...n,alertMessage:"box is full"};if(t==="updateIv"){const i=Je({...n,pokemonIv:s.payload.iv});return Fe(i),i}if(t==="addThis"){if(!n.box.canAdd)return{...n,alertMessage:"box is full"};const i=new ze(n.box.items),c=i.add(s.payload.iv,s.payload.nickname);return i.save(),{...n,box:i,selectedItemId:c}}if(t==="export")return{...n,boxExportDialogOpen:!0};if(t==="exportClose")return{...n,boxExportDialogOpen:!1};if(t==="import")return n.box.canAdd?{...n,boxImportDialogOpen:!0}:{...n,alertMessage:"box is full"};if(t==="importClose"){const i=new ze(n.box.items);return{...n,box:i,boxImportDialogOpen:!1}}if(t==="deleteAll")return{...n,boxDeleteAllDialogOpen:!0};if(t==="deleteAllClose")return{...n,boxDeleteAllDialogOpen:!1};if(t==="restoreItem"){if(l!==null){const i=Je({...n,pokemonIv:l.iv});return Fe(i),i}return n}if(t==="saveItem"){const i=n.box.getById(n.selectedItemId)?.nickname,c=new ze(n.box.items);c.set(n.selectedItemId,n.pokemonIv,i),c.save();const d={...n,box:c};return Fe(d),d}if(t==="editDialogClose")return{...n,boxItemDialogOpen:!1};if(t==="addOrEditDone"){const i=s.payload.item,c=new ze(n.box.items);let d=n.selectedItemId;i.id===-1?d=c.add(i.iv,i.nickname):c.set(i.id,i.iv,i.nickname),c.save();const u=Je({...n,pokemonIv:i.iv,box:c});return u.selectedItemId=d,Fe(u),u}if(t==="showAlert")return{...n,alertMessage:s.payload.message};if(t==="closeAlert")return{...n,alertMessage:""};if(t!=="select"&&t!=="edit"&&t!=="dup"&&t!=="remove")return n;const r=s.payload.id,o=n.box.getById(r);if(o===null)return n;if(t==="select"){const i=Je({...n,pokemonIv:o.iv});return i.selectedItemId=r,Fe(i),i}else{if(t==="edit")return{...n,boxItemDialogOpen:!0,boxItemDialogKey:"dlg"+new Date().getTime().toString(),boxItemDialogIsEdit:!0};if(t==="dup"){const i=new ze(n.box.items),c=i.add(o.iv.clone(),o.nickname);return i.save(),{...n,box:i,selectedItemId:c}}else if(t==="remove"){const i=new ze(n.box.items);return i.remove(r),i.save(),{...n,box:i}}}return n}function Je(n){const s=n.box.getById(n.selectedItemId);n.pokemonIv.normalize();const t=Ce(n.parameter.event,n.parameter.customEventBonus);if(t!==void 0&&t.fixedBerries!==void 0&&t.fixedBerries?.length===3&&t.fixedAreas?.includes(n.parameter.fieldIndex)){let r=!1;const o=ts(n.parameter.fieldIndex);for(let i=0;i<3;i++)if(t.fixedBerries[i]!==null&&(o&&!n.parameter.favoriteType.includes(t.fixedBerries[i])||!o&&n.parameter.favoriteType[i]!==t.fixedBerries[i])){r=!0;break}r&&(n.parameter.favoriteType=[...t.fixedBerries],n.parameter.favoriteType[1]===null&&(n.parameter.favoriteType[1]=De.find(i=>!n.parameter.favoriteType.includes(i))??"normal"),n.parameter.favoriteType[2]===null&&(n.parameter.favoriteType[2]=De.find(i=>!n.parameter.favoriteType.includes(i))??"normal"))}if(!n.parameter.berryBurstTeam.auto&&n.pokemonIv.pokemon.skill==="Energy for Everyone S (Lunar Blessing)"){const r=n.parameter.berryBurstTeam.members.filter(o=>o.type===n.pokemonIv.pokemon.type).length+1;r<=2?n.parameter.berryBurstTeam.species=r:n.parameter.berryBurstTeam.species=Math.min(r,n.parameter.berryBurstTeam.species)}let l=n.selectedItemId;return s!==null&&(s.iv.pokemon.ancestor!==n.pokemonIv.pokemon.ancestor&&(l=-1),s.iv.pokemon.ancestor===null&&s.iv.pokemon.id!==n.pokemonIv.pokemon.id&&(l=-1)),{...n,selectedItemId:l}}function Zs(n,s,t){const l=n.serialize(),o=`${window.location.href.split("#")[0].replace(/utm_source=homescreen&?/,"").replace(/\?$/,"")}#p=${l}`;return navigator.share?navigator.share({url:o}):ns(o).then(()=>{const i=t("copied");s({type:"showAlert",payload:{message:i}})})}const _l=a.memo(({state:n,isBoxEmpty:s,dispatch:t})=>{const l=n.tabIndex,r=n.lowerTabIndex,[o,i]=a.useState(null),[c,d]=a.useState(!1),{t:u}=B(),x=!!o&&r===0,h=!!o&&r===1,m=a.useRef(null),g=a.useCallback(E=>{i(null);const C=E.currentTarget.getAttribute("data-value")||"";C==="addThis"?d(!0):t({type:C})},[t]),b=a.useCallback(()=>{i(null),Zs(n.pokemonIv,t,u)},[t,n.pokemonIv,u]),f=a.useCallback((E,C)=>{t({type:"changeLowerTab",payload:{index:C}}),i(null)},[t]),j=a.useCallback(E=>{i(E.currentTarget)},[]),k=a.useCallback(()=>{i(null)},[]),v=a.useCallback(()=>{d(!1)},[]),y=a.useCallback(E=>{d(!1),t({type:"addThis",payload:{iv:n.pokemonIv,nickname:E}}),Ul(m.current)},[t,n.pokemonIv]);return e.jsxs(ql,{children:[r!==2&&e.jsx(K,{"aria-label":"actions",color:"inherit",onClick:j,children:e.jsx(os,{})}),e.jsxs(Gl,{value:r,onChange:f,children:[e.jsx(Ln,{label:u("pokemon")}),e.jsx(Ln,{label:u("box"),ref:m}),l===1&&e.jsx(Ln,{label:u("parameter")})]}),e.jsx(ln,{anchorEl:o,open:x,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(Ae,{children:[e.jsxs(p,{onClick:g,"data-value":"addThis",children:[e.jsx(ne,{children:e.jsx(Xs,{})}),u("add to box")]}),e.jsxs(p,{onClick:b,"data-value":"share",children:[e.jsx(ne,{children:e.jsx(as,{})}),u("share")]})]})}),e.jsx(ln,{anchorEl:o,open:h,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(Ae,{children:[e.jsxs(p,{"data-value":"export",onClick:g,disabled:s,children:[e.jsx(ne,{children:e.jsx(Qt,{})}),u("export")]}),e.jsxs(p,{"data-value":"import",onClick:g,children:[e.jsx(ne,{children:e.jsx(Zt,{})}),u("import")]}),e.jsx(Ne,{}),e.jsxs(p,{"data-value":"deleteAll",onClick:g,disabled:s,children:[e.jsx(ne,{children:e.jsx(er,{})}),u("delete all")]})]})}),e.jsx(Vl,{open:c,initialNickname:u(`pokemons.${n.pokemonIv.pokemonName}`),onConfirm:y,onCancel:v})]})}),Vl=a.memo(({open:n,initialNickname:s,onConfirm:t,onCancel:l})=>{const{t:r}=B(),[o,i]=a.useState("");a.useEffect(()=>{n&&i(s)},[n,s]);const c=a.useCallback(()=>{t(o)},[o,t]);return e.jsxs(G,{open:n,onClose:l,children:[e.jsx(ae,{children:r("add to box")}),e.jsxs(J,{children:[e.jsx(nr,{sx:{marginBottom:2},children:r("confirm add to box")}),e.jsx(ce,{variant:"standard",size:"small",fullWidth:!0,value:o,onChange:d=>i(d.target.value)})]}),e.jsxs(W,{children:[e.jsx(M,{onClick:c,autoFocus:!0,children:r("add")}),e.jsx(M,{onClick:l,children:r("cancel")})]})]})}),ql=S("div")({marginTop:"clamp(.3rem, 0.6vh, .7rem)","& > button.MuiIconButton-root":{float:"right",color:"#999"}}),Gl=S(vn)({minHeight:"clamp(20px, 3vh, 36px)",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),Ln=S(Cn)({minHeight:"clamp(20px, 3vh, 36px)",padding:"6px 16px"});function Ul(n){if(n===null)return;const s=n.getBoundingClientRect(),t=s.x+window.scrollX,l=s.y+window.scrollY,r=document.documentElement.clientWidth,o=400,i=document.createElement("div");i.style.position="absolute",i.style.left=`${t}px`,i.style.top=`${l}px`,i.style.width=`${s.width}px`,i.style.height=`${s.height}px`,i.style.background="#1976d2",i.style.opacity="0.6",i.style.transformOrigin="top left",i.style.zIndex="2",document.body.appendChild(i);const c=i.animate([{transform:`translateX(${-t}px) translateY(${s.height}px) scale(${r/s.width}, ${o/s.height})`},{transform:"translateX(0) translateY(0) scale(1, 1)",opacity:.1}],{duration:200,easing:"ease-out",iterations:1});c.onfinish=()=>{document.body.removeChild(i)}}const En=a.createContext({iconUrl:null,language:"",pwacnt:0,news:{ResearchCalc:"",IvCalc:""}});function ec(n){const s={iconUrl:null,language:n,pwacnt:-1,news:{ResearchCalc:"",IvCalc:""}},t=localStorage.getItem("PokeSleepTool");if(t===null)return s;const l=JSON.parse(t);return typeof l!="object"||l==null||(typeof l.iconUrl=="string"&&l.iconUrl.match(/@ID[1-4]?@/)&&(s.iconUrl=l.iconUrl),typeof l.language=="string"&&(s.language=l.language),typeof l.pwacnt=="number"&&(s.pwacnt=l.pwacnt),typeof l.news=="object"&&(typeof l.news.ResearchCalc=="string"&&(s.news.ResearchCalc=l.news.ResearchCalc),typeof l.news.IvCalc=="string"&&(s.news.IvCalc=l.news.IvCalc))),s}function Yn(n){localStorage.setItem("PokeSleepTool",JSON.stringify(n))}const Fn=a.memo(({idForm:n,size:s})=>{const t=a.useContext(En);if(t.iconUrl!==null&&t.iconUrl.match(/^https?:\/\//)){let r=t.iconUrl;const o=ve.getIdByIdForm(n);return r=r.replace(/@ID(\d)@/g,(i,c)=>o.toString().padStart(parseInt(c,10),"0")),e.jsx("img",{src:r,width:s,height:s,alt:o.toString()})}const l=Kl(n,s);return e.jsx(Jl,{style:{width:`${s}px`,height:`${s}px`},children:e.jsx("svg",{width:s,height:s,viewBox:`0 0 ${s} ${s}`,children:l})})});function Kl(n,s){let t;if(n in Dn)t=n;else if(t=ve.getIdByIdForm(n),!(t in Dn))return Xl(s);const l=Dn[t],r=[];let o=0;for(const i of l){const c={};i.r!==void 0&&(c.rx=c.ry=(s*i.r).toFixed(1)),r.push(e.jsx("rect",{x:(s*i.x).toFixed(1),y:(s*i.y).toFixed(1),width:(s*i.w).toFixed(1),height:(s*i.h).toFixed(1),fill:i.color,...c},o)),o++}return r}function Xl(n){return[e.jsx("rect",{x:"0",y:"0",width:n,height:n,fill:"#bbbbbb"})]}const Jl=S("div")({border:"1px solid #999",borderRadius:".5rem",overflow:"hidden"}),et=a.memo(({value:n,sortTypes:s,onChange:t,onFilterButtonClick:l})=>{const{t:r}=B(),[o,i]=a.useState(!1),c=a.useRef(null),d=w.useCallback(()=>{i(!0)},[i]),u=w.useCallback(()=>{i(!1)},[i]),x=w.useCallback(()=>{t({...n,descending:!n.descending})},[n,t]),h=w.useCallback(g=>{const b=g.currentTarget.getAttribute("data-value");b!=null&&(t({...n,sort:b}),i(!1))},[n,t,i]),m=s.map(g=>e.jsx(p,{onClick:h,"data-value":g,selected:n.sort===g,children:r(g)},g));return e.jsxs(Yl,{children:[e.jsxs(Qn,{style:{padding:".2rem .8rem",marginRight:".5rem",width:"4.5rem",textAlign:"left"},onClick:l,children:[e.jsx(Sn,{style:{paddingRight:"0"}}),r(n.isFiltered?"on":"off")]},n.isFiltered.toString()),e.jsxs(Qn,{style:{padding:".2rem .8rem",marginRight:".5rem",width:"9rem",textAlign:"left"},onClick:d,ref:c,children:[e.jsx(sr,{style:{paddingRight:".4rem"}}),r(n.sort)]}),e.jsx(qe,{open:o,onClose:u,anchorEl:c.current,children:e.jsx(Ae,{children:m})}),e.jsx(Ql,{className:n.descending?"desc":"asc",onClick:x,children:e.jsx(tr,{style:{width:"1rem",height:"1rem"}})})]})}),Yl=S("div")({backgroundColor:"#f76",padding:".5rem .5rem"}),Qn=S(In)({borderRadius:"3rem",background:"white",fontSize:".8rem",color:"#000",justifyContent:"left",boxShadow:"0 2px 2px 1px #88666666",fontFamily:"M PLUS 1p",svg:{width:"1.2rem",height:"1.2rem",color:"#24da6d"}}),Ql=S(Qn)({padding:".2rem",translation:"0.2s",svg:{width:"1rem",height:"1rem",transform:"translateY(0%)",transition:"0.2s"},"&.desc svg":{transform:"rotate(180deg)",transition:"0.2s"}}),Re=a.memo(a.forwardRef(({size:n,type:s,checked:t,disabled:l,deletable:r,onClick:o,onDelete:i},c)=>{const{t:d}=B(),u=w.useCallback(x=>{const h=x.nativeEvent.target?.closest(".deleteIcon")!=null,m=x.currentTarget.value;h?i?.(m):o(m)},[o,i]);return e.jsxs(Zl,{ref:c,size:n??"medium",className:`${s}${r?" deletable":""}${l?" disabled":""}`,value:s,onClick:u,children:[d(`types.${s}`),t&&e.jsx(fe,{}),r&&e.jsx(Us,{className:"deleteIcon"})]},s)})),Zl=S(M)({width:"5rem",color:"white",fontSize:"0.9rem",padding:0,margin:"0.2rem",borderRadius:"0.5rem","&.MuiButton-sizeSmall":{width:"4.6rem",fontSize:"0.8rem","&.deletable":{width:"5.6rem"},"&.disabled":{opacity:.7}},"& > svg":{position:"absolute",background:"#24d76a",borderRadius:"18px",fontSize:"16px",padding:"1px",border:"2px solid white",right:"-4px",top:"-4px","&.deleteIcon":{position:"absolute",background:"#ffffff",color:"#888888",borderRadius:"50%",fontSize:"14px",border:0,right:"-4px",top:"-2px"}},"&.normal":{backgroundColor:"#939393"},"&.fire":{backgroundColor:"#e8554d"},"&.water":{backgroundColor:"#579bf3"},"&.electric":{backgroundColor:"#f1c525"},"&.grass":{backgroundColor:"#57a747"},"&.ice":{backgroundColor:"#68c5df"},"&.fighting":{backgroundColor:"#e8a33b"},"&.poison":{backgroundColor:"#ab7aca"},"&.ground":{backgroundColor:"#c8a841"},"&.flying":{backgroundColor:"#add5ea"},"&.psychic":{backgroundColor:"#ed6c94"},"&.bug":{backgroundColor:"#a5ab39"},"&.rock":{backgroundColor:"#b2b194"},"&.ghost":{backgroundColor:"#8d658e"},"&.dragon":{backgroundColor:"#7482e9"},"&.dark":{backgroundColor:"#706261"},"&.steel":{backgroundColor:"#94b1c2"},"&.fairy":{backgroundColor:"#e48fe3"}}),Be=a.memo(({specialty:n,checked:s,disabled:t,onClick:l})=>{const{t:r}=B(),o=w.useCallback(c=>{const d=c.currentTarget.value;l?.(d)},[l]);let i="";switch(n){case"Berries":i="berry";break;case"Ingredients":i="ingredient";break;case"Skills":i="skill";break}return t===!0?e.jsx(ei,{className:i,children:r(i)},n):e.jsxs(ni,{className:`${i} ${s?"checked":""}`,value:n,onClick:o,children:[r(i),s&&e.jsx(fe,{})]},n)}),ei=S("span")({display:"inline-block",width:"4rem",fontSize:".6rem",padding:".1rem 0",textAlign:"center",color:"white",borderRadius:".6rem",verticalAlign:"20%","&.berry":{backgroundColor:"#24d76a"},"&.ingredient":{backgroundColor:"#fab855"},"&.skill":{backgroundColor:"#44a2fd"}}),ni=S(M)({width:"5.5rem",color:"white",fontSize:"0.8rem",padding:0,margin:"0.2rem",borderRadius:"1rem",textTransform:"none","& > svg":{position:"absolute",background:"#24d76a",borderRadius:"10px",fontSize:"15px",border:"2px solid white",right:"calc(50%-15px)",top:"calc(50%-15px)"},"&.berry":{backgroundColor:"#24d76a"},"&.berry.checked":{backgroundColor:"#bde9bb"},"&.ingredient":{backgroundColor:"#fab855"},"&.ingredient.checked":{backgroundColor:"#f3dcb3"},"&.skill":{backgroundColor:"#44a2fd"},"&.skill.checked":{backgroundColor:"#b8d0fa"}}),si=S("div")({margin:"clamp(.3rem, 0.7vh, .5rem) 0",display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:".4rem .5rem"}),ti=a.memo(({value:n,onChange:s})=>{const[t,l]=a.useState(!1),[r,o]=a.useState(10),i=a.useCallback(u=>{o(parseInt(u.currentTarget.name,10)),l(!0)},[o,l]),c=a.useCallback(u=>{o(u)},[o]),d=a.useCallback(()=>{l(!1)},[l]);return e.jsxs(si,{children:[e.jsx(Ye,{level:10,value:n.lv10,onClick:i}),e.jsx(Ye,{level:25,value:n.lv25,onClick:i}),e.jsx(Ye,{level:50,value:n.lv50,onClick:i}),e.jsx(Ye,{level:75,value:n.lv75,onClick:i}),e.jsx(Ye,{level:100,value:n.lv100,onClick:i}),e.jsx(ii,{open:t,level:r,value:n,onClose:d,onChange:s,onLevelChange:c})]})}),nt=S(In)(({theme:n})=>{const s=n.typography.button;return{fontFamily:s.fontFamily,fontSize:"0.8rem",fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,lineHeight:s.lineHeight,height:"1.6rem",padding:".2rem",border:"1px solid #999",borderRadius:".4rem",background:"#d0d0d0","&.gold":{background:"#fbe778",borderColor:"#c19255"},"&.blue":{background:"#d3e9f7",borderColor:"#5e7da0"},"&.white":{background:"#f3f3f3",borderColor:"#999999"},"&.selected":{background:"#888c8f"}}}),Ye=a.memo(({level:n,value:s,onClick:t})=>{const{t:l}=B(),r=s===null?"":l(`subskill.${s.name}`);let o="";return s?.isGold?o="gold":s?.isBlue?o="blue":s?.isWhite&&(o="white"),e.jsx(nt,{name:n.toString(),className:o,onClick:t,children:r})}),ri=S("div")({header:{fontSize:".9rem"},"& div.subskill_list50":{margin:".2rem 0 1.2rem 0",display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:".3rem","& button":{fontSize:"0.75rem",whiteSpace:"nowrap"}},"& div.subskill_list25":{margin:".8rem 0",display:"grid",gridTemplateColumns:"max-content 2.5rem 2.5rem 2.5rem",gridGap:".3rem","& header":{textAlign:"right",paddingRight:".8rem"}}}),li=S(Js)(({theme:n})=>({position:"absolute",right:".5rem",top:"0","& .MuiBadge-badge":{border:`2px solid ${n.palette.background.paper}`,backgroundColor:"#24d76a",padding:0,"& > svg":{width:"14px",height:"14px",fontSize:"12px",padding:0,margin:0}},"&.isnum .MuiBadge-badge":{padding:"0 4px"}})),ii=a.memo(({open:n,value:s,level:t,onChange:l,onClose:r,onLevelChange:o})=>{const{t:i}=B(),c=a.useCallback(x=>{const h=new gs(s),m=new Ls(x),g=h.getSubSkillLevel(m);g===-1?h.set(t,m):h.set(g,null),l({value:h}),h.lv10===null?o(10):h.lv25===null?o(25):h.lv50===null?o(50):h.lv75===null?o(75):h.lv100===null?o(100):r()},[l,r,o,t,s]),d=a.useCallback(()=>{l({value:new gs}),o(10)},[l,o]),u=a.useCallback(x=>{const h=s.getSubSkillLevel(x);return h<0?0:h},[s]);return e.jsxs(G,{open:n,onClose:r,children:[e.jsx("div",{style:{padding:"1.2rem 1rem 1rem 1rem",fontSize:"1.1rem"},children:e.jsx(Y,{i18nKey:"select subskill at level xxx",components:{level:e.jsxs("strong",{children:[i("level")," ",t]})}})}),e.jsx("div",{style:{padding:"0 1rem"},children:e.jsx(st,{subSkill2Badge:u,onClick:c})}),e.jsxs(W,{children:[e.jsx(M,{onClick:d,children:i("clear")}),e.jsx(M,{onClick:r,children:i("close")})]})]})}),st=a.memo(({subSkill2Badge:n,onClick:s})=>{const{t}=B(),l=a.useCallback(o=>{s(o.currentTarget.value)},[s]),r=a.useCallback((o,i)=>{const c=new Ls(o),d=c.isGold?"gold":c.isBlue?"blue":"white",u=n(c),x=u!==0?`${d} selected`:d;return i===void 0&&(i=t(`subskill.${o}`)),e.jsx(e.Fragment,{children:e.jsxs(nt,{onClick:l,className:x,value:o,children:[i,e.jsx(li,{color:"secondary",badgeContent:u,max:100,className:typeof u=="number"?"isnum":""})]})})},[l,n,t]);return e.jsxs(ri,{children:[e.jsx("header",{children:t("subskill.Gold colored")}),e.jsxs("div",{className:"subskill_list50",children:[r("Berry Finding S",void 0),r("Helping Bonus",void 0),r("Sleep EXP Bonus",void 0),r("Research EXP Bonus",void 0),r("Energy Recovery Bonus",void 0),r("Dream Shard Bonus",void 0)]}),e.jsxs("div",{className:"subskill_list25",children:[e.jsx("header",{children:t("subskill.Skill Level Up")}),r("Skill Level Up M","M"),r("Skill Level Up S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Skill Trigger")}),r("Skill Trigger M","M"),r("Skill Trigger S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Helping Speed")}),r("Helping Speed M","M"),r("Helping Speed S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Ingredient Finder")}),r("Ingredient Finder M","M"),r("Ingredient Finder S","S"),e.jsx("span",{}),e.jsx("header",{children:t("subskill.Inventory Up")}),r("Inventory Up L","L"),r("Inventory Up M","M"),r("Inventory Up S","S")]})]})}),je=a.memo(({name:n})=>{switch(n){case"apple":return e.jsx(Wr,{});case"avocado":return e.jsx($r,{});case"cacao":return e.jsx(Hr,{});case"coffee":return e.jsx(Or,{});case"corn":return e.jsx(Lr,{});case"egg":return e.jsx(Pr,{});case"ginger":return e.jsx(Ar,{});case"herb":return e.jsx(Dr,{});case"honey":return e.jsx(Rr,{});case"leek":return e.jsx(zr,{});case"mushroom":return e.jsx(Fr,{});case"milk":return e.jsx(Er,{});case"oil":return e.jsx(Mr,{});case"potato":return e.jsx(Nr,{});case"pumpkin":return e.jsx(Tr,{});case"sausage":return e.jsx(Br,{});case"soy":return e.jsx(wr,{});case"tail":return e.jsx(Ir,{});case"tomato":return e.jsx(Sr,{});case"unknown":return e.jsx("svg",{width:"24",height:"20",viewBox:"0 0 24 24",children:e.jsx("svg",{viewBox:"0 0 200 200",children:e.jsx("line",{x1:"10",y1:"100",x2:"180",y2:"100",stroke:"#bbbbbb",strokeWidth:"12"})})});case"unknown1":return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#eaae35"})});case"unknown2":return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#56c0fe"})});case"unknown3":return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#f55865"})})}return e.jsx(e.Fragment,{})}),tt=a.memo(({ingredient:n,checked:s,onClick:t})=>{const l=w.useCallback(r=>{const o=r.currentTarget.value;t(o)},[t]);return e.jsxs(oi,{value:n,onClick:l,children:[e.jsx(je,{name:n}),s&&e.jsx(fe,{role:"switch"})]},n)}),oi=S(M)({width:"20%",height:"40px",color:"white",fontSize:"0.9rem",padding:0,margin:"0.2rem",borderRadius:"0.5rem",'& > svg.MuiSvgIcon-root[role="switch"]':{position:"absolute",background:"#24d76a",borderRadius:"15px",fontSize:"15px",border:"2px solid white",bottom:"0px",right:"10px"}}),Pe=a.memo(({mainSkill:n,second:s,firstIngredient:t})=>{switch(n){case"Charge Energy S":case"Charge Energy S (Moonlight)":return e.jsx(ar,{sx:{color:"#ff88aa"},fontSize:"small"});case"Energy for Everyone S":return e.jsx(Ss,{sx:{color:"#ff88aa"},fontSize:"small"});case"Energy for Everyone S (Lunar Blessing)":return s!==!0?e.jsx(Ss,{sx:{color:"#ff88aa"},fontSize:"small"}):e.jsx(le,{sx:{color:"#ff944b"}});case"Energizing Cheer S":return e.jsx(Cs,{sx:{color:"#ff88aa"},fontSize:"small"});case"Charge Strength M":case"Charge Strength M (Bad Dreams)":case"Charge Strength S":case"Charge Strength S (Random)":case"Charge Strength S (Stockpile)":case"Berry Burst":case"Berry Burst (Disguise)":return e.jsx(le,{sx:{color:"#ff944b"}});case"Dream Shard Magnet S":case"Dream Shard Magnet S (Random)":return e.jsx(Jn,{});case"Extra Helpful S":return e.jsx(Sn,{sx:{color:"#66cc66"},fontSize:"small"});case"Helper Boost":return e.jsx(or,{sx:{color:"#66cc66"},fontSize:"small"});case"Ingredient Magnet S (Plus)":return s!==!0?e.jsx(An,{fontSize:"small"}):e.jsx(je,{name:t??"apple"});case"Ingredient Magnet S (Present)":return s!==!0?e.jsx(An,{fontSize:"small"}):e.jsx(Bn,{sx:{color:"#e7ba67"},fontSize:"small"});case"Ingredient Magnet S":return e.jsx(An,{fontSize:"small"});case"Ingredient Draw S":return e.jsx(qr,{fontSize:"small"});case"Ingredient Draw S (Hyper Cutter)":return e.jsx(Vr,{fontSize:"small"});case"Ingredient Draw S (Super Luck)":return s!==!0?e.jsx(_r,{fontSize:"small"}):e.jsx(Jn,{});case"Cooking Power-Up S":return e.jsx(Is,{sx:{color:"#886666"},fontSize:"small"});case"Cooking Power-Up S (Minus)":return s!==!0?e.jsx(Is,{sx:{color:"#886666"},fontSize:"small"}):e.jsx(Cs,{sx:{color:"#ff88aa"},fontSize:"small"});case"Tasty Chance S":return e.jsx(ir,{sx:{color:"#ff0000"},fontSize:"small"});case"Metronome":return e.jsx(lr,{sx:{color:"#999"},fontSize:"small"});case"Skill Copy":case"Skill Copy (Mimic)":case"Skill Copy (Transform)":return e.jsx(rr,{sx:{color:"#999"},fontSize:"small"});default:return e.jsx(e.Fragment,{children:"ー"})}}),rt=a.memo(({mainSkill:n,checked:s,onClick:t})=>{const{t:l}=B(),r=w.useCallback(o=>{const i=o.currentTarget.value;t(i)},[t]);return e.jsxs(ai,{value:n,onClick:r,children:[e.jsxs("div",{children:[!s&&e.jsx(Pe,{mainSkill:n}),s&&e.jsx(fe,{role:"switch"})]}),l(`skills.${n}`)]})}),ai=S(M)({height:"2.2rem",lineHeight:1.2,margin:"1%",color:"black",fontSize:"0.8rem",justifyContent:"left",alignItems:"center",textAlign:"left",padding:0,textTransform:"none","& > div":{width:"24px","& > svg":{marginRight:"4px"},'& > svg[role="switch"]':{color:"white",width:"18px",height:"18px",background:"#24d76a",borderRadius:"5px",fontSize:"15px",border:"2px solid white"}}}),Oe=S(In)(({theme:n})=>{const s=n.typography.button;return{fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,lineHeight:s.lineHeight,display:"inline",textAlign:"left",padding:0,color:"black","&::before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42)",content:'"\\00a0"',position:"absolute",bottom:0,left:0,right:0},"&::after":{borderBottom:"2px solid #1976d2",content:'"\\00a0"',position:"absolute",bottom:0,left:0,right:0,transform:"scaleX(0)",transition:"transform 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms"},"&:focus::after":{transform:"scaleX(1)"},"&.focused::after":{transform:"scaleX(1)"}}}),ci=a.memo(({iv:n,onChange:s})=>{const t=n.nature,[l,r]=a.useState(!1),o=a.useRef(null),i=a.useCallback(()=>{r(u=>!u)},[r]),c=a.useCallback(()=>{r(!1)},[r]),d=a.useRef(l);return a.useEffect(()=>{d.current===!0&&l===!1&&o.current.focus(),d.current=l},[l]),e.jsxs(e.Fragment,{children:[e.jsx(Oe,{ref:o,onClick:i,className:l?"focused":"",children:e.jsx(lt,{value:t})}),e.jsx(di,{iv:n,open:l,anchorRef:o,onClose:c,onChange:s})]})}),di=a.memo(({iv:n,open:s,anchorRef:t,onClose:l,onChange:r})=>{const{t:o}=B(),[i,c]=a.useState(1),[d,u]=a.useState(null),x=a.useMemo(()=>we.allNatures.filter(j=>n.pokemon.id!==Ht||n.pokemon.form==="Amped"&&j.isAmped||n.pokemon.form==="Low Key"&&j.isLowKey),[n.pokemon.id,n.pokemon.form]),h=a.useCallback(j=>{const k=j.currentTarget.getAttribute("value"),v=x.filter(y=>y.upEffect===k);if(v.length===1){r(new we(v[0].name)),l();return}u(k),c(2)},[x,r,l]),m=a.useCallback(j=>{const k=j.currentTarget.getAttribute("value");k!==null&&(r(new we(k)),l())},[r,l]),g=a.useCallback(j=>j.map(k=>({nature:k,key:o(`natures.${k.name}`)})).sort((k,v)=>k.key>v.key?1:-1).map(k=>k.nature),[o]);let b=[];const f=["No effect","Speed of help","Main skill chance","Ingredient finding","EXP gains","Energy recovery"];if(i===1)for(const j of f){const k=g(x.filter(y=>y.upEffect===j)).map(y=>e.jsx("span",{children:o(`natures.${y.name}`)},y.name)),v=j==="No effect"?e.jsx(e.Fragment,{children:o("nature effect.No effect")}):e.jsx(Ge,{children:o(`nature effect.${j}`)});b.push(e.jsx(ui,{value:j,onClick:h,children:e.jsxs("div",{children:[e.jsx("div",{className:"up",children:v}),e.jsx("div",{className:"natures",children:k})]})},j))}return i===2&&(b=g(x.filter(k=>k.upEffect===d)).map(k=>e.jsx(p,{value:k.name,onClick:m,children:e.jsx(lt,{value:k})},k.name))),a.useEffect(()=>{s||c(1)},[s]),e.jsx(qe,{open:s,onClose:l,anchorEl:t.current,children:e.jsx(Ae,{children:b})})}),Ms=S("div")({display:"grid",gridTemplateColumns:"8rem 1fr",gridGap:".3rem","& > span":{border:"2px solid #24d76a",borderRadius:"1rem",textAlign:"center",padding:".2rem 0",margin:".5rem 1rem .5rem 0"},"& > div":{margin:"auto 0",fontSize:".8rem","& > span":{display:"block"}}}),Ge=S("span")({"&::after":{content:'" ▲▲"',color:"#ff6666"}}),dn=S("span")({"&::after":{content:'" ▼▼"',color:"#6666ff"}}),ui=S(p)({"& > div":{"& > div.up":{height:"1rem",fontSize:"1rem"},"& > div.natures":{height:".6rem","& >span":{paddingRight:".8rem",color:"#888",fontSize:".6rem"}}}}),lt=a.memo(({value:n})=>{const{t:s}=B();return n.upEffect==="No effect"?e.jsxs(Ms,{children:[e.jsx("span",{children:s(`natures.${n.name}`)}),e.jsx("div",{children:s("nature effect.No effect")})]}):e.jsxs(Ms,{children:[e.jsx("span",{children:s(`natures.${n.name}`)}),e.jsxs("div",{children:[e.jsx(Ge,{children:s(`nature effect.${n.upEffect}`)}),e.jsx(dn,{children:s(`nature effect.${n.downEffect}`)})]})]})});function xs(){const n=a.useRef({elm:null}),[s,t]=a.useState(200),l=a.useMemo(()=>new ResizeObserver(()=>{const o=n.current.elm;o!==null&&t(Math.floor(o.getBoundingClientRect().width))}),[]),r=a.useCallback(o=>{if(o===null){l.disconnect();return}n.current.elm=o,t(Math.floor(o.getBoundingClientRect().width)),l.disconnect(),l.observe(o)},[l]);return[s,r]}const it=20,Es=20,ot=a.memo(({index:n,width:s,children:t,onChange:l})=>{const r=a.useRef(!0),o=Array.isArray(t)?t.length:0,i=s+it,[{x:c},d]=As(()=>({x:-n*i,immediate:r.current}),[n,i]),u=Ct(({active:x,movement:[h],velocity:[m]})=>{if(x)return d.start({x:-n*i+h,immediate:!0});const g=Math.abs(m)>.2||Math.abs(h)>s/2;let b=n;return g&&(b+=h>0?-1:1,b=Math.max(0,Math.min(o-1,b))),b!==n&&l(b),d.start({x:-b*i,immediate:r.current})},{from:[-n*i,0],filterTaps:!0,bounds:()=>({left:n===o-1?-i*(o-1)-Es:-1/0,right:n===0?Es:1/0}),rubberband:!0});return a.useEffect(()=>{r.current?(d.set({x:-n*i}),requestAnimationFrame(()=>{r.current=!1})):d.start({x:-n*i})},[n,i,d]),Array.isArray(t)?e.jsx(mi,{...u(),children:e.jsx(Ps.div,{className:"tabTrack",style:{x:c},children:t.map((x,h)=>e.jsx("div",{style:{width:s},children:x},h))})}):null}),mi=S("div")({overflow:"hidden",touchAction:"pan-y",overscrollBehavior:"contain","& > div.tabTrack":{display:"flex",flexWrap:"nowrap",gap:it,width:"max-content","& > div > *":{flex:"0 0 100%"}}}),xi=a.memo(({open:n,value:s,onChange:t,onClose:l})=>{const{t:r}=B(),[o,i]=xs(),[c,d]=a.useState(s.defaultTabIndex),u=a.useCallback((C,F)=>{d(F)},[]),x=w.useCallback(()=>{t(new ie({}))},[t]),h=w.useCallback(()=>{l()},[l]),m=w.useCallback(C=>{t(new ie({...s,name:C.target.value}))},[s,t]),g=w.useCallback(C=>{const F=s.filterTypes.includes(C)?s.filterTypes.filter(A=>A!==C):[...s.filterTypes,C];t(new ie({...s,filterTypes:F}))},[s,t]),b=w.useCallback(C=>{t(new ie({...s,filterSpecialty:s.filterSpecialty.includes(C)?s.filterSpecialty.filter(F=>F!==C):[...s.filterSpecialty,C]}))},[s,t]),f=w.useCallback(C=>{const F=s.ingredientName===C?void 0:C;t(new ie({...s,ingredientName:F}))},[s,t]),j=a.useCallback(C=>{t(new ie({...s,ingredientUnlockedOnly:C.target.checked}))},[t,s]),k=w.useCallback(C=>{t(new ie({...s,mainSkillNames:C}))},[s,t]),v=De.map(C=>e.jsx(Re,{type:C,onClick:g,checked:s.filterTypes.includes(C)},C)),y=rs.map(C=>e.jsx(Be,{specialty:C,onClick:b,checked:s.filterSpecialty.includes(C)},C)),E=yn.map(C=>e.jsx(tt,{ingredient:C,onClick:f,checked:s.ingredientName===C},C));return e.jsxs(hi,{open:n,onClose:l,children:[e.jsx("div",{ref:i,children:e.jsx(ce,{size:"small",fullWidth:!0,value:s.name,onChange:m,slotProps:{input:{endAdornment:e.jsx(rn,{position:"start",children:e.jsx(Sn,{})})}}})}),e.jsxs(gi,{variant:"scrollable",scrollButtons:!0,value:c,onChange:u,children:[e.jsx(Qe,{label:r("type"),value:0}),e.jsx(Qe,{label:r("ingredient"),value:1}),e.jsx(Qe,{label:r("main skill"),value:2}),e.jsx(Qe,{label:r("sub skills"),value:3}),e.jsx(Qe,{label:r("nature"),value:4})]}),e.jsxs(ot,{index:c,width:o,onChange:d,children:[e.jsxs("div",{className:"tabChild",children:[v,e.jsx("h4",{style:{margin:"1rem 0 0.5rem"},children:r("specialty")}),y]}),e.jsxs("div",{className:"tabChild",children:[E,e.jsxs("section",{children:[e.jsxs("label",{children:[r("unlocked only"),":"]}),e.jsx(se,{checked:s.ingredientUnlockedOnly,onChange:j})]})]}),e.jsx("div",{className:"tabChild",children:e.jsx(pi,{value:s.mainSkillNames,onChange:k})}),e.jsx("div",{className:"tabChild",children:e.jsx(fi,{value:s,onChange:t})}),e.jsx("div",{className:"tabChild",children:e.jsx(ji,{value:s,onChange:t})})]}),e.jsxs(W,{children:[e.jsx(M,{onClick:x,children:r("clear")}),e.jsx(M,{onClick:h,children:r("close")})]})]})}),hi=S(G)({"div.MuiPaper-root":{maxWidth:"480px","& > div":{margin:".5rem .5rem 0 .5rem"},"& div.tabChild":{"& > section":{margin:"0 0.8rem",fontSize:".9rem",display:"flex",flex:"0 auto",alignItems:"center",maxWidth:"100%","&:first-of-type":{marginTop:"0.3rem"},"& > label":{marginRight:"auto"}}}}}),gi=S(vn)({minHeight:"36px",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),Qe=S(Cn)({minHeight:"36px",minWidth:"0",padding:"6px clamp(6px, 1vw, 8px)",textTransform:"none"}),pi=a.memo(({value:n,onChange:s})=>{const t=w.useCallback(r=>{const o=n.includes(r)?n.filter(i=>i!==r):[...n,r];s(o)},[n,s]),l=bn.map(r=>e.jsx(rt,{mainSkill:r,onClick:t,checked:n.includes(r)},r));return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:l})}),fi=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=w.useCallback(c=>{const d=n.subSkillNames.includes(c)?n.subSkillNames.filter(u=>u!==c):[...n.subSkillNames,c];s(new ie({...n,subSkillNames:d}))},[n,s]),r=w.useCallback(c=>{s(new ie({...n,subSkillUnlockedOnly:c.target.checked}))},[n,s]),o=w.useCallback(c=>{s(new ie({...n,subSkillAnd:c.target.checked}))},[n,s]),i=a.useCallback(c=>n.subSkillNames.includes(c.name)?e.jsx(fe,{}):0,[n]);return e.jsxs(e.Fragment,{children:[e.jsx(st,{subSkill2Badge:i,onClick:l}),e.jsxs("section",{style:{marginTop:"2rem"},children:[e.jsxs("label",{children:[t("unlocked only"),":"]}),e.jsx(se,{checked:n.subSkillUnlockedOnly,size:"small",onChange:r})]}),e.jsxs("section",{children:[e.jsx("label",{children:"AND:"}),e.jsx(se,{checked:n.subSkillAnd,size:"small",onChange:o})]})]})}),ji=a.memo(({value:n,onChange:s})=>{const t=w.useCallback(()=>{s(new ie({...n,neutralNature:!n.neutralNature,upNature:"No effect",downNature:"No effect"}))},[n,s]),l=w.useCallback(o=>{let i=n.downNature;i===o&&(i="No effect"),s(new ie({...n,neutralNature:!1,upNature:o===n.upNature?"No effect":o,downNature:i}))},[n,s]),r=w.useCallback(o=>{let i=n.upNature;i===o&&(i="No effect"),s(new ie({...n,neutralNature:!1,upNature:i,downNature:o===n.downNature?"No effect":o}))},[n,s]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:"0.4rem"},children:e.jsx(xe,{label:"No effect",onClick:t,checked:n.neutralNature})}),e.jsxs(Fs,{children:[e.jsx(xe,{label:"Speed of help",up:!0,checked:n.upNature==="Speed of help",onClick:l}),e.jsx(xe,{label:"Main skill chance",up:!0,checked:n.upNature==="Main skill chance",onClick:l}),e.jsx(xe,{label:"Ingredient finding",up:!0,checked:n.upNature==="Ingredient finding",onClick:l}),e.jsx(xe,{label:"EXP gains",up:!0,checked:n.upNature==="EXP gains",onClick:l}),e.jsx(xe,{label:"Energy recovery",up:!0,checked:n.upNature==="Energy recovery",onClick:l})]}),e.jsxs(Fs,{children:[e.jsx(xe,{label:"Speed of help",down:!0,checked:n.downNature==="Speed of help",onClick:r}),e.jsx(xe,{label:"Main skill chance",down:!0,checked:n.downNature==="Main skill chance",onClick:r}),e.jsx(xe,{label:"Ingredient finding",down:!0,checked:n.downNature==="Ingredient finding",onClick:r}),e.jsx(xe,{label:"EXP gains",down:!0,checked:n.downNature==="EXP gains",onClick:r}),e.jsx(xe,{label:"Energy recovery",down:!0,checked:n.downNature==="Energy recovery",onClick:r})]})]})}),Fs=S("div")({display:"grid",gridTemplateColumns:"1fr 1fr",marginTop:"1rem"}),xe=a.memo(({label:n,checked:s,up:t,down:l,onClick:r})=>{const{t:o}=B(),i=w.useCallback(c=>{const d=c.currentTarget.value;r(d)},[r]);return e.jsxs(bi,{value:n,onClick:i,children:[t===!0?e.jsx(Ge,{children:o(`nature effect.${n}`)}):l===!0?e.jsx(dn,{children:o(`nature effect.${n}`)}):o(`nature effect.${n}`),s&&e.jsx(fe,{role:"switch"})]},n)}),bi=S(M)({color:"black",textAlign:"left",fontSize:"clamp(0.65rem, calc(2vw), 0.8rem)",textTransform:"none",borderRadius:"0.5rem",border:"1px solid #ccc",margin:"2px",'& > svg.MuiSvgIcon-root[role="switch"]':{position:"absolute",background:"#24d76a",borderRadius:"15px",fontSize:"15px",color:"white",border:"1px solid white",bottom:"1px",right:"10px"}}),ue=a.memo(({children:n,value:s,renderValue:t,sx:l,menuSx:r,onChange:o})=>{const[i,c]=a.useState(!1),d=a.useRef(null),u=a.useCallback(()=>{c(!0)},[]),x=a.useCallback(()=>{c(!1)},[]),h=a.useCallback(j=>{if(o===void 0)return;const k=j.props.value;k!=null&&(o(String(k)),x())},[o,x]),m=a.Children.toArray(n),g=m.find(j=>j.props.value===s);let b=null;t!==void 0?b=t(s):g&&(b=g.props.children);const f=m.map(j=>{const k=s===j.props.value;return a.cloneElement(j,{onClick:()=>{h(j)},selected:k})});return e.jsxs(e.Fragment,{children:[e.jsx(Oe,{ref:d,onClick:u,style:l,className:i?"focused":"",children:b}),e.jsx(qe,{anchorEl:d.current,open:i,onClose:x,children:e.jsx(Ae,{style:r,children:f})})]})}),hs=a.memo(({value:n,dispatch:s,sx:t})=>{const{t:l}=B(),r=a.useCallback(o=>{s({type:"changeParameter",payload:{parameter:{...n,level:parseInt(o,10)}}})},[s,n]);return e.jsxs(ue,{sx:t,value:n.level,onChange:r,children:[e.jsx(p,{dense:!0,value:0,children:l("current level")}),e.jsx(Ne,{}),e.jsx(p,{dense:!0,value:10,children:"Lv. 10"}),e.jsx(p,{dense:!0,value:25,children:"Lv. 25"}),e.jsx(p,{dense:!0,value:30,children:"Lv. 30"}),e.jsx(p,{dense:!0,value:50,children:"Lv. 50"}),e.jsx(p,{dense:!0,value:60,children:"Lv. 60"}),e.jsx(p,{dense:!0,value:65,children:"Lv. 65"}),e.jsx(p,{dense:!0,value:75,children:"Lv. 75"}),e.jsx(p,{dense:!0,value:100,children:"Lv. 100"})]})}),On=100,ki=a.memo(({value:n,onChange:s})=>{const[t,l]=a.useState(!1),[r,o]=a.useState(!1),i=a.useRef(null),c=a.useCallback(j=>{let k=parseInt(j,10);(isNaN(k)||k<1)&&(k=0),k>On&&(k=On),l(!1),n!==k&&s(k)},[s,n]),d=a.useCallback((j,k)=>{if(k===null)return;const v=k;if(typeof v=="string"&&v.trim()===""){l(!0),s(0);return}c(v)},[c,s]),u=a.useCallback(()=>{o(!0)},[]),x=a.useCallback(j=>{o(!1),j!==null&&c(j.target.value)},[c]),h=a.useCallback((j,k)=>{k!==null&&s(parseInt(k,10))},[s]),m=["0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],g=a.useCallback(j=>j,[]),b=t?"":n.toString()+(r?"":"%"),f=r?"number":"text";return e.jsx(Ys,{size:"small",options:m,freeSolo:!0,disableClearable:!0,value:b,sx:{width:"4rem"},onFocus:u,onInputChange:d,onChange:h,filterOptions:g,renderInput:j=>e.jsx(ce,{...j,variant:"standard",type:f,inputRef:i,onBlur:x,slotProps:{htmlInput:{...j.inputProps,min:0,max:On,inputMode:"numeric",style:{textOverflow:"clip"}}}}),slots:{paper:Ci,popper:yi}})}),yi=function(n){return e.jsx(is,{...n,style:{width:"17.5rem",zIndex:2147483647},placement:"bottom-end"})},vi=S(qs)({width:"17.5rem","& > ul":{display:"grid",gridTemplateColumns:"3.5rem 3.5rem 3.5rem 3.5rem 3.5rem",margin:0,padding:0,"& > li.MuiAutocomplete-option":{display:"inline-block",width:"3.5rem",textAlign:"center",height:"3rem",padding:0,verticalAlign:"middle",lineHeight:"2.8rem",borderRight:"1px solid #ccc",borderBottom:"1px solid #ccc"},"& > li.MuiAutocomplete-option:nth-of-type(5n)":{borderRight:0}}}),Ci=a.forwardRef((n,s)=>{const{sx:t,...l}=n;return e.jsx(vi,{ref:s,...l})}),He=a.memo(({size:n,type:s,disabled:t,deletable:l,onChange:r,onClick:o,onDelete:i})=>{const[c,d]=a.useState(!1),u=a.useRef(null),x=a.useCallback(f=>{o?.(f),t!==!0&&d(!0)},[t,o]),h=a.useCallback(()=>{i?.(s)},[s,i]),m=a.useCallback(f=>{r(f),d(!1)},[r]),g=a.useCallback(()=>{d(!1)},[]),b=De.map(f=>e.jsx(Re,{type:f,size:n,onClick:m,checked:f===s},f));return e.jsxs(e.Fragment,{children:[e.jsx(Re,{ref:u,type:s,size:n,deletable:l,disabled:t,onClick:x,onDelete:h,checked:!1}),e.jsx(qe,{anchorEl:u.current,open:c,onClose:g,children:e.jsx(Ae,{style:{padding:0,width:n==="small"?"15rem":"16.2rem"},children:b})})]})}),Si=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=ts(n.fieldIndex),{types:r,reasons:o}=a.useMemo(()=>wt(n),[n]),i=a.useCallback(h=>{const m=[n.favoriteType[0]??"normal",n.favoriteType[1]??"normal",n.favoriteType[2]??"normal"];m[0]=h,s({...n,favoriteType:m})},[s,n]),c=a.useCallback(h=>{const m=[n.favoriteType[0]??"normal",n.favoriteType[1]??"normal",n.favoriteType[2]??"normal"];m[1]=h,s({...n,favoriteType:m})},[s,n]),d=a.useCallback(h=>{const m=[n.favoriteType[0]??"normal",n.favoriteType[1]??"normal",n.favoriteType[2]??"normal"];m[2]=h,s({...n,favoriteType:m})},[s,n]),u=a.useCallback(h=>{const m=[h,...r.filter(g=>g!==h)];s({...n,favoriteType:m})},[s,n,r]),x=a.useCallback(h=>{s({...n,expertEffect:h})},[s,n]);return e.jsxs(an,{show:n.fieldIndex>=0,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[t("favorite berry"),":"]}),e.jsxs(wi,{children:[e.jsxs("span",{children:[l&&e.jsx("header",{children:t("main")}),o[0]==="random"?e.jsx(He,{type:r[0],size:"small",onChange:i}):e.jsx(Re,{type:r[0],size:"small",checked:!1,onClick:u}),e.jsx("footer",{className:o[0].replace(/ /g,"-"),children:t(o[0])})]}),e.jsxs("span",{children:[l&&e.jsx("header",{children:t("sub1")}),o[1]==="random"?e.jsx(He,{type:r[1],size:"small",onChange:c}):e.jsx(Re,{type:r[1],size:"small",checked:!1,onClick:u}),e.jsx("footer",{className:o[1].replace(/ /g,"-"),children:t(o[1])})]}),e.jsxs("span",{children:[l&&e.jsx("header",{children:t("sub2")}),o[2]==="random"?e.jsx(He,{type:r[2],size:"small",onChange:d}):e.jsx(Re,{type:r[2],size:"small",checked:!1,onClick:u}),e.jsx("footer",{className:o[2].replace(/ /g,"-"),children:t(o[2])})]})]})]}),l&&e.jsxs("section",{children:[e.jsxs("label",{children:[t("expert effect"),":"]}),e.jsx(Ii,{value:n.expertEffect,onChange:x})]})]})}),Ii=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=a.useCallback(r=>{s(r.target.value)},[s]);return e.jsxs(re,{variant:"standard",value:n,onChange:l,children:[e.jsx(p,{value:"berry",children:t("expert berry effect")}),e.jsxs(p,{value:"ing",children:[t("expert ing effect"),e.jsx("br",{}),e.jsx("small",{children:t("expert ing effect2")})]}),e.jsx(p,{value:"skill",children:t("expert skill effect")})]})}),wi=S("span")({display:"flex","& > span":{display:"grid","& header":{display:"block",textAlign:"center",color:"white",width:"2rem",background:"#7cd377",fontSize:"0.5rem",borderRadius:"0.7rem",margin:"0 auto 2px auto",padding:"2px 12px"},"& > button":{marginTop:0,marginButton:0},"& > footer":{textAlign:"center",position:"relative",top:"-3px",fontSize:"0.6rem",fontWeight:"bold",color:"#7cd377","&.set-for-event":{color:"#e07377"}}}}),at=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=a.useCallback(i=>{s({...n,fieldBonus:i})},[s,n]),r=a.useCallback(i=>{s({...n,isGoodCampTicketSet:i.target.checked})},[s,n]),o=n.period!==Ee;return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[t("research area"),":"]}),e.jsx(dt,{value:n,fontSize:"0.9rem",onChange:s})]}),e.jsx(Si,{value:n,onChange:s}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("area bonus"),":"]}),e.jsx(ki,{value:n.fieldBonus,onChange:l})]}),e.jsx(oe,{in:o,children:e.jsxs("section",{children:[e.jsxs("label",{children:[t("good camp ticket"),":"]}),e.jsx(se,{checked:n.isGoodCampTicketSet,size:"small",onChange:r})]})})]})}),ct=a.memo(({open:n,value:s,onChange:t,onClose:l})=>{const{t:r}=B();return n?e.jsxs(G,{open:n,onClose:l,children:[e.jsx(Bi,{children:e.jsx(at,{value:s,onChange:t})}),e.jsx(W,{children:e.jsx(M,{onClick:l,children:r("close")})})]}):e.jsx(e.Fragment,{})}),Bi=S(J)({minWidth:"16rem",paddingBottom:0,fontSize:"0.9rem","& section":{"& > label":{paddingTop:"1rem",display:"block"},"&.first > label":{paddingTop:0},"& > span, & > div, & > button:first-of-type":{marginLeft:"1rem",fontSize:"0.9rem"}}}),dt=a.memo(({showConfigButton:n,value:s,fontSize:t,onChange:l})=>{const{t:r}=B(),[o,i]=a.useState(!1),c=a.useCallback(m=>{const g=parseInt(m,10);l({...s,fieldIndex:g})},[l,s]),d=a.useCallback(()=>{i(!0)},[]),u=a.useCallback(()=>{i(!1)},[]),x=[],h=[...me];x.push(e.jsx(p,{value:Gn,dense:!0,children:r("no favorite berries")},Gn)),x.push(e.jsx(p,{value:Un,dense:!0,children:r("all favorite berries")},Un)),x.push(e.jsx(Ne,{},"divider"));for(const m of h)x.push(e.jsxs(p,{value:m.index,dense:!0,children:[e.jsx("span",{className:"field_icon",children:m.emoji}),r(`area.${m.index}`)]},m.index));return e.jsxs(e.Fragment,{children:[e.jsx(ue,{value:s.fieldIndex,onChange:c,sx:{padding:"0 .2rem",fontSize:t??"1rem"},children:x}),n&&e.jsx(K,{size:"small",style:{padding:"2px"},onClick:d,children:e.jsx(Qs,{fontSize:t?"inherit":"small"})}),e.jsx(ct,{open:o,onClose:u,value:s,onChange:l})]})}),Ti=a.memo(({sortConfig:n,parameter:s,dispatch:t,onChange:l})=>{const{t:r}=B(),o=a.useCallback(m=>{t({type:"changeParameter",payload:{parameter:m}})},[t]),i=a.useCallback(m=>{l({...n,ingredient:m})},[l,n]),c=a.useCallback(m=>{l({...n,mainSkill:m})},[l,n]),d=a.useCallback(m=>{o({...s,evolved:m.target.checked})},[s,o]),u=a.useCallback(m=>{o({...s,maxSkillLevel:m.target.checked})},[s,o]),x=a.useMemo(()=>{const m=yn.map(g=>e.jsx(Hn,{value:g,children:e.jsx(je,{name:g})},g));return m.push(e.jsx(Ne,{style:{gridColumn:"1 / -1"}},"divider")),m.push(e.jsx(Hn,{value:"strength",style:{gridColumn:"span 2",width:"8rem"},children:r("total strength")},"strength")),m.push(e.jsx(Hn,{value:"count",style:{gridColumn:"span 2",width:"8rem"},children:r("total count")},"count")),m},[r]),h=a.useMemo(()=>{const m=bn.map(g=>e.jsxs($n,{value:g,children:[e.jsx(Pe,{mainSkill:g}),r(`skills.${g}`)]},g));return m.push(e.jsx(Ne,{style:{gridColumn:"1 / -1"}},"divider")),m.push(e.jsx($n,{value:"strength",style:{paddingLeft:".8rem"},children:r("strength2")},"strength")),m.push(e.jsx($n,{value:"count",style:{paddingLeft:".8rem"},children:r("skill count")},"count")),m},[r]);return n.sort!=="total strength"&&n.sort!=="berry"&&n.sort!=="ingredient"&&n.sort!=="skill"?e.jsx(e.Fragment,{}):e.jsx(Ni,{children:e.jsxs("div",{children:[e.jsx("span",{children:e.jsx(hs,{value:s,dispatch:t,sx:{padding:"0 .2rem",fontSize:"0.8rem",textWrap:"nowrap"}})}),(n.sort==="berry"||n.sort==="total strength")&&e.jsx("span",{className:"field",children:e.jsx(dt,{value:s,onChange:o,fontSize:"0.8rem",showConfigButton:!0})}),n.sort==="ingredient"&&e.jsx("span",{className:"ing",children:e.jsx(ue,{onChange:i,value:n.ingredient,sx:{padding:"0 .5rem",fontSize:"0.8rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr"},children:x})}),n.sort==="skill"&&e.jsx("span",{className:"skill",children:e.jsx(ue,{onChange:c,sx:{fontSize:"0.8rem",textWrap:"nowrap"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},value:n.mainSkill,children:h})}),e.jsx("span",{className:"switch",children:e.jsx(hn,{control:e.jsx(se,{checked:s.evolved,size:"small",onChange:d}),label:r("calc with evolved (short)")})}),n.sort==="skill"&&e.jsx("span",{className:"switch",children:e.jsx(hn,{control:e.jsx(se,{checked:s.maxSkillLevel,size:"small",onChange:u}),label:r("calc with max skill level (short)")})})]})})}),Ni=S("div")({"& > div":{padding:".2rem 0 .2rem 1.2rem",background:"#f3f5f0",borderTop:"1px solid #ccc",position:"relative",display:"flex",flexWrap:"wrap",alignItems:"stretch",gap:"0 10px","& > span":{"& > button":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& span":{fontSize:"0.8rem"},"&.ing svg":{padding:"0 5px",width:"18px",height:"18px"},"&.skill svg":{width:"18px",height:"18px",paddingRight:"4px",verticalAlign:"top"},"&.switch":{paddingLeft:"5px","& span.MuiTypography-root":{textWrap:"nowrap"}}}}}),Hn=S(p)({width:"4rem",fontSize:"0.9rem"}),$n=S(p)({maxWidth:"12rem",fontSize:"0.8rem",paddingLeft:"4px",textWrap:"wrap","& > svg":{width:"18px",height:"18px",padding:"0 4px",flexShrink:0}}),Mi=S("div")({display:"flex",alignItems:"center",gap:".7rem",height:"1.8rem","& > div.numeric":{width:"2.2rem","& > div.MuiInput-root > input":{fontSize:"0.9rem"}}}),Ei=a.memo(({max100:n,value:s,onChange:t})=>{const l=n?100:he;return e.jsxs(Mi,{children:[e.jsx(jn,{max100:n,value:s,onChange:t}),e.jsx(ut,{max:l,value:s,onChange:t})]})}),jn=a.memo(({max100:n,showSlider:s,sx:t,value:l,onChange:r})=>{const o=a.useRef(null),i=a.useCallback(d=>{r(d),o.current?.close()},[r]),c=n?100:he;return e.jsx(ms,{ref:o,value:l,onChange:r,min:1,max:c,sx:t,children:e.jsxs(Fi,{children:[s&&e.jsx(ut,{max:c,value:l,onChange:r}),e.jsxs("div",{className:"buttons",children:[e.jsx(M,{onClick:()=>i(10),children:"10"}),e.jsx(M,{onClick:()=>i(25),children:"25"}),e.jsx(M,{onClick:()=>i(30),children:"30"}),!n&&e.jsx(M,{onClick:()=>i(40),children:"40"}),e.jsx(M,{onClick:()=>i(50),children:"50"}),e.jsx(M,{onClick:()=>i(60),children:"60"}),e.jsx(M,{onClick:()=>i(65),children:"65"}),n&&e.jsx(M,{onClick:()=>i(75),children:"75"}),n&&e.jsx(M,{onClick:()=>i(100),children:"100"})]})]})})}),Fi=S("div")({padding:".3rem .7rem","& > div.buttons":{paddingTop:".4rem",display:"flex",flexWrap:"wrap",gap:"0.3rem 0.5rem","& > button":{color:"#79d073",fontWeight:"bold",fontSize:"0.8rem",padding:0,width:"1.8rem",height:"1.8rem",minWidth:"1.8rem",minHeight:"1.8rem",borderRadius:"50%",border:"1.5px solid #79d073"}}}),zi=S("div")({display:"flex",alignItems:"center",gap:".7rem",height:"1.8rem",flex:1}),ut=a.memo(({max:n,value:s,onChange:t})=>{const l=a.useCallback(()=>{t(s-1)},[s,t]),r=a.useCallback(()=>{t(s+1)},[s,t]);return e.jsxs(zi,{children:[e.jsx(We,{label:"◀",disabled:s===1,onClick:l}),e.jsx(Mn,{min:1,max:n,size:"small",style:{userSelect:"none"},value:s,onChange2:t}),e.jsx(We,{label:"▶",disabled:s===n,onClick:r})]})}),mt=a.memo(({iv:n,dstLevel:s,open:t,onChange:l,onClose:r})=>{const{t:o}=B(),[i,c]=a.useState(n),[d,u]=a.useState(n.level),[x,h]=a.useState(0),[m,g]=a.useState(0),[b,f]=a.useState(he),[j,k]=a.useState(0),[v,y]=a.useState("none"),[E,C]=a.useState(!1),F=a.useCallback(()=>m===0?!0:!(n.level===d&&n.idForm===i.idForm&&n.nature.expGainsFactor===i.nature.expGainsFactor),[n,d,i,m]);a.useEffect(()=>{if(!t){C(!1);return}if(!F()){C(!0);return}let L=0;s!==void 0?L=Math.min(s,he):n.pokemon.specialty==="Berries"||n.pokemon.specialty==="All"?L=he:n.pokemon.specialty==="Ingredients"?L=60:L=50,L=Math.min(he,Math.max(L,n.level)),f(L);const P=Math.min(n.level,L);c(n),u(P),h(0),g(ps(P,P+1,n)),k(n.nature.expGainsFactor),C(!0)},[n,F,s,t]);const A=a.useCallback(L=>{const P=parseInt(L.target.value,10);k(P)},[]),T=a.useCallback(L=>{u(L),h(0),g(ps(L,L+1,n)),l(n.changeLevel(L))},[n,l]),I=a.useCallback(L=>{h(L)},[]),N=a.useCallback(L=>{h(m-L)},[m]),H=a.useCallback((L,P)=>{P!==null&&y(P)},[]);if(!E)return null;const Z=n.changeLevel(d);Z.nature=j===1?new we("Timid"):j===0?new we("Serious"):new we("Relaxed");const D=Bt(Z,x,b,v);return e.jsx(e.Fragment,{children:e.jsxs(Ri,{open:t,onClose:r,children:[e.jsxs("article",{children:[e.jsx("div",{className:"icon",children:e.jsx(Fn,{idForm:n.idForm,size:80})}),e.jsxs("div",{className:"levels",children:[e.jsxs("div",{className:"level",children:[e.jsxs("div",{className:"levelInput",children:[e.jsx("label",{children:"Lv."}),e.jsx(jn,{value:d,onChange:T,showSlider:!0})]}),e.jsxs("div",{className:"expLeft",children:[e.jsx(Di,{value:x,min:0,max:m-1,onChange2:I}),e.jsx(ms,{value:m-x,size:"small",startAdornment:e.jsx(rn,{position:"start",children:o("exp to go1")}),endAdornment:e.jsx(rn,{position:"end",children:o("exp to go2")}),min:1,max:m,onChange:N})]})]}),e.jsx(cr,{}),e.jsx("div",{className:"level",children:e.jsxs("div",{className:"levelInput",children:[e.jsx("label",{children:"Lv."}),e.jsx(jn,{value:b,onChange:f,showSlider:!0})]})})]}),e.jsx("div",{className:"expResult",children:e.jsxs("section",{children:[e.jsxs("label",{children:[o("required exp"),":"]}),e.jsx("div",{children:q(D.exp)})]})}),e.jsxs("div",{className:"candyResult",children:[e.jsxs("section",{children:[e.jsxs("label",{children:[o("candy"),":"]}),e.jsxs("div",{children:[e.jsx(Bn,{sx:{color:"#e7ba67"}}),q(D.candy)]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[o("dream shard"),":"]}),e.jsxs("div",{children:[e.jsx(Jn,{}),q(D.shards)]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[o("nature"),":"]}),e.jsxs(re,{variant:"standard",onChange:A,value:j.toString(),size:"small",children:[e.jsx(p,{value:1,children:e.jsx(Ge,{children:o("nature effect.EXP gains")})}),e.jsxs(p,{value:0,children:[o("nature effect.EXP gains")," ーー"]}),e.jsx(p,{value:-1,children:e.jsx(dn,{children:o("nature effect.EXP gains")})})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[o("candy boost"),":"]}),e.jsxs(X,{size:"small",exclusive:!0,value:v,onChange:H,children:[e.jsx(R,{value:"none",children:o("none")}),e.jsx(R,{value:"mini",children:o("mini candy boost")}),e.jsx(R,{value:"unlimited",children:o("normal candy boost")})]})]})]})]}),e.jsx(W,{children:e.jsx(M,{onClick:r,children:o("close")})})]})})}),Ri=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{maxWidth:"22rem"},"& .MuiPaper-root":{width:"100%","& > article":{padding:".8rem .8rem 0 .8rem","& > div.icon":{margin:"0 auto .5rem",width:"80px"},"& > div.levels":{display:"flex",justifyContent:"center",gap:"0.7rem",margin:"0 auto","& > div.level":{width:"7.2rem","& > div.levelInput":{color:"#79d073",fontSize:"1.2rem",fontWeight:"bold",display:"flex",justifyContent:"center",gap:"0.2rem","& > label":{transform:"scale(1, 0.9)",paddingTop:"0.2rem"},"& > div.numeric":{width:"3rem","& > div.MuiInput-root":{color:"#79d073",fontWeight:"bold",fontSize:"1.3rem !important",transform:"scale(1, 0.9)","& > input":{padding:"2px 0"}}}},"& > div.expLeft":{paddingTop:"0.3rem","& > div.numeric > div.MuiInput-root":{"& > div.MuiInputAdornment-root > p":{color:"#79d073",fontSize:"0.7rem",fontWeight:"bold",transform:"scale(1, 0.9)"},"& > input":{padding:0,fontSize:"0.9rem",fontWeight:"bold",transform:"scale(1, 0.9)"}}}},"& > svg":{paddingTop:"0.3rem",color:"#888"}},"& > div.expResult":{fontWeight:"bold",fontSize:"1.2rem",margin:"2rem .5rem 0",padding:"0.5rem"},"& > div.candyResult":{background:"#f0f0f0",padding:"0.5rem",borderRadius:"0.9rem",fontSize:"0.9rem",margin:"0 .5rem"},"& section":{display:"flex",flex:"0 auto",marginTop:"0.5rem","&:first-of-type":{marginTop:0},"& > label":{marginRight:"auto",marginTop:0},"& > div":{display:"flex",alignItems:"center","& > svg":{width:"1rem",height:"1rem",paddingRight:"0.2rem"}},"& > div > div.MuiSelect-select":{fontSize:"0.9rem",padding:"0 1.5rem 0 0"},"& button.MuiToggleButtonGroup-grouped":{padding:"0.2rem 0.4rem",textTransform:"none"}}}}}),Di=S(Mn)({color:"#79d073",height:8,"@media (pointer: coarse)":{padding:0},padding:0,"& .MuiSlider-thumb":{width:"14px",height:"13px","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&::before":{display:"none"}},"& .MuiSlider-rail":{backgroundColor:"#ccc"}}),Ai=a.memo(({items:n,iv:s,selectedId:t,parameter:l,dispatch:r})=>{const{t:o}=B(),[i,c]=a.useState(()=>Tt()),[d,u]=a.useState(Wn),[x,h]=a.useState(!1),[m,g]=a.useState(!1),b=a.useCallback(()=>{r({type:"add"})},[r]),f=a.useCallback(D=>{const L={...i,sort:D.sort,descending:D.descending};c(L),localStorage.setItem("PstPokemonBoxParam",JSON.stringify(L))},[i]),j=a.useCallback(D=>{c(D),localStorage.setItem("PstPokemonBoxParam",JSON.stringify(D))},[]),k=a.useCallback(()=>{h(!0)},[]),v=a.useCallback(()=>{h(!1)},[]),y=a.useCallback(D=>{Wn=D,u(Wn)},[]),E=a.useCallback(()=>{g(!0)},[]),C=a.useCallback(()=>{g(!1)},[]),F=a.useCallback(D=>{n.find(P=>P.id===t)!==void 0&&r({type:"updateIv",payload:{iv:D}})},[n,r,t]),A=a.useMemo(()=>d.filter(n,l.evolved,o),[n,d,l.evolved,o]),[T,I]=a.useMemo(()=>Nt(A,i.sort,i.descending,i.ingredient,i.mainSkill,l,o),[i.sort,i.descending,i.ingredient,i.mainSkill,A,l,o]);let N=T.map(D=>e.jsx(Pi,{item:D,selected:D.id===t,dispatch:r,onCandyClick:E},D.id));i.descending||(N=[...N].reverse());const H=a.useMemo(()=>({isFiltered:!d.isEmpty,sort:i.sort,descending:i.descending}),[d,i]),Z=a.useMemo(()=>["level","name","pokedexno","rp","total strength","berry","ingredient","skill"],[]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",margin:"0 0.5rem 300px 0.5rem",width:"calc(100% - 1rem)"},children:[N.length===0&&e.jsx("div",{style:{margin:"5rem auto 0",color:"#888",fontSize:"0.9rem"},children:n.length===0?o("box is empty"):I}),N]}),e.jsxs("div",{style:{position:"fixed",width:"100%",bottom:0,margin:".5rem 0 0"},children:[e.jsx(dr,{onClick:b,color:"primary",size:"medium",sx:{position:"absolute",top:"-55px",right:"10px"},children:e.jsx(ur,{})}),e.jsx(Wi,{count:n.length,config:i,dispatch:r,onChange:j}),e.jsx(Ti,{parameter:l,sortConfig:i,dispatch:r,onChange:j}),e.jsx("div",{style:{paddingLeft:"1rem",paddingBottom:"1.2rem",background:"#f76",width:"calc(100% - 1rem)"},children:e.jsx(et,{value:H,onChange:f,onFilterButtonClick:k,sortTypes:Z})})]}),e.jsx(xi,{open:x,onClose:v,value:d,onChange:y}),e.jsx(mt,{iv:s,open:m,dstLevel:l.level===0?void 0:l.level,onChange:F,onClose:C})]})});let Wn=new ie({});const Pi=a.memo(({item:n,selected:s,dispatch:t,onCandyClick:l})=>{const{t:r}=B(),[o,i]=a.useState(null),c=!!o,d=Oi(()=>{m("select"),m("edit")},500),u=a.useCallback(()=>{t({type:"select",payload:{id:n.id}})},[t,n.id]),x=a.useCallback(f=>{i(f.currentTarget)},[i]),h=a.useCallback(()=>{i(null)},[i]),m=a.useCallback(f=>{t({type:f,payload:{id:n.id}}),i(null)},[n,t,i]),g=a.useCallback(()=>{i(null),Zs(n.iv,t,r)},[t,n.iv,r]),b=a.useCallback(()=>{i(null),l(n)},[n,l]);return e.jsxs(Li,{children:[e.jsxs(In,{onClick:u,className:s?"selected":"",ref:d,children:[e.jsxs("header",{children:[e.jsx("span",{className:"lv",children:"Lv."}),n.iv.level]}),e.jsx(Fn,{idForm:n.iv.idForm,size:32}),e.jsx("footer",{children:n.filledNickname(r)})]}),s&&e.jsx(K,{onClick:x,children:e.jsx(os,{})}),e.jsx(ln,{anchorEl:o,open:c,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(Ae,{children:[e.jsxs(p,{onClick:()=>m("edit"),children:[e.jsx(ne,{children:e.jsx(mr,{})}),r("edit")]}),e.jsxs(p,{onClick:b,children:[e.jsx(ne,{sx:{minWidth:"24px"},children:e.jsx(Bn,{sx:{color:"#888"}})}),r("candy")]}),e.jsxs(p,{onClick:g,children:[e.jsx(ne,{children:e.jsx(as,{})}),r("share")]}),e.jsxs(p,{onClick:()=>m("dup"),children:[e.jsx(ne,{children:e.jsx(xr,{})}),r("duplicate")]}),e.jsxs(p,{onClick:()=>m("remove"),children:[e.jsx(ne,{sx:{minWidth:"24px"},children:e.jsx(hr,{})}),r("delete")]})]})})]})}),Li=S("div")({position:"relative","& > button:first-of-type":{fontFamily:'"M PLUS 1p"',display:"block",textAlign:"center",width:"80px",padding:"0.2rem 0",border:"1px solid transparent","& > header":{fontSize:"0.7rem",fontWeight:"bold","& > span.lv":{color:"#62d540",fontSize:"0.6rem",paddingRight:"0.2rem"}},"& > div":{margin:"0.1rem auto 0.1rem"},"& > footer":{fontSize:"0.8rem",color:"#666666",overflowWrap:"anywhere"},"&.selected":{background:"#d3e9f7",borderRadius:"0.5rem",border:"1px solid #5e7da0"}},"& > button.MuiIconButton-root":{position:"absolute",right:"-5px",top:"-2px","& > svg":{width:"0.8rem",height:"0.8rem"}}});function Oi(n,s){const t=a.useRef(null),l=a.useRef(null),r=a.useCallback(()=>{t.current=setTimeout(n,s)},[n,s]),o=a.useCallback(()=>{t.current&&clearTimeout(t.current),t.current=null},[]),i=a.useCallback(()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",i),t.current&&clearTimeout(t.current),t.current=null},[]),c=a.useCallback(()=>{t.current===null&&(t.current=setTimeout(n,s),document.addEventListener("mousemove",i),document.addEventListener("mouseup",i))},[n,s,i]);return a.useEffect(()=>{if(l.current===null)return()=>{};const d=l.current;return d.addEventListener("touchstart",r),d.addEventListener("mousedown",c),d.addEventListener("touchmove",o),d.addEventListener("touchend",o),()=>{d.removeEventListener("touchstart",r),d.removeEventListener("mousedown",c),d.removeEventListener("touchmove",o),d.removeEventListener("touchend",o)}},[c,r,o]),l}const Hi=30,$i=10,Wi=a.memo(({count:n,config:s,dispatch:t,onChange:l})=>{const{t:r}=B(),o=a.useCallback(()=>{l({...s,warnDate:new Date().toLocaleDateString("sv-SE"),warnItems:n})},[s,n,l]),i=a.useCallback(()=>{t({type:"export"}),o()},[t,o]),c=s.warnDate!==""?new Date(s.warnDate).getTime():new Date().getTime(),u=new Date().getTime()-c>Hi*24*60*60*1e3;return!(Math.abs(n-s.warnItems)>=$i)&&!u?e.jsx(e.Fragment,{}):e.jsxs(_i,{children:[e.jsx(Ve,{}),e.jsxs("div",{children:[r("export notice"),e.jsxs(M,{onClick:i,children:["[",r("export"),"]"]})]}),e.jsx(K,{onClick:o,children:e.jsx(wn,{})})]})}),_i=S("div")({background:"#e5f6fd",borderTop:"1px solid #d9e9e9",paddingTop:"0.2rem",color:"#014343",display:"grid",gridTemplateColumns:"26px 1fr 40px","& > svg":{color:"#0288d1",width:"18px",height:"18px",padding:"4px"},"& > div":{fontSize:"0.8rem",color:"#014480","& > button":{padding:"0 0 0 0.3rem",minWidth:0,fontSize:"0.8rem"}}}),Vi=a.memo(({open:n,value:s,onChange:t,onClose:l})=>{const{t:r}=B(),[o,i]=xs(),[c,d]=a.useState(s.tabIndex),u=a.useCallback((m,g)=>{d(g)},[]),x=w.useCallback(()=>{t(new ge({}))},[t]),h=w.useCallback(()=>{l()},[l]);return e.jsxs(qi,{open:n,onClose:l,children:[e.jsxs(Gi,{variant:"scrollable",scrollButtons:!0,ref:i,value:c,onChange:u,children:[e.jsx(_n,{label:r("type"),value:0}),e.jsx(_n,{label:r("ingredient"),value:1}),e.jsx(_n,{label:r("main skill"),value:2})]}),e.jsxs(ot,{index:c,width:o,onChange:d,children:[e.jsx("div",{className:"tabChild",children:e.jsx(Ui,{value:s,onChange:t})}),e.jsx("div",{className:"tabChild",children:e.jsx(Ki,{value:s,onChange:t})}),e.jsx("div",{className:"tabChild",children:e.jsx(Xi,{value:s,onChange:t})})]}),e.jsxs(W,{children:[e.jsx(M,{onClick:x,children:r("clear")}),e.jsx(M,{onClick:h,children:r("close")})]})]})}),qi=S(G)({"div.MuiPaper-root":{padding:"0 .5rem 0 .5rem","& div.tabChild":{"& > section":{margin:"0 0.8rem",fontSize:".9rem",display:"flex",flex:"0 auto",alignItems:"center",maxWidth:"40rem","&:first-of-type":{marginTop:"0.3rem"},"& > label":{marginRight:"auto"}}}}}),Gi=S(vn)({minHeight:"36px",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),_n=S(Cn)({minHeight:"36px",minWidth:"0",textTransform:"none"}),Ui=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=w.useCallback(d=>{s(new ge({...n,filterType:n.filterType===d?null:d}))},[n,s]),r=w.useCallback(d=>{s(new ge({...n,filterSpecialty:n.filterSpecialty.includes(d)?[]:[d]}))},[n,s]),o=w.useCallback((d,u)=>{u===null||n.filterEvolve===u||s(new ge({...n,filterEvolve:u}))},[n,s]),i=De.map(d=>e.jsx(Re,{type:d,onClick:l,checked:d===n.filterType},d)),c=rs.map(d=>e.jsx(Be,{specialty:d,onClick:r,checked:n.filterSpecialty.includes(d)},d));return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:i}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"1rem 0 0.5rem"},children:t("specialty")}),c]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"1rem 0 0.5rem"},children:t("evolve")}),e.jsxs(Ji,{value:n.filterEvolve,exclusive:!0,onChange:o,children:[e.jsx(R,{value:"all",children:t("all")}),e.jsx(R,{value:"non",children:t("non-evolve")}),e.jsx(R,{value:"final",children:t("final-evoltion")})]})]})]})}),Ki=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=w.useCallback(d=>{const u=n.ingredientName===d?"unknown":d;s(new ge({...n,ingredientName:u}))},[n,s]),r=w.useCallback(d=>{s(new ge({...n,ingredientA:d.target.checked}))},[n,s]),o=w.useCallback(d=>{s(new ge({...n,ingredientB:d.target.checked}))},[n,s]),i=w.useCallback(d=>{s(new ge({...n,ingredientC:d.target.checked}))},[n,s]),c=yn.map(d=>e.jsx(tt,{ingredient:d,onClick:l,checked:n.ingredientName===d},d));return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1rem"},children:c}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("ing-a"),":"]}),e.jsx(se,{checked:n.ingredientA,size:"small",onChange:r})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("ing-b"),":"]}),e.jsx(se,{checked:n.ingredientB,size:"small",onChange:o})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[t("ing-c"),":"]}),e.jsx(se,{checked:n.ingredientC,size:"small",onChange:i})]})]})}),Xi=a.memo(({value:n,onChange:s})=>{const t=w.useCallback(r=>{const o=n.mainSkillNames.includes(r)?n.mainSkillNames.filter(i=>i!==r):[...n.mainSkillNames,r];s(new ge({...n,mainSkillNames:o}))},[n,s]),l=bn.map(r=>e.jsx(rt,{mainSkill:r,onClick:t,checked:n.mainSkillNames.includes(r)},r));return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:l})}),Ji=S(X)({"& > button":{textTransform:"none",lineHeight:1},"& > button:first-of-type":{borderRadius:"1rem 0 0 1rem"},"& > button:last-of-type":{borderRadius:"0 1rem 1rem 0"}}),xt="2023-07-17",Yi=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px"}});function Qi(n){const{disablePortal:s,anchorEl:t,open:l,...r}=n;return e.jsx(Zi,{...r})}const Zi=S("div")({[`& .${gr.paper}`]:{boxShadow:"none",margin:0,width:"100%",color:"inherit",fontSize:13,"& > ul.MuiAutocomplete-listbox":{paddingTop:0,maxHeight:"60vh",minHeight:"60vh","& > li > ul":{userSelect:"none",display:"flex",flexWrap:"wrap",justifyContent:"left",margin:"0 0 .5rem 0",padding:0,"& > li":{width:"76px",height:"80px",padding:0,margin:"0 0 6px 0",position:"relative",display:"block","& > div":{margin:"4px auto 0 auto"},"& > img":{margin:"4px auto 0 auto",display:"block"},"& > footer":{display:"inline-block",width:"100%",fontSize:"12px",textAlign:"center",textWrap:"wrap",lineHeight:1.1,verticalAlign:"middle","& > small":{display:"block",fontSize:"9px"}}}}}}}),eo=S(pr)(()=>({width:"calc(100% - 8px)",padding:4,margin:4,borderRadius:4,border:"1px solid #cccccc","& input":{fontSize:14}})),no=S("div")({position:"sticky",top:"-1px",padding:"4px 10px",fontWeight:"bold",zIndex:9,backgroundColor:"#66aaff",borderRadius:"5px",margin:"0 4px 4px 4px",color:"#fff","&.dozing":{backgroundColor:"#fdec6e",color:"#862"},"&.snoozing":{backgroundColor:"#85fbff",color:"#226"},"&.slumbering":{backgroundColor:"#5592fc"},"&.normal":{backgroundColor:"#939393"},"&.fire":{backgroundColor:"#e8554d"},"&.water":{backgroundColor:"#579bf3"},"&.electric":{backgroundColor:"#f1c525"},"&.grass":{backgroundColor:"#57a747"},"&.ice":{backgroundColor:"#68c5df"},"&.fighting":{backgroundColor:"#e8a33b"},"&.poison":{backgroundColor:"#ab7aca"},"&.ground":{backgroundColor:"#c8a841"},"&.flying":{backgroundColor:"#add5ea"},"&.psychic":{backgroundColor:"#ed6c94"},"&.bug":{backgroundColor:"#a5ab39"},"&.rock":{backgroundColor:"#b2b194"},"&.ghost":{backgroundColor:"#8d658e"},"&.dragon":{backgroundColor:"#7482e9"},"&.dark":{backgroundColor:"#706261"},"&.steel":{backgroundColor:"#94b1c2"},"&.fairy":{backgroundColor:"#e48fe3"}});class ge{filterType;filterSpecialty;filterEvolve;ingredientName;ingredientA;ingredientB;ingredientC;mainSkillNames;constructor(s){this.filterType=s.filterType??null,this.filterSpecialty=s.filterSpecialty??[],this.filterEvolve=s.filterEvolve??"all",this.ingredientName=s.ingredientName??"unknown",this.ingredientA=s.ingredientA??!0,this.ingredientB=s.ingredientB??!0,this.ingredientC=s.ingredientC??!0,this.mainSkillNames=s.mainSkillNames??[]}load(s){if(!(typeof s!="object"||s===null)){if(typeof s.filterType=="string"){const t=s.filterType;De.includes(t)&&(this.filterType=t)}if(Array.isArray(s.filterSpecialty)){const t=s.filterSpecialty;t.every(l=>rs.includes(l))&&(this.filterSpecialty=t)}if(typeof s.filterEvolve=="string"){const t=s.filterEvolve;["all","non","final"].includes(t)&&(this.filterEvolve=t)}if(typeof s.ingredientName=="string"){const t=s.ingredientName;yn.includes(t)&&(this.ingredientName=t)}if(typeof s.ingredientA=="boolean"&&(this.ingredientA=s.ingredientA),typeof s.ingredientB=="boolean"&&(this.ingredientB=s.ingredientB),typeof s.ingredientC=="boolean"&&(this.ingredientC=s.ingredientC),Array.isArray(s.mainSkillNames)){const t=s.mainSkillNames;t.every(l=>bn.includes(l))&&(this.mainSkillNames=t)}}}get isFiltered(){return this.filterEvolve!=="all"||this.filterSpecialty.length>0||this.filterType!==null||this.ingredientName!=="unknown"||this.mainSkillNames.length>0}get tabIndex(){return this.filterEvolve!=="all"||this.filterSpecialty.length>0?0:this.ingredientName!=="unknown"?1:this.mainSkillNames.length>0?2:0}filter(s,t){const l=i=>i.toLowerCase().trim().replace(/[ぁ-ん]/g,c=>String.fromCharCode(c.charCodeAt(0)+96)),r=l(t);let o=s.filter(i=>l(i.localName).includes(r));return this.filterType!==null&&(o=o.filter(i=>this.filterType===i.type)),this.filterSpecialty.length>0&&(o=o.filter(i=>i.specialty==="All"||this.filterSpecialty.includes(i.specialty))),this.filterEvolve==="final"?o=o.filter(i=>i.isFullyEvolved):this.filterEvolve==="non"&&(o=o.filter(i=>i.isNonEvolving)),this.ingredientName!=="unknown"&&(o=o.filter(i=>this.ingredientA&&this.ingredientName===i.ing1Name||this.ingredientB&&this.ingredientName===i.ing2Name||this.ingredientC&&this.ingredientName===i.ing3Name)),this.mainSkillNames.length>0&&(o=o.filter(i=>this.mainSkillNames.some(c=>Mt(i,c)))),o.length===0&&o.push({...ls[0],id:-1,idForm:-1,name:"",localName:"",arrival:xt,specialty:"Berries",sleepType:"dozing",type:"normal",skill:"Charge Energy S",ancestor:null,isFullyEvolved:!1,isNonEvolving:!1,ing1Name:"unknown",ing2Name:"unknown",ing3Name:void 0}),o}}const so=a.memo(({open:n,pokemonOptions:s,selectedValue:t,onClose:l,onChange:r})=>{const{t:o}=B(),[i,c]=a.useState(!1),[d,u]=a.useState(null),x=d===null?to():d,h=x.sort,m=x.descending,g=w.useCallback(()=>{l()},[l]),b=w.useCallback((T,I)=>x.filter.filter(T,I.inputValue),[x.filter]),f=w.useCallback((T,I)=>{if(I===null)return;let N;if(typeof I=="string"){if(N=s.find(H=>H.localName===I),N===void 0)return}else{const H=I;if(H.id<0)return;N=H}r(N),g()},[r,g,s]),j=w.useCallback((T,I)=>{I==="selectOption"&&g(),I==="escape"&&g()},[g]),k=w.useCallback(T=>{if(T.id<0)return"";switch(h){case"sleeptype":return T.sleepType;case"name":return T.localName.charAt(0).normalize("NFD")[0];case"pokedexno":return T.id<=151?"Kanto":T.id<=251?"Johto":T.id<=386?"Hoenn":T.id<=494?"Sinnoh":T.id<=649?"Unova":T.id<=721?"Kalos":T.id<=809?"Alola":T.id<=905?"Galar":"Paldea";case"type":return T.type;case"arrival":return T.arrival===xt?"initial pokemon":T.arrival.substring(0,4);default:return""}},[h]),v=w.useCallback(T=>{let I=T.group;return I===""?e.jsx(e.Fragment,{}):(h==="sleeptype"?I=o(T.group):h==="type"?I=o(`types.${T.group}`):h==="pokedexno"?I=o(`generation.${T.group}`):h==="arrival"&&T.group==="initial pokemon"&&(I=o("initial pokemon")),e.jsxs("li",{children:[e.jsx(no,{className:T.group,children:I}),e.jsx("ul",{style:{padding:0},children:T.children})]},T.group))},[h,o]),y=w.useCallback(()=>{c(!0)},[]),E=w.useCallback(()=>{c(!1)},[]),C=w.useCallback(T=>{const I={...x,filter:T};u(I),localStorage.setItem("PstPokemonSelectParam",JSON.stringify(I))},[x]),F=w.useCallback(T=>{const I={...x,descending:T.descending,sort:T.sort};u(I),localStorage.setItem("PstPokemonSelectParam",JSON.stringify(I))},[x]);let A=[];switch(h){case"sleeptype":A=s.sort((T,I)=>{const N=zs[T.sleepType],H=zs[I.sleepType];return N===H?T.id-I.id:N-H});break;case"name":A=s.sort((T,I)=>T.localName>I.localName?1:T.localName<I.localName?-1:0);break;case"pokedexno":A=s.sort((T,I)=>T.id-I.id);break;case"type":A=s.sort((T,I)=>{const N=Rs[T.type],H=Rs[I.type];return N===H?T.id-I.id:N-H});break;case"arrival":A=s.sort((T,I)=>T.arrival!==I.arrival?T.arrival>I.arrival?1:-1:(T.id-I.id)*(m?-1:1));break;default:throw new Error("invalid sort type")}return m&&(A=A.reverse()),e.jsxs(Yi,{open:n,onClose:g,children:[e.jsx(Ys,{options:A,fullWidth:!0,open:!0,freeSolo:!0,value:A.find(T=>T.name===t.name),slots:{popper:Qi},filterOptions:b,getOptionLabel:T=>typeof T=="string"?T:T.localName,groupBy:k,renderGroup:v,renderOption:(T,I)=>{const{key:N,...H}=T;return e.jsxs(p,{...H,children:[e.jsx(Fn,{idForm:I.idForm,size:48}),e.jsxs("footer",{children:[I.localName.replace(/\(.+/,""),I.localName.endsWith(")")&&e.jsx("small",{children:I.localName.replace(/^[^(]+/,"")})]})]},N)},renderInput:T=>e.jsx(eo,{ref:T.InputProps.ref,inputProps:{autoComplete:"false",...T.inputProps},startAdornment:e.jsx(rn,{position:"start",children:e.jsx(Sn,{})})}),onClose:j,onChange:f}),e.jsx(et,{sortTypes:["pokedexno","name","sleeptype","type","arrival"],value:{isFiltered:x.filter.isFiltered,sort:x.sort,descending:x.descending},onChange:F,onFilterButtonClick:y}),e.jsx(Vi,{open:i,onClose:E,value:x.filter,onChange:C})]})}),zs={dozing:0,snoozing:1,slumbering:2},Rs={normal:0,fire:1,water:2,electric:3,grass:4,ice:5,fighting:6,poison:7,ground:8,flying:9,psychic:10,bug:11,rock:12,ghost:13,dragon:14,dark:15,steel:16,fairy:17};function to(){const n={filter:new ge({}),sort:"pokedexno",descending:!1},s=localStorage.getItem("PstPokemonSelectParam");if(s===null)return n;const t=JSON.parse(s);return typeof t!="object"||t===null||(t.filter===void 0&&(t.filter={filterType:t.filterType,filterEvolve:t.filterEvolve}),n.filter.load(t.filter),typeof t.sort=="string"&&["sleeptype","name","pokedexno","type","arrival"].includes(t.sort)&&(n.sort=t.sort),typeof t.descending=="boolean"&&(n.descending=t.descending)),n}const ro=a.memo(({iv:n,fixMode:s,onChange:t,onCandyClick:l})=>{const r=n.pokemon.name,{t:o}=B(),[i,c]=a.useState(!1),d=a.useMemo(()=>ls.map(b=>({...b,idForm:new ve(b.name).idForm,localName:o(`pokemons.${b.name}`),isNonEvolving:b.evolutionCount===-1,isFullyEvolved:b.isFullyEvolved,ing1Name:b.ing1.name,ing2Name:b.ing2.name,ing3Name:b.ing3?.name})),[o]),u=d.find(b=>b.name===r);if(u===void 0)throw new Error(`value ${r} is invalid`);const x=u,h=w.useCallback(()=>{c(!0)},[c]),m=w.useCallback(b=>{t(b.name)},[t]),g=w.useCallback(()=>{c(!1)},[c]);return e.jsxs("div",{children:[s?e.jsx(e.Fragment,{children:x.localName}):e.jsxs(Oe,{onClick:h,style:{width:"10.2rem",fontSize:"0.9rem"},className:i?"focused":"",children:[x.localName.replace(/\(.+/,""),x.localName.endsWith(")")&&e.jsx("small",{children:x.localName.replace(/^[^(]+/,"")})]}),e.jsx(lo,{iv:n,onChange:t}),e.jsx(oo,{onClick:l}),e.jsx(so,{open:i,onClose:g,onChange:m,pokemonOptions:d,selectedValue:x})]})}),lo=a.memo(({iv:n,onChange:s})=>{const{t}=B(),[l,r]=a.useState(null),o=n.pokemon.ancestor!==null,i=a.useCallback(m=>{const g=m.currentTarget.getAttribute("value");g!==null&&(s(g),r(null))},[s,r]),c=[],d=n.allDecendants;for(const m of d)c.push(e.jsxs(p,{value:m.name,onClick:i,children:[e.jsx(ne,{children:m.name===n.pokemon.name?e.jsx(fe,{}):e.jsx(Xn,{})}),t(`pokemons.${m.name}`)]},m.name));const u=w.useCallback(m=>{r(m.currentTarget)},[r]),x=w.useCallback(()=>{r(null)},[r]),h=!!l;return e.jsxs(e.Fragment,{children:[e.jsx(io,{size:"small",onClick:u,disabled:!o,children:e.jsx(fr,{fontSize:"inherit"})}),e.jsx(ln,{open:h,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:x,children:c})]})}),io=S(K)({color:"#6c9",fontSize:"0.9rem",boxShadow:"0 1px 3px 1px rgba(128, 128, 128, 0.2)",marginLeft:".4rem",border:"1px solid #ccc","&:disabled":{color:"#999"}}),oo=a.memo(({onClick:n})=>e.jsx(ao,{size:"small",onClick:n,children:e.jsx(Bn,{sx:{color:"#e7ba67"}})})),ao=S(K)({fontSize:"0.9rem",boxShadow:"0 1px 3px 1px rgba(128, 128, 128, 0.2)",marginLeft:".2rem","@media (min-width: 390px)":{marginLeft:".5rem"},border:"1px solid #ccc","& > svg":{width:"14px",height:"14px"}}),co=S(Js)(()=>({marginRight:".8rem",width:26,height:26,"& .MuiBadge-badge":{top:23,right:4,border:"1px solid #ccbb88",fontSize:"0.5rem",height:"0.7rem",width:"0.8rem",color:"#000",backgroundColor:"#ffffff",boxShadow:"0 1px 2px 1px rgba(128, 128, 128, 0.4)",zIndex:0},"& > svg":{width:"20px",height:"20px"}})),ye=a.memo(({name:n,count:s})=>n==="unknown"?e.jsx("span",{style:{padding:"0 0.7rem 0 0.2rem"},children:e.jsx(je,{name:n})}):e.jsx(co,{badgeContent:"×"+s,children:e.jsx(je,{name:n})})),uo=S(p)({borderTop:"1px dashed #ddd",padding:".3rem .5rem","&:first-of-type":{borderTop:0}}),mo=a.memo(({iv:n,onChange:s})=>{const t=w.useCallback(i=>{const c=n.clone();c.ingredient=i.target.value,s(c)},[n,s]),l=w.useCallback(i=>{const c=n.clone();c.mythIng1=i,s(c)},[n,s]),r=w.useCallback(i=>{const c=n.clone();c.mythIng2=i,s(c)},[n,s]),o=w.useCallback(i=>{const c=n.clone();c.mythIng3=i,s(c)},[n,s]);return n.isMythical?go(n,l,r,o):xo(n,t)});function xo(n,s){const t=[],l=["AAA","AAB","ABA","ABB"];n.pokemon.ing3!==void 0&&(l.splice(2,0,"AAC"),l.push("ABC"));for(const r of l)t.push(e.jsx(uo,{value:r,dense:!0,children:e.jsx(ho,{pokemon:n.pokemon,value:r})},r));return e.jsx(ce,{variant:"standard",size:"small",select:!0,value:n.ingredient,slotProps:{select:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}}},onChange:s,children:t})}const ho=a.memo(({pokemon:n,value:s})=>{const t=e.jsx(ye,{count:n.ing1.c1,name:n.ing1.name}),r=s.charAt(1)==="A"?n.ing1:n.ing2,o=e.jsx(ye,{count:r.c2,name:r.name}),i=s.charAt(2),c=i==="C"&&n.ing3!==void 0?n.ing3:i==="A"?n.ing1:n.ing2,d=e.jsx(ye,{count:c.c3,name:c.name});return e.jsxs(e.Fragment,{children:[t,o,d]})});function go(n,s,t,l){if(n.pokemon.mythIng===void 0)return e.jsx(e.Fragment,{});const r=[],o=[],i=[];for(const c of n.pokemon.mythIng)r.push(e.jsx(p,{value:c.name,children:e.jsx(ye,{count:c.c1,name:c.name})},c.name)),o.push(e.jsx(p,{value:c.name,children:e.jsx(ye,{count:c.c2,name:c.name})},c.name)),i.push(e.jsx(p,{value:c.name,children:e.jsx(ye,{count:c.c3,name:c.name})},c.name));return o.push(e.jsx(p,{value:"unknown",children:e.jsx(ye,{count:0,name:"unknown"})},"unknown")),i.push(e.jsx(p,{value:"unknown",children:e.jsx(ye,{count:0,name:"unknown"})},"unknown")),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx(ue,{value:n.mythIng1,sx:{paddingBottom:"0.4rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},onChange:s,children:r}),e.jsx(ue,{value:n.mythIng2,sx:{paddingBottom:"0.4rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},onChange:t,children:o}),e.jsx(ue,{value:n.mythIng3,sx:{paddingBottom:"0.4rem"},menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},onChange:l,children:i})]})}const po=a.memo(({pokemon:n,value:s,onChange:t})=>{const{t:l}=B(),r=Os(n.skill),o=[];for(let c=1;c<=r;c++)o.push(e.jsxs(p,{value:c,dense:!0,children:["Lv ",c]},c));const i=a.useCallback(c=>{t(parseInt(c.target.value,10))},[t]);return e.jsxs(fo,{children:[e.jsx("span",{style:{marginRight:"1rem"},children:l(`skills.${n.skill}`)}),e.jsx(ce,{variant:"standard",size:"small",select:!0,value:s,slotProps:{select:{MenuProps:{sx:{height:"400px"},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}}},onChange:i,children:o})]})}),fo=S("div")({"& .MuiSelect-select":{paddingTop:"1px",paddingBottom:"1px",fontSize:"0.9rem"}}),jo=S(K)({"&":{padding:0,marginLeft:"6px","& > svg":{width:"20px",height:"20px",color:"#bbb","&.error":{color:"#ed6c02",animation:"redglow 0.6s ease-out infinite normal"}}},"@keyframes redglow":{"0%":{transform:"scale(0.9)"},"100%":{transform:"scale(1.1)"}}}),ee=a.memo(({isError:n,onClick:s})=>e.jsxs(jo,{onClick:s,children:[!n&&e.jsx(Ve,{}),n&&e.jsx(jr,{className:"error"})]})),bo=a.memo(({value:n,onChange:s})=>{const{t}=B(),l=a.useCallback(r=>{s(parseInt(r,10))},[s]);return e.jsxs(ue,{value:n,onChange:l,children:[e.jsx(p,{value:0,children:t("200 hours-")}),e.jsx(p,{value:1,children:t("200 hours+")}),e.jsx(p,{value:2,children:t("500 hours+")}),e.jsx(p,{value:3,children:t("1000 hours+")}),e.jsx(p,{value:4,children:t("2000 hours+")})]})}),ko=S("div")({margin:"0 0.3rem 0 0.3rem",fontSize:".9rem","& > div.table":{width:"100%",display:"grid",gap:"clamp(.3rem, 0.7vh, .5rem) .8rem",gridTemplateColumns:"fit-content(200px) 1fr"},"& > h3":{margin:"clamp(0.7rem, 1.8vh, 1rem) 0 .3rem -.3rem",fontSize:".8rem",padding:".1rem .5rem",background:"#557799",borderRadius:"0.4rem",color:"white"}}),ht=a.memo(({pokemonIv:n,fixMode:s,onChange:t})=>{const{t:l}=B(),r=a.useCallback(y=>{t(n.clone(y))},[n,t]),o=a.useCallback(y=>{const E=n.changeLevel(y);t(E)},[n,t]),i=a.useCallback(y=>{const E=n.clone();E.skillLevel=y,t(E)},[n,t]),c=a.useCallback(y=>{const E=n.changeSubSkills(y.value);t(E)},[n,t]),d=a.useCallback(y=>{const E=n.clone();E.nature=y,t(E)},[n,t]),u=a.useCallback(y=>{const E=n.clone();E.ribbon=y,t(E)},[n,t]),[x,h]=a.useState(!1),m=a.useCallback(()=>{h(!0)},[h]),g=a.useCallback(()=>{h(!1)},[h]),[b,f]=a.useState(!1),j=a.useCallback(()=>{f(!0)},[]),k=a.useCallback(()=>{f(!1)},[]),v=new tn(n);return e.jsxs(ko,{children:[e.jsxs("div",{className:"table",children:[e.jsxs("div",{children:[l("pokemon"),":"]}),e.jsx(ro,{iv:n,fixMode:s,onChange:r,onCandyClick:j}),e.jsxs("div",{children:[l("level"),":"]}),e.jsx(Ei,{max100:!0,value:n.level,onChange:o}),e.jsxs("div",{children:[l("ingredient"),":"]}),e.jsx(mo,{iv:n,onChange:t}),e.jsxs("div",{children:[l("frequency"),":"]}),e.jsxs("div",{children:[gt(v.frequency,l),v.frequency>0&&e.jsx(ee,{onClick:m}),e.jsx(vo,{rp:v,iv:n,open:x,onClose:g})]}),e.jsxs("div",{children:[l("carry limit"),":"]}),n.carryLimit]}),e.jsx("h3",{children:l("Main Skill & Sub Skills")}),e.jsx(po,{pokemon:v.pokemon,value:n.skillLevel,onChange:i}),e.jsx(ti,{value:n.subSkills,onChange:c}),e.jsx("h3",{className:"nature",children:l("additional stats")}),e.jsx(ci,{iv:n,onChange:d}),e.jsxs("div",{style:{marginTop:".7rem"},children:[e.jsxs("span",{style:{paddingRight:"0.7rem"},children:[l("sleeping time shared"),":"]}),e.jsx(bo,{value:n.ribbon,onChange:u})]}),e.jsx(mt,{iv:n,open:b,onChange:t,onClose:k})]})}),yo=S(G)({"& div.MuiPaper-root":{margin:"20px"},"& article":{margin:"1rem",display:"grid",gridTemplateColumns:"max-content 1fr",gridGap:"1rem",rowGap:"0.5rem",fontSize:"0.9rem",alignItems:"start","& > span.energy":{display:"flex",alignItems:"center"}},"& section":{margin:"0.5rem 1rem 0 1rem","& div.line":{fontSize:".9rem",paddingBottom:2,display:"flex",flex:"0 auto",alignItems:"center","& > label":{"&.indent":{paddingLeft:"1rem"},marginRight:"auto"},"& > div":{paddingLeft:".5rem","& > button":{padding:"2px 7px"}}},"& button.MuiToggleButton-root":{lineHeight:1.3,textTransform:"none"}}}),vo=a.memo(({rp:n,iv:s,open:t,onClose:l})=>{const{t:r}=B(),[o,i]=a.useState(0),[c,d]=a.useState(!1),[u,x]=a.useState(0),[h,m]=a.useState(0),[g,b]=a.useState(!1),[f,j]=a.useState(2),[k,v]=a.useState(0),[y,E]=a.useState("frequency"),C=a.useCallback((_,V)=>{V!==null&&i(parseInt(V,10))},[]),F=a.useCallback(_=>{d(_.target.checked)},[]),A=a.useCallback((_,V)=>{V!==null&&x(parseInt(V,10))},[]),T=a.useCallback((_,V)=>{V!==null&&m(parseInt(V,10))},[]),I=a.useCallback(_=>{b(_.target.checked)},[]),N=a.useCallback((_,V)=>{V!==null&&j(parseInt(V,10))},[]),H=a.useCallback((_,V)=>{V!==null&&v(parseInt(V,10))},[]),Z=a.useCallback((_,V)=>{V!==null&&E(V)},[]);if(!t)return e.jsx(e.Fragment,{});const D=n.getBaseFrequency(o,c,g&&f===0,g&&f===2),L=_=>{switch(y){case"frequency":return gt(Math.floor(D*_),r);case"count":return r("help count per hour",{n:(3600/D/_).toFixed(2)});case"full":{const be=Math.ceil(s.carryLimit*(c?1.2:1))/n.getBagUsagePerHelp(u,h,g&&f!==2&&k===1)*D*_/60;return new _e(be).toString(r)}}return""},P=L(1),z=L(.66),O=L(.58),U=L(.52),Q=L(.45);return e.jsxs(yo,{open:t,onClose:l,children:[e.jsxs("article",{children:[e.jsxs("span",{className:"energy",children:[e.jsx(Le,{energy:100}),"81",r("range separator"),"150"]}),e.jsx("span",{children:Q}),e.jsxs("span",{className:"energy",children:[e.jsx(Le,{energy:80}),"61",r("range separator"),"80"]}),e.jsx("span",{children:U}),e.jsxs("span",{className:"energy",children:[e.jsx(Le,{energy:60}),"41",r("range separator"),"60"]}),e.jsx("span",{children:O}),e.jsxs("span",{className:"energy",children:[e.jsx(Le,{energy:40}),"1",r("range separator"),"40"]}),e.jsx("span",{children:z}),e.jsxs("span",{className:"energy",children:[e.jsx(Le,{energy:20}),"0"]}),e.jsx("span",{children:P})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[r("helping bonus"),":"]}),e.jsxs(X,{size:"small",exclusive:!0,value:o,onChange:C,children:[e.jsx(R,{value:0,children:"0"}),e.jsx(R,{value:1,children:"1"}),e.jsx(R,{value:2,children:"2"}),e.jsx(R,{value:3,children:"3"}),e.jsx(R,{value:4,children:"4"}),e.jsx(R,{value:5,children:"5"})]})]}),e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[r("good camp ticket"),":"]}),e.jsx(se,{checked:c,onChange:F})]}),e.jsxs(oe,{in:y==="full",children:[e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[r("berry bonus from event"),":"]}),e.jsxs(X,{size:"small",exclusive:!0,value:u,onChange:A,children:[e.jsx(R,{value:0,children:r("none")}),e.jsx(R,{value:1,children:"+1"})]})]}),e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[r("ingredient bonus from event"),":"]}),e.jsxs(X,{size:"small",exclusive:!0,value:h,onChange:T,children:[e.jsx(R,{value:0,children:r("none")}),e.jsx(R,{value:1,children:"+1"})]})]})]}),e.jsxs("div",{className:"line",children:[e.jsxs("label",{children:[r("expert mode"),":"]}),e.jsx(se,{checked:g,onChange:I})]}),e.jsx(oe,{in:g,children:e.jsxs("div",{className:"line",children:[e.jsxs("label",{className:"indent",children:[r("berry"),":"]}),e.jsxs(X,{size:"small",exclusive:!0,value:f,onChange:N,children:[e.jsx(R,{value:0,children:r("main")}),e.jsx(R,{value:1,children:r("sub")}),e.jsx(R,{value:2,children:r("others")})]})]})}),e.jsx(oe,{in:g&&f!==2&&y==="full",children:e.jsxs("div",{className:"line",children:[e.jsxs("label",{className:"indent",children:[r("expert effect"),":"]}),e.jsxs(X,{size:"small",exclusive:!0,value:k,onChange:H,children:[e.jsx(R,{value:1,children:r("expert ing effect")}),e.jsx(R,{value:0,children:r("others")})]})]})}),e.jsx("div",{className:"line",children:e.jsxs("label",{children:[r("value"),":"]})}),e.jsx("div",{className:"value",children:e.jsxs(X,{exclusive:!0,size:"small",value:y,onChange:Z,children:[e.jsx(R,{value:"frequency",children:r("frequency")}),e.jsx(R,{value:"count",children:r("help count")}),e.jsx(R,{value:"full",children:r("time to full inventory")})]})})]}),e.jsx(W,{children:e.jsx(M,{onClick:l,children:r("close")})})]})});function gt(n,s){const t=Math.floor(n/3600),l=Math.floor(n/60%60),r=Math.floor(n%60);return s("freq hhmmss",{h:t,m:l,s:r})}const pt=a.memo(({value:n,dispatch:s})=>{const{t}=B(),l=a.useCallback(r=>{s({type:"changeParameter",payload:{parameter:{...n,period:parseInt(r,10)}}})},[s,n]);return e.jsxs(ue,{onChange:l,value:n.period,menuSx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(p,{value:1,dense:!0,children:t("1hour")}),e.jsx(p,{value:3,dense:!0,children:t("3hours")}),e.jsx(p,{value:8,dense:!0,children:t("8hours")}),e.jsx(p,{value:16,dense:!0,children:t("16hours")}),e.jsx(p,{value:24,dense:!0,children:t("1day")}),e.jsx(p,{value:168,dense:!0,children:t("1week")}),e.jsx(Ne,{style:{gridColumn:"1 / -1"}}),e.jsx(p,{value:-10,dense:!0,children:t("help x10")}),e.jsx(p,{value:-30,dense:!0,children:t("help x30")}),e.jsx(p,{value:-100,dense:!0,children:t("help x100")}),e.jsx(p,{value:Ee,dense:!0,children:t("whistle")})]})}),ft=a.memo(({open:n,value:s,onClose:t,onChange:l})=>{const{t:r}=B(),[o,i]=a.useState(s.customEventBonus?.target?.type??["normal"]),[c,d]=a.useState(s.customEventBonus?.target?.specialty??"Berries"),u=a.useCallback(I=>{const N=I.target.value,H=ys.getBonusByName(N);if(H===void 0){l({...s,event:"custom",customEventBonus:{target:{},effects:$t({})}});return}Array.isArray(H.target.type)&&i(H.target.type),typeof H.target.specialty<"u"&&d(H.target.specialty),l({...s,event:H.name,customEventBonus:{target:H.target,effects:H.effects}})},[s,l]),x=a.useCallback((I,N)=>{if(N===null)return;const H={};switch(N){case"type":H.type=o;break;case"specialty":H.specialty=c;break}l({...s,event:"custom",customEventBonus:{...s.customEventBonus,target:H}})},[o,c,s,l]),h=a.useCallback(I=>{i(I),l({...s,event:"custom",customEventBonus:{...s.customEventBonus,target:{type:I}}})},[s,l]),m=a.useCallback(I=>{d(I),l({...s,event:"custom",customEventBonus:{...s.customEventBonus,target:{specialty:I}}})},[s,l]),g=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,skillTrigger:N}}})},[s,l]),b=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,skillLevel:N}}})},[s,l]),f=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,berry:N}}})},[s,l]),j=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,ingredient:N}}})},[s,l]),k=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,dreamShard:N}}})},[s,l]),v=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,ingredientMagnet:N}}})},[s,l]),y=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,ingredientDraw:N}}})},[s,l]),E=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,berryBurst:N}}})},[s,l]),C=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,dish:N}}})},[s,l]),F=a.useCallback((I,N)=>{N!==null&&l({...s,event:"custom",customEventBonus:{...s.customEventBonus,effects:{...s.customEventBonus.effects,energyFromDish:N}}})},[s,l]);if(!n)return e.jsx(e.Fragment,{});const A=ys.bonus.map(I=>e.jsx(p,{value:I.name,children:r("events."+I.name)},I.name));A.unshift(e.jsx(p,{value:"custom",children:r("events.custom")},"custom"));const T=typeof s.customEventBonus.target.type<"u"?"type":typeof s.customEventBonus.target.specialty<"u"?"specialty":"all";return e.jsxs(Co,{open:n,onClose:t,children:[e.jsx("header",{children:e.jsxs("section",{children:[e.jsxs("label",{children:[r("event"),":"]}),e.jsx(ce,{value:s.event,onChange:u,slotProps:{select:{MenuProps:{PaperProps:{sx:{"& .MuiMenuItem-root":{minHeight:"32px",fontSize:"0.875rem",py:.5}}}}}},select:!0,size:"small",variant:"standard",children:A})]})}),e.jsxs("article",{children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("target"),":"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:T,onChange:x,children:[e.jsx(R,{value:"all",children:r("all")}),e.jsx(R,{value:"type",children:r("type")}),e.jsx(R,{value:"specialty",children:r("specialty")})]})})]}),e.jsx(oe,{in:typeof s.customEventBonus.target.type<"u",sx:{textAlign:"right"},children:e.jsx(So,{onChange:h,value:o})}),e.jsxs(oe,{in:typeof s.customEventBonus.target.specialty<"u",sx:{textAlign:"right"},children:[e.jsx(Be,{specialty:"Berries",onClick:m,checked:c==="Berries"}),e.jsx(Be,{specialty:"Ingredients",onClick:m,checked:c==="Ingredients"}),e.jsx(Be,{specialty:"Skills",onClick:m,checked:c==="Skills"})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("berry"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.berry,onChange:f,children:[e.jsx(R,{value:0,children:r("none")}),e.jsx(R,{value:1,children:"+1"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("ingredient"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.ingredient,onChange:j,children:[e.jsx(R,{value:0,children:r("none")}),e.jsx(R,{value:1,children:"+1"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("skill rate"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.skillTrigger,onChange:g,children:[e.jsx(R,{value:1,children:"×1"}),e.jsx(R,{value:1.25,children:"×1.25"}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("skill level"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.skillLevel,onChange:b,children:[e.jsx(R,{value:0,children:r("none")}),e.jsx(R,{value:1,children:"+1"}),e.jsx(R,{value:3,children:"+3"}),e.jsx(R,{value:5,children:"+5"})]})})]})]}),e.jsxs("article",{className:"transparent",children:[e.jsxs("section",{children:[e.jsxs("label",{children:[r("skills.Dream Shard Magnet S"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.dreamShard,onChange:k,children:[e.jsx(R,{value:1,children:r("none")}),e.jsx(R,{value:1.5,children:"×1.5"}),e.jsx(R,{value:2,children:"×2"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("skills.Ingredient Magnet S"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.ingredientMagnet,onChange:v,children:[e.jsx(R,{value:1,children:r("none")}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("skills.Ingredient Draw S"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.ingredientDraw,onChange:y,children:[e.jsx(R,{value:1,children:r("none")}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("skills.Berry Burst"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.berryBurst,onChange:E,children:[e.jsx(R,{value:1,children:r("none")}),e.jsx(R,{value:1.4,children:"×1.4"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("dish"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.dish,onChange:C,children:[e.jsx(R,{value:1,children:r("none")}),e.jsx(R,{value:1.1,children:"×1.1"}),e.jsx(R,{value:1.25,children:"×1.25"}),e.jsx(R,{value:1.5,children:"×1.5"})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[r("energy from dish"),":"]}),e.jsx("div",{children:e.jsxs(X,{size:"small",exclusive:!0,style:{textTransform:"none"},value:s.customEventBonus.effects.energyFromDish,onChange:F,children:[e.jsx(R,{value:0,children:r("none")}),e.jsx(R,{value:5,children:"+5"})]})})]})]}),e.jsx(W,{children:e.jsx(M,{onClick:t,children:r("close")})})]})}),Co=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px",maxHeight:"calc(100% - 20px)"},"& .MuiPaper-root":{width:"100%","& > header, & > article":{margin:"0.8rem 0.8rem 0 0.8rem","& > section":{display:"flex",flex:"0 auto",fontSize:".85rem",marginTop:"0.5rem","&:first-of-type":{marginTop:0},"& > label":{marginRight:"auto",marginTop:0},"& > div":{}}},"& .MuiSelect-select":{fontSize:"0.8rem"},"& > article":{background:"#f0f0f0",padding:"0.5rem",borderRadius:"0.9rem","& button.MuiToggleButtonGroup-grouped":{padding:"0.2rem 0.4rem",background:"transparent"},"& button.MuiToggleButtonGroup-grouped.Mui-selected":{background:"rgba(0, 0, 0, 0.08)"}},"& > article.transparent":{marginTop:0,background:"transparent"}}}),So=a.memo(({value:n,onChange:s})=>{const t=a.useCallback((i,c)=>{const d=[...n];d[i]=c,s(d)},[n,s]),l=a.useCallback(i=>{const c=[...n];c.splice(i,1),s(c)},[n,s]),r=a.useCallback(()=>{const i=[...n];i.push(De.find(c=>!n.includes(c))??"normal"),s(i)},[n,s]),o=n.map((i,c)=>e.jsx(He,{type:i,size:"small",deletable:n.length>1,onChange:d=>t(c,d),onDelete:()=>l(c)},c));return e.jsxs(e.Fragment,{children:[o,o.length<3&&e.jsx(K,{size:"small",onClick:r,children:e.jsx(Xs,{fontSize:"small"})})]})}),Io=S("div")({padding:"0 1rem",marginBottom:"10rem","& section":{margin:"0.2rem 0",fontSize:".9rem",display:"flex",flex:"0 auto","&.mt":{marginTop:"1rem"},"& > label":{marginRight:"auto",marginTop:0,textWrap:"nowrap"},"& > span > button":{marginRight:0},"& > .MuiInput-underline":{fontSize:"0.9rem"},"& div.MuiToggleButtonGroup-root > button":{fontSize:"0.75rem",padding:"0.5rem 0.2rem",lineHeight:1.1,maxWidth:"7rem"}},"& > button":{marginLeft:"-.4rem"}}),wo=a.memo(({dispatch:n,value:s,hasHelpingBonus:t})=>{const{t:l}=B(),[r,o]=a.useState(!1),[i,c]=a.useState(!1),[d,u]=a.useState(!1),x=a.useCallback(()=>{o(!0)},[]),h=a.useCallback(()=>{o(!1)},[]),m=a.useCallback(P=>{n({type:"changeParameter",payload:{parameter:P}})},[n]),g=a.useCallback(P=>{m({...s,helpBonusCount:parseInt(P.target.value,10)})},[m,s]),b=a.useCallback(P=>{m({...s,evolved:P.target.checked})},[m,s]),f=a.useCallback(P=>{m({...s,maxSkillLevel:P.target.checked})},[m,s]),j=a.useCallback((P,z)=>{z!==null&&(z==="advanced"&&(z="custom"),m({...s,event:z}))},[m,s]),k=a.useCallback(()=>{c(!0)},[]),v=a.useCallback(()=>{c(!1)},[]),y=a.useCallback(P=>{m({...s,tapFrequency:P.target.value})},[m,s]),E=a.useCallback(P=>{m({...s,tapFrequencyAsleep:P.target.value})},[m,s]),C=a.useCallback(()=>{n({type:"openEnergyDialog"})},[n]),F=a.useCallback(P=>{m({...s,recipeBonus:parseInt(P.target.value)})},[m,s]),A=a.useCallback(P=>{m({...s,recipeLevel:parseInt(P.target.value)})},[m,s]),T=a.useCallback(()=>{u(!0)},[]),I=a.useCallback(()=>{u(!1)},[]),N=Vs(new Date).map(P=>P.name).reverse();let H="";const Z=["none",...N,"advanced"].map(P=>{let z=l(`events.${P}`);return H.replace(/\(.*/,"")===z.replace(/\(.*/,"")&&(z=z.replace(/.*\(/,"").replace(")","")),H=z,e.jsx(R,{value:P,style:{textTransform:"none"},children:z},P)}),D=["none",...N].includes(s.event)?s.event:"advanced",L=s.period!==Ee;return e.jsxs(Io,{children:[e.jsxs("section",{children:[e.jsxs("label",{children:[l("period"),":"]}),e.jsx(pt,{dispatch:n,value:s})]}),e.jsx(at,{value:s,onChange:m}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[l("event"),":"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(X,{size:"small",exclusive:!0,value:D,onChange:j,children:Z}),e.jsx(oe,{in:D==="advanced",children:e.jsx(M,{onClick:k,children:l("configure event details")})})]})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[l("level"),":"]}),e.jsx(hs,{dispatch:n,value:s})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("calc with evolved"),":"]}),e.jsx(se,{checked:s.evolved,onChange:b})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("calc with max skill level"),":"]}),e.jsx(se,{checked:s.maxSkillLevel,onChange:f})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[l("helping bonus"),":"]}),e.jsxs(re,{variant:"standard",value:s.helpBonusCount.toString(),onChange:g,children:[e.jsx(p,{value:0,children:t?"×1":l("none")}),e.jsx(p,{value:1,children:t?"×2":"×1"}),e.jsx(p,{value:2,children:t?"×3":"×2"}),e.jsx(p,{value:3,children:t?"×4":"×3"}),e.jsx(p,{value:4,children:t?"×5":"×4"})]})]}),e.jsxs(oe,{in:L,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[l("tap frequency")," (",l("awake"),"):"]}),e.jsxs(re,{variant:"standard",value:s.tapFrequency,onChange:y,children:[e.jsx(p,{value:"always",children:l("every minute")}),e.jsx(p,{value:"none",children:l("none")})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("tap frequency")," (",l("asleep"),"):"]}),s.tapFrequency==="none"?e.jsx("span",{style:{fontSize:"0.9rem"},children:l("none")}):e.jsxs(re,{variant:"standard",value:s.tapFrequencyAsleep,onChange:E,children:[e.jsx(p,{value:"always",children:l("every minute")}),e.jsx(p,{value:"none",children:l("none")})]})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[l("energy"),":"]}),e.jsx(M,{onClick:C,children:l("edit")})]})]}),e.jsxs("section",{className:"mt",children:[e.jsxs("label",{children:[l("recipe bonus"),":",e.jsx(ee,{onClick:x})]}),e.jsx(cs,{size:"small",children:e.jsxs(re,{variant:"standard",value:s.recipeBonus.toString(),onChange:F,children:[e.jsxs(p,{value:0,children:["0% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(",l("mixed recipe"),")"]})]}),e.jsxs(p,{value:19,children:["19% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(7",l("range separator"),"16 ",l("ingredients unit"),")"]})]}),e.jsxs(p,{value:20,children:["20% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(20",l("range separator"),"22 ",l("ingredients unit"),")"]})]}),e.jsxs(p,{value:21,children:["21% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(23",l("range separator"),"26 ",l("ingredients unit"),")"]})]}),e.jsxs(p,{value:25,children:["25% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(17",l("range separator"),"35 ",l("ingredients unit"),")"]})]}),e.jsxs(p,{value:35,children:["35% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(35",l("range separator"),"56 ",l("ingredients unit"),")"]})]}),e.jsxs(p,{value:48,children:["48% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(49",l("range separator"),"77 ",l("ingredients unit"),")"]})]}),e.jsxs(p,{value:61,children:["61% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(78",l("range separator"),"102 ",l("ingredients unit"),")"]})]}),e.jsxs(p,{value:78,children:["78% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(103",l("range separator"),"115 ",l("ingredients unit"),")"]})]})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[l("average recipe level"),":"]}),e.jsxs(re,{variant:"standard",value:s.recipeLevel.toString(),onChange:A,children:[e.jsx(p,{value:1,children:"1"}),e.jsx(p,{value:10,children:"10"}),e.jsx(p,{value:20,children:"20"}),e.jsx(p,{value:30,children:"30"}),e.jsx(p,{value:40,children:"40"}),e.jsx(p,{value:50,children:"50"}),e.jsx(p,{value:55,children:"55"}),e.jsx(p,{value:60,children:"60"}),e.jsx(p,{value:65,children:"65"})]})]}),e.jsx("section",{className:"mt",children:e.jsx(M,{onClick:T,variant:"outlined",children:l("initialize all parameters")})}),e.jsx(To,{open:d,onClose:I,dispatch:n}),e.jsx(Bo,{open:r,onClose:h}),e.jsx(ft,{open:i,onClose:v,value:s,onChange:m})]})}),Bo=a.memo(({open:n,onClose:s})=>{const{t}=B();return e.jsxs(G,{open:n,onClose:s,children:[e.jsxs(J,{children:[e.jsx(pe,{sx:{marginBottom:"16px"},children:e.jsx(Y,{i18nKey:"recipe bonus help",components:{raenonx:e.jsx("a",{href:t("recipe bonus list"),children:"raenonx"})}})}),e.jsx(pe,{variant:"body2",children:t("recipe strength help")})]}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:t("close")})})]})}),To=a.memo(({dispatch:n,open:s,onClose:t})=>{const[l,r]=a.useState(!1),{t:o}=B(),i=a.useCallback(()=>{n({type:"changeParameter",payload:{parameter:Hs({})}}),r(!0),t()},[n,t]),c=a.useCallback(()=>{r(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:s,onClose:t,children:[e.jsx(ae,{children:o("initialize all parameters")}),e.jsx(J,{children:e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:o("initialize all parameters message")})}),e.jsxs(W,{children:[e.jsx(M,{onClick:i,color:"error",children:o("reset")}),e.jsx(M,{onClick:t,children:o("cancel")})]})]}),e.jsx(Me,{open:l,autoHideDuration:2e3,onClose:c,message:o("initialized all parameters")})]})}),No=S("div")({display:"grid",gridTemplateColumns:"4.8rem 1fr",marginLeft:"0.8rem",marginBottom:".4rem","& header":{marginTop:".7rem","&:first-of-type":{marginTop:0},gridColumn:"1 / -1",fontSize:"1rem","& > span":{display:"inline-block",width:"4rem",fontSize:".6rem",padding:".1rem 0",textAlign:"center",color:"white",borderRadius:".6rem",verticalAlign:"20%"},"& > div":{width:"4.5rem",textAlign:"right",fontWeight:800,display:"inline-block",color:"#555","& > span":{fontSize:"0.7rem",paddingLeft:".2rem"}},"& > button":{padding:0,marginLeft:"6px","& > svg":{width:"20px",height:"20px",color:"#bbb"}}},"& footer":{fontSize:"0.7rem",color:"#666","& > svg":{verticalAlign:"baseline",paddingLeft:".5rem","&:first-of-type":{paddingLeft:0},"&.MuiSvgIcon-root":{width:"1rem",height:"1rem",verticalAlign:"top",paddingRight:0}},"&.ings > svg.MuiSvgIcon-root":{width:".8rem",height:".8rem",paddingRight:"0.2rem"}}}),jt=a.memo(n=>{const{t:s}=B();return e.jsxs(No,{children:[e.jsxs("header",{children:[e.jsx("span",{style:{background:"#24d76a"},children:s("berry")}),e.jsx("div",{children:n.berryValue}),n.onBerryInfoClick!==void 0&&e.jsx(ee,{onClick:n.onBerryInfoClick})]}),e.jsxs("footer",{children:[s("probability"),": ",n.berryProb,"%"]}),e.jsx("footer",{children:n.berrySubValue}),e.jsxs("header",{children:[e.jsx("span",{style:{background:"#fab855"},children:s("ingredient")}),e.jsx("div",{children:n.ingredientValue}),n.onIngredientInfoClick!==void 0&&e.jsx(ee,{onClick:n.onIngredientInfoClick})]}),e.jsxs("footer",{children:[s("probability"),": ",n.ingredientProb,"%"]}),e.jsx("footer",{className:"ings",children:n.ingredientSubValue}),e.jsxs("header",{children:[e.jsx("span",{style:{background:"#44a2fd"},children:s("skill")}),e.jsx("div",{children:n.skillValue}),n.onSkillInfoClick!==void 0&&e.jsx(ee,{onClick:n.onSkillInfoClick})]}),e.jsxs("footer",{children:[s("probability"),": ",n.skillProb,"%"]}),e.jsx("footer",{children:n.skillSubValue})]})}),bt=a.memo(({berry:n,ingredient:s,skill:t,width:l,height:r,specialty:o})=>{const u=Math.min(300,l-15-69.28),x=o==="Berries"?"#24d76a":o==="Ingredients"?"#fab855":o==="Skills"?"#44a2fd":"#e28197";return e.jsx("svg",{width:l,height:r,viewBox:`0 0 ${l} ${r}`,style:{position:"absolute",top:"-45px",left:"-0.5rem",pointerEvents:"none"},children:e.jsxs("g",{transform:`translate(${u}, 210)`,children:[e.jsx(Mo,{r:80}),e.jsx(Eo,{r:80,berry:n,ingredient:s,skill:t,color:x})]})})}),Mo=a.memo(({r:n})=>{const{t:s}=B(),t=0,l=-n,r=-n*1.732/2,o=n/2,i=-r,c=o,d=1/4,u=1/2,x=3/4;return e.jsxs(e.Fragment,{children:[e.jsxs("g",{fill:"#666",fontSize:"70%",children:[e.jsx("text",{textAnchor:"middle",x:t,y:l-10,children:s("berry")}),e.jsx("text",{textAnchor:"end",dominantBaseline:"hanging",x:r+15,y:o+5,children:s("skill")}),e.jsx("text",{textAnchor:"end",dominantBaseline:"hanging",x:i+5,y:c+5,children:s("ingredient")})]}),e.jsxs("g",{stroke:"#ccc",fill:"none",children:[e.jsx("polygon",{points:`${t*u},${l*u},${r*u},${o*u},${i*u},${c*u}`}),e.jsx("polygon",{points:`${t},${l},${r},${o},${i},${c}`})]}),e.jsxs("g",{stroke:"#eee",fill:"none",children:[e.jsx("polygon",{points:`${t*d},${l*d},${r*d},${o*d},${i*d},${c*d}`}),e.jsx("polygon",{points:`${t*x},${l*x},${r*x},${o*x},${i*x},${c*x}`})]}),e.jsxs("g",{stroke:"#999",children:[e.jsx("line",{x1:"0",y1:"0",x2:t,y2:l}),e.jsx("line",{x1:"0",y1:"0",x2:r,y2:o}),e.jsx("line",{x1:"0",y1:"0",x2:i,y2:c})]})]})}),Eo=a.memo(({r:n,berry:s,ingredient:t,skill:l,color:r})=>{s=s*n,t=t*n,l=l*n;const o=0,i=-s,c=-1.732/2*l,d=l/2,u=1.732/2*t,x=t/2;return e.jsx(e.Fragment,{children:e.jsx("g",{stroke:r,strokeWidth:2,fill:r,fillOpacity:"0.3",children:e.jsx("polygon",{points:`${o},${i},${c},${d},${u},${x}`})})})}),kt=a.memo(({rp:n,iv:s,showIcon:t,isError:l,onClick:r})=>{const{t:o}=B(),i=s.level>he,c=a.useCallback(()=>{r!==void 0&&r()},[r]);return e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"start"},children:[e.jsx("span",{style:{color:"#fd775d",fontWeight:"bold",paddingRight:".4rem",fontSize:".8rem",display:"inline-block",transform:"scale(1, 0.9)"},children:o("rp")}),e.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"bold",display:"inline-block",transform:"scale(1, 0.9)"},children:o("num",{n})}),i&&e.jsx("span",{style:{border:"1px solid red",background:"#ffeeee",color:"red",fontSize:"0.7rem",borderRadius:"0.5rem",marginLeft:".5rem",padding:"0 0.3rem"},children:o("estimated value")}),t&&e.jsx(ee,{onClick:c,isError:l})]})}),Fo=a.memo(({state:n,width:s})=>{const{t}=B(),[l,r]=a.useState(!1),[o,i]=a.useState(!1),[c,d]=a.useState("berry"),u=a.useCallback(()=>{r(!0)},[]),x=a.useCallback(()=>{r(!1)},[]),h=a.useCallback(()=>{i(!0),d("berry")},[i]),m=a.useCallback(()=>{i(!0),d("ingredient")},[i]),g=a.useCallback(()=>{i(!0),d("skill")},[i]),b=a.useCallback(()=>{i(!1)},[i]),f=n.pokemonIv,j=new tn(f),k=j.calculate(),v=Hs({helpBonusCount:f.hasHelpingBonusInActiveSubSkills?1:0}),y=new ss(f,v).calculate(),E=j.pokemon,C=400,F=n.lowerTabIndex===1&&n.selectedItemId>=0&&(n.parameter.level>0||n.parameter.fieldIndex>=0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(kt,{rp:k.rp,iv:f,showIcon:!0,isError:F,onClick:u}),e.jsx(jt,{berryValue:$(k.berryRp),berryProb:$(j.berryRatio*100),berrySubValue:e.jsxs(e.Fragment,{children:[e.jsx(le,{sx:{color:"#ff944b",width:"1rem",height:"1rem"}}),q(Math.round(y.berryTotalStrength))]}),onBerryInfoClick:h,ingredientValue:$(k.ingredientRp),ingredientProb:$(j.ingredientRatio*100),ingredientSubValue:e.jsx(e.Fragment,{children:y.ingredients.map(A=>e.jsxs(a.Fragment,{children:[e.jsx(je,{name:A.name}),$(A.count)]},A.name))}),onIngredientInfoClick:m,skillValue:$(k.skillRp),skillProb:$(j.skillRatio*100),skillSubValue:y.skillCount.toFixed(2)+t("times unit"),onSkillInfoClick:g}),e.jsx(zo,{isError:F,open:l,onClose:x}),e.jsx(Do,{open:o,onClose:b,rp:j,rpResult:k,rpType:c})]}),e.jsx(bt,{width:s,height:C,specialty:E.specialty,berry:k.berryRp/2e3,ingredient:k.ingredientRp/2e3,skill:k.skillRp/2e3})]})}),zo=a.memo(({isError:n,open:s,onClose:t})=>{const{t:l}=B();return s?n?e.jsxs(Ds,{open:s,onClose:t,children:[e.jsx("article",{children:l("go to strength tab to show the current condition values")}),e.jsx(W,{children:e.jsx(M,{onClick:t,children:l("close")})})]}):e.jsxs(Ds,{open:s,onClose:t,children:[e.jsxs("article",{children:[e.jsx("h2",{children:l("rp")}),e.jsx("p",{children:e.jsx(Y,{i18nKey:"rp formula",components:{link:e.jsx("a",{href:l("rp formula doc url"),children:l("rp formula doc title")})}})}),e.jsx("p",{children:l("estimated beyond level",{level:he})}),e.jsx("h2",{children:l("strength, ingredients, skill count")}),e.jsx("p",{children:l("the amount under the following condition")}),e.jsxs("ul",{children:[e.jsxs("li",{children:[l("period"),": ",l("1day")]}),e.jsxs("li",{children:[l("favorite berry"),": ",l("none")]}),e.jsxs("li",{children:[l("good camp ticket"),": ",l("none")]}),e.jsxs("li",{children:[l("area bonus"),": 0%"]}),e.jsxs("li",{children:[l("helping bonus other pokemon"),": ",l("none")]}),e.jsxs("li",{children:[l("skills.Energy for Everyone S"),": 18 × 3"]}),e.jsxs("li",{children:[l("sleep score"),": 100"]}),e.jsxs("li",{children:[l("tap frequency")," (",l("awake"),"): ",l("every minute")]}),e.jsxs("li",{children:[l("tap frequency")," (",l("asleep"),"): ",l("none")]})]}),e.jsx("p",{children:l("use strength tab if you want to change these condition")}),e.jsx("p",{children:l("estimated beyond level",{level:he})})]}),e.jsx(W,{children:e.jsx(M,{onClick:t,children:l("close")})})]}):e.jsx(e.Fragment,{})}),Ds=S(G)({"& article":{margin:"1rem 1rem 0 1rem","& > h2":{fontSize:"1rem",margin:"0.8rem 0 0 0",lineHeight:1.2,"&:first-of-type":{margin:0}},"& > p":{fontSize:"0.8rem",margin:"0.3rem 0"},"& > ul":{margin:"0.5rem 0",padding:"0 0 0 1.5rem","& > li":{margin:"0.2rem 0",fontSize:"0.8rem"}}}}),Ro=S(G)({"& header":{margin:"1rem","& > h1":{fontSize:"1.5rem",margin:0,"& > span":{fontWeight:400,display:"inline-block",width:"4rem",fontSize:".6rem",padding:".1rem 0",textAlign:"center",color:"white",borderRadius:".6rem",verticalAlign:"50%"},"& > strong":{paddingLeft:"0.5rem"}},"& > h2":{display:"inline-block",fontWeight:"normal",fontSize:"0.9rem",margin:"0.3rem 0 0 0.5rem",lineHeight:"1.9"}},"& article":{margin:"1rem .5rem 0 .5rem",display:"grid",gridGap:".5rem",rowGap:".8rem",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem","& > div":{textAlign:"right"}},"& footer":{margin:"1rem 1rem 0 1rem",fontSize:"0.8rem","& > p":{margin:".5rem 0 0 0"}},"& span.box":{borderRadius:".3rem",padding:".1rem .4rem",margin:"0",color:"white",textAlign:"center"},"& span.box1":{background:"#1ebee1"},"& span.box2":{background:"#27c18e"},"& span.box3":{background:"#e7c300"},"& span.box4":{background:"#ce5052"},"& span.box5":{background:"#ce3fa3"}}),Do=a.memo(({open:n,onClose:s,rp:t,rpResult:l,rpType:r})=>{const{t:o}=B();if(!n)return e.jsx(e.Fragment,{});let i="",c="";const d=o(r),u=te(t.helpCountPer5Hour),x=o("helps per 5 hours");let h="",m="",g="",b="",f="",j="";const v=t.bonus.toString();return r==="berry"?(i="#24d76a",c=$(l.berryRp),h=$(t.berryRatio*100)+"%",m=o("berry rate"),g=t.berryStrength.toString(),b=o("berry strength"),f=t.berryCount.toString(),j=o("berry count")):r==="ingredient"?(i="#fab855",c=$(l.ingredientRp),h=$(t.ingredientRatio*100)+"%",m=o("ingredient rate"),g=$(t.ingredientEnergy),b=o("ingredient strength"),f=Et(t.ingredientG),j=o("ingredient factor")):(i="#44a2fd",c=$(l.skillRp),h=$(t.skillRatio*100)+"%",m=o("skill rate"),g=q(t.skillValue),b=o("skill strength")),e.jsxs(Ro,{open:n,onClose:s,children:[e.jsxs("header",{children:[e.jsxs("h1",{children:[e.jsx("span",{style:{background:i},children:d}),e.jsx("strong",{children:c})]}),e.jsxs("h2",{children:[e.jsx("span",{className:"box box1",children:u}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:h}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box3",children:g}),e.jsx(e.Fragment,{children:" × "}),f!==""&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"box box4",children:f}),e.jsx(e.Fragment,{children:" × "})]}),e.jsx("span",{className:"box box5",children:v})]})]}),e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box1",children:u})}),e.jsx("span",{children:x}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:h})}),e.jsx("span",{children:m}),e.jsx("div",{children:e.jsx("span",{className:"box box3",children:g})}),e.jsx("span",{children:b}),f!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:f})}),e.jsx("span",{children:j})]}),e.jsx("div",{children:e.jsx("span",{className:"box box5",children:v})}),e.jsx("span",{children:e.jsx(Y,{i18nKey:"bonus factor",components:{nature:e.jsx(e.Fragment,{children:te(t.energyBonus)}),subskill:e.jsx(e.Fragment,{children:te(t.subSkillBonus)})}})})]}),e.jsxs("footer",{children:[e.jsx("p",{children:e.jsx(Y,{i18nKey:"rp formula",components:{link:e.jsx("a",{href:o("rp formula doc url"),children:o("rp formula doc title")})}})}),e.jsx("p",{children:o("estimated beyond level",{level:he})})]}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:o("close")})})]})}),yt=a.memo(({open:n,onClose:s,iv:t,fieldBonus:l,berryBonus:r})=>{const{t:o}=B();if(!n)return e.jsx(e.Fragment,{});const i=new tn(t).berryStrength,c=Math.ceil(Math.ceil(i*(1+l/100))*r);return e.jsxs(zn,{open:n,onClose:s,PaperProps:{style:{maxWidth:"20rem"}},children:[e.jsxs(ae,{children:[e.jsxs("article",{children:[e.jsx(le,{sx:{color:"#ff944b"}}),q(c)]}),e.jsxs("footer",{children:[e.jsx("span",{className:"box box3",children:i}),e.jsx(e.Fragment,{children:" × "}),"(1 + ",e.jsxs("span",{className:"box box4",children:[l,"%"]}),")",e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box5",children:r})]})]}),e.jsx(J,{children:e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box3",children:i})}),e.jsx("span",{children:o("berry strength")}),e.jsx("div",{children:e.jsxs("span",{className:"box box4",children:[l,"%"]})}),e.jsx("span",{children:o("area bonus")}),e.jsx("div",{children:e.jsx("span",{className:"box box5",children:r})}),e.jsx("span",{children:o("favorite berry")})]})}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:o("close")})})]})}),Ao=a.memo(({open:n,onClose:s,strength:t,result:l})=>{const{t:r}=B(),[o,i]=a.useState(!1),c=a.useCallback(()=>{i(!0)},[]),d=a.useCallback(()=>{i(!1)},[]);if(!n)return e.jsx(e.Fragment,{});const u=t.parameter,x=Math.ceil(l.berryStrength*t.berryStrengthBonus),h=l.bonus.berry>0,m=l.berryCount+l.bonus.berry,g=h?$(l.notFullHelpCount*l.berryRatio):$(l.berryHelpCount);return e.jsxs(zn,{open:n,onClose:s,children:[e.jsxs(ae,{children:[e.jsxs("article",{children:[e.jsx(le,{sx:{color:"#ff944b"}}),q(Math.round(l.berryTotalStrength))]}),e.jsxs("footer",{children:[e.jsx("span",{className:"box box1",children:x}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:m}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box3",children:g}),h&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(e.Fragment,{children:" + "}),e.jsx("span",{className:"box box1",children:x}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:l.berryCount}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box3",children:$(l.fullHelpCount)})]})]})]}),e.jsx(J,{children:e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box1",children:x})}),e.jsxs("span",{children:[r("actual berry strength"),e.jsx(ee,{onClick:c})]}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:m})}),e.jsx("span",{children:r("berry count")}),e.jsx("div",{children:e.jsx("span",{className:"box box3",children:g})}),e.jsxs("span",{children:[r("berry help count"),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx("strong",{children:$(l.notFullHelpCount*l.berryRatio)}),r("times unit"),": ",r("berry picking count"),e.jsxs("footer",{children:[$(l.notFullHelpCount),e.jsxs("small",{children:[" (",r("normal help count"),")"]}),e.jsx(e.Fragment,{children:" × "}),$(l.berryRatio*100),"%",e.jsxs("small",{children:[" (",r("berry rate"),")"]})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:$(l.fullHelpCount)}),r("times unit"),": ",r("sneaky snacking")]})]})]})]})}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:r("close")})}),e.jsx(yt,{open:o,onClose:d,iv:t.pokemonIv,fieldBonus:u.fieldBonus,berryBonus:t.berryStrengthBonus})]})}),Po=a.memo(({open:n,iv:s,energy:t,parameter:l,onClose:r,dispatch:o})=>{const{t:i}=B(),[c,d]=xs(),[u,x]=a.useState(!1),h=a.useCallback(C=>{o({type:"changeParameter",payload:{parameter:{...l,e4eEnergy:parseInt(C.target.value,10)}}})},[o,l]),m=a.useCallback(C=>{o({type:"changeParameter",payload:{parameter:{...l,e4eCount:parseInt(C.target.value,10)}}})},[o,l]),g=a.useCallback(C=>{o({type:"changeParameter",payload:{parameter:{...l,recoveryBonusCount:parseInt(C.target.value,10)}}})},[o,l]),b=a.useCallback(C=>{x(C.target.value==="");let F=parseInt(C.target.value,10);isNaN(F)&&(F=0),F=Math.min(100,Math.max(0,F)),o({type:"changeParameter",payload:{parameter:{...l,sleepScore:F}}})},[o,l]),f=a.useCallback(C=>{o({type:"changeParameter",payload:{parameter:{...l,isEnergyAlwaysFull:C.target.checked}}})},[o,l]),j=a.useCallback(C=>{o({type:"changeParameter",payload:{parameter:{...l,isGoodCampTicketSet:C.target.checked}}})},[o,l]),k=a.useCallback(C=>{o({type:"changeParameter",payload:{parameter:{...l,tapFrequency:C.target.value}}})},[o,l]),v=a.useCallback(C=>{o({type:"changeParameter",payload:{parameter:{...l,tapFrequencyAsleep:C.target.value}}})},[o,l]);if(!n)return e.jsx(e.Fragment,{});const y=s.hasEnergyRecoveryBonusInActiveSubSkills,E=t.carryLimit;return e.jsxs(Lo,{open:n,onClose:r,children:[e.jsx(Oo,{width:c,period:l.period,result:t}),e.jsx(oe,{in:!l.isEnergyAlwaysFull,children:e.jsxs("section",{children:[e.jsxs("div",{children:[e.jsxs("label",{children:[i("skills.Energy for Everyone S"),":"]}),e.jsxs("div",{children:[e.jsxs(re,{variant:"standard",value:l.e4eEnergy.toString(),onChange:h,children:[e.jsx(p,{value:5,children:"5"}),e.jsx(p,{value:7,children:"7"}),e.jsx(p,{value:9,children:"9"}),e.jsx(p,{value:11,children:"11"}),e.jsx(p,{value:15,children:"15"}),e.jsx(p,{value:18,children:"18"})]}),e.jsx("span",{style:{margin:"0 0.5rem"},children:"×"}),e.jsxs(re,{variant:"standard",value:l.e4eCount.toString(),onChange:m,children:[e.jsx(p,{value:0,children:"0"}),e.jsx(p,{value:1,children:"1"}),e.jsx(p,{value:2,children:"2"}),e.jsx(p,{value:3,children:"3"}),e.jsx(p,{value:4,children:"4"}),e.jsx(p,{value:5,children:"5"}),e.jsx(p,{value:6,children:"6"}),e.jsx(p,{value:7,children:"7"}),e.jsx(p,{value:8,children:"8"}),e.jsx(p,{value:9,children:"9"}),e.jsx(p,{value:10,children:"10"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[i("subskill.Energy Recovery Bonus"),":"]}),e.jsxs(re,{variant:"standard",value:l.recoveryBonusCount.toString(),onChange:g,children:[e.jsx(p,{value:0,children:y?"×1":i("none")}),e.jsx(p,{value:1,children:y?"×2":"×1"}),e.jsx(p,{value:2,children:y?"×3":"×2"}),e.jsx(p,{value:3,children:y?"×4":"×3"}),e.jsx(p,{value:4,children:y?"×5":"×4"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[i("sleep score"),":"]}),e.jsx("div",{children:e.jsx(ce,{variant:"standard",type:"number",size:"small",value:u?"":l.sleepScore,onChange:b,slotProps:{htmlInput:{min:0,max:100}}})})]})]})}),e.jsx("section",{ref:d,children:e.jsxs("div",{children:[e.jsxs("label",{children:[i("always 81%+"),":"]}),e.jsx("div",{children:e.jsx(se,{size:"small",checked:l.isEnergyAlwaysFull,onChange:f})})]})}),e.jsx("section",{children:e.jsxs("div",{children:[e.jsxs("label",{children:[i("good camp ticket"),":"]}),e.jsx("div",{children:e.jsx(se,{size:"small",checked:l.isGoodCampTicketSet,onChange:j})})]})}),e.jsxs("section",{children:[e.jsxs("div",{children:[e.jsxs("label",{children:[i("tap frequency")," (",i("awake"),"):"]}),e.jsxs(re,{variant:"standard",value:l.tapFrequency,onChange:k,children:[e.jsx(p,{value:"always",children:i("every minute")}),e.jsx(p,{value:"none",children:i("none")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[i("tap frequency")," (",i("asleep"),"):"]}),l.tapFrequency==="none"?e.jsx("span",{style:{fontSize:"0.9rem"},children:i("none")}):e.jsxs(re,{variant:"standard",value:l.tapFrequencyAsleep,onChange:v,children:[e.jsx(p,{value:"always",children:i("every minute")}),e.jsx(p,{value:"none",children:i("none")})]})]})]}),e.jsxs("footer",{children:[e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[i("average help efficiency"),":"]}),e.jsx("div",{children:t.averageEfficiency.total}),l.period>=24&&e.jsxs("footer",{children:[e.jsxs("span",{children:[i("awake"),": ",t.averageEfficiency.awake]}),e.jsxs("span",{children:[i("asleep"),": ",t.averageEfficiency.asleep]})]})]}),e.jsxs(oe,{in:t.canBeFullInventory&&l.period>=24,children:[e.jsxs("section",{children:[e.jsxs("label",{children:[i("full inventory while sleeping"),":"]}),e.jsx("div",{children:t.timeToFullInventory<0?i("none"):new _e(t.timeToFullInventory).toString(i)}),e.jsxs("footer",{children:[e.jsxs("span",{children:[i("carry limit"),": ",E]}),e.jsxs("span",{children:[i("sneaky snacking"),": ",t.timeToFullInventory<0?i("none"):t.helpCount.asleepFull.toFixed(1)+" "+i("times unit")]})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[i("skill trigger after wake up"),":"]}),e.jsx("div",{children:s.pokemon.specialty!=="Skills"?e.jsxs(e.Fragment,{children:[(t.skillProbabilityAfterWakeup.once*100).toFixed(1),"%"]}):e.jsxs(e.Fragment,{children:["❶",(t.skillProbabilityAfterWakeup.once*100).toFixed(1),"%",e.jsx(e.Fragment,{children:" "}),"❷",(t.skillProbabilityAfterWakeup.twice*100).toFixed(1),"%"]})}),e.jsx("footer",{children:e.jsxs("span",{children:[i("lottery count"),": ",t.helpCount.asleepNotFull.toFixed(2)]})})]})]})]}),s.pokemon.skill==="Charge Energy S"&&e.jsx("div",{className:"warning",children:i("charge energy not implemented")}),e.jsx(W,{disableSpacing:!0,children:e.jsx(M,{onClick:r,children:i("close")})})]})}),Lo=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px",maxHeight:"calc(100% - 20px)"},"& .MuiPaper-root":{width:"100%","& > svg":{padding:"0.5rem 0 1rem",width:"100%",userSelect:"none"},"& section":{padding:"0 1rem","& > div":{display:"flex",flex:"0 auto",flexWrap:"wrap",alignItems:"center","& > label":{marginRight:"auto",fontSize:"0.9rem","&.indent":{marginLeft:"1rem"}},"& .MuiSelect-select":{paddingTop:"1px",paddingBottom:"1px",fontSize:"0.9rem"},"& input.MuiInput-input":{fontSize:"0.9rem",paddingBottom:0}}},"& > footer":{margin:"0.5rem 1rem 0 1rem",fontSize:"0.9rem",background:"#eee",borderRadius:"0.9rem",padding:"0.5rem 0.7rem","& section":{display:"grid",gridTemplateColumns:"1fr fit-content(200px)",marginTop:"0.4rem","&.first":{marginTop:0},padding:0,"& > div":{textAlign:"right"},"& > footer":{gridColumn:"1 / -1",color:"#666",fontSize:"0.7rem",marginLeft:"0.8rem","& > span":{marginRight:"1rem"}}}},"& > div.warning":{fontSize:"0.8rem",color:"#666",padding:"0.4rem 1rem 0 1rem",marginLeft:"1.2rem"}}}),Oo=a.memo(({width:n,period:s,result:t})=>{const l=a.useRef(null),r=Vo(l);return e.jsx("svg",{width:n,height:"200",viewBox:`0 0 ${n} 200`,ref:l,children:e.jsxs("g",{transform:"translate(25,3)",children:[e.jsx(Ho,{width:n-50,height:180,period:s,sleepTime:t.sleepTime}),e.jsx($o,{width:n-50,height:180,result:t}),r!==null&&e.jsx(Wo,{width:n-50,height:180,x:r.svgX-25,gx:r.x,gy:r.y,result:t})]})})}),Ho=a.memo(({width:n,height:s,period:t,sleepTime:l})=>{const r=ke(100,s),o=ke(80,s),i=ke(60,s),c=ke(40,s),d=ke(20,s),u=ke(0,s),x=sn(2,s),h=sn(1.5,s),m=sn(1,s),g=A=>A/1440*n,b=g(120),f=g(300),j=g(480),k=g(660),v=g(840),y=g(1020),E=g(1200),C=g(1380),F=s+5;return e.jsxs(e.Fragment,{children:[e.jsxs("g",{stroke:"#ddd",children:[e.jsx("line",{x1:"0",y1:r,x2:n,y2:r}),e.jsx("line",{x1:"0",y1:o,x2:n,y2:o}),e.jsx("line",{x1:"0",y1:i,x2:n,y2:i}),e.jsx("line",{x1:"0",y1:c,x2:n,y2:c}),e.jsx("line",{x1:"0",y1:d,x2:n,y2:d}),e.jsx("line",{x1:"0",y1:u,x2:n,y2:u})]}),e.jsxs("g",{stroke:"#bbb",children:[e.jsx("line",{x1:C,y1:s,x2:C,y2:F}),e.jsx("line",{x1:b,y1:s,x2:b,y2:F}),e.jsx("line",{x1:f,y1:s,x2:f,y2:F}),e.jsx("line",{x1:j,y1:s,x2:j,y2:F}),e.jsx("line",{x1:k,y1:s,x2:k,y2:F}),e.jsx("line",{x1:v,y1:s,x2:v,y2:F}),e.jsx("line",{x1:y,y1:s,x2:y,y2:F}),e.jsx("line",{x1:E,y1:s,x2:E,y2:F})]}),e.jsxs("g",{fontSize:"60%",fill:"#999",textAnchor:"end",children:[e.jsx("text",{alignmentBaseline:"central",x:"-5",y:r,children:"100"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:o,children:"80"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:i,children:"60"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:c,children:"40"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:d,children:"20"}),e.jsx("text",{alignmentBaseline:"central",x:"-5",y:u,children:"0"})]}),e.jsxs("g",{transform:`translate(${n+2},0)`,fontSize:"60%",fill:"#999",textAnchor:"start",children:[e.jsx("text",{alignmentBaseline:"central",x:"0",y:x,children:"2.0"}),e.jsx("text",{alignmentBaseline:"central",x:"0",y:h,children:"1.5"}),e.jsx("text",{alignmentBaseline:"central",x:"0",y:m,children:"1.0"})]}),e.jsxs("g",{transform:`translate(0,${F+3})`,fontSize:"60%",fill:"#999",textAnchor:"middle",children:[e.jsx("text",{alignmentBaseline:"hanging",x:b,y:"0",children:"9:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:f,y:"0",children:"12:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:j,y:"0",children:"15:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:k,y:"0",children:"18:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:v,y:"0",children:"21:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:y,y:"0",children:"24:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:E,y:"0",children:"3:00"}),e.jsx("text",{alignmentBaseline:"hanging",x:C,y:"0",children:"6:00"})]}),e.jsx("rect",{x:n*l/1440,y:"0",width:n*(1440-l)/1440,height:s,fill:"#000080",fillOpacity:"0.08"}),t<24&&e.jsx("rect",{x:n*t*60/1440,y:"0",width:n*(1440-t*60)/1440,height:s,fill:"#6666tt",fillOpacity:"0.15"})]})}),$o=a.memo(({width:n,height:s,result:t})=>{const l=h=>h/1440*n,r=[],o=[];let i=t.events[0].isSnacking,c=i?l(0).toFixed(2):n.toString();for(let h=0;h<t.events.length;h++){const m=ke(t.events[h].energyBefore,s).toFixed(2),g=ke(t.events[h].energyAfter,s).toFixed(2),b=l(t.events[h].minutes).toFixed(2),f=i?o:r;f.push(`${b},${m}`),h<t.events.length-1&&f.push(`${b},${g}`),!i&&t.events[h].isSnacking&&(i=!0,o.push(`${b},${g}`),c=b)}const d=[...r];d.push(`${c},${s} 0,${s}`);const u=[...o];u.length>0&&u.push(`${n},${s} ${c},${s}`);const x=[];for(const h of t.efficiencies){const m=l(h.start),g=l(h.end),b=sn(h.efficiency,s);x.push(`${m},${b} ${g},${b}`)}return e.jsxs(e.Fragment,{children:[e.jsx("polygon",{points:d.join(" "),stroke:"none",fill:"#1976d2",fillOpacity:.2}),e.jsx("polyline",{points:r.join(" "),stroke:"#1976d2",fill:"none"}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("polyline",{points:o.join(" "),stroke:"#000000",fill:"none"}),e.jsx("polygon",{points:u.join(" "),stroke:"none",fill:"#000000",fillOpacity:.2})]}),e.jsx("polyline",{points:x.join(" "),stroke:"#ff0000",fill:"none",strokeWidth:"1.2"})]})}),Wo=a.memo(({width:n,height:s,x:t,gx:l,gy:r,result:o})=>{const{t:i}=B(),c=20;if(t<-c||t>n+c)return e.jsx(e.Fragment,{});t=Math.max(0,Math.min(n,t));const d=Math.round(t/n*1440/10)*10;t=d/1440*n;const u=o.events.findIndex(f=>d<f.minutes);let x;if(u<=0)x=o.events[o.events.length-1].energyBefore;else{const f=o.events[u-1],j=o.events[u],k=(d-f.minutes)/(j.minutes-f.minutes);x=f.energyAfter+(j.energyBefore-f.energyAfter)*k}let h=o.efficiencies.find(f=>f.start<=d&&d<f.end);h===void 0&&(h=o.efficiencies[o.efficiencies.length-1]);let m="";const g=h.isSnacking;h.isAwake?m=i(g?"asleep (full inventory)":"awake"):m=i(g?"asleep (full inventory)":"asleep");const b={getBoundingClientRect:()=>new DOMRect(l-window.scrollX,r-window.scrollY,0,0)};return e.jsxs(e.Fragment,{children:[e.jsx("line",{stroke:"#999",x1:t,y1:0,x2:t,y2:s}),e.jsx("circle",{fill:g?"#000":"#1976d2",cx:t,cy:ke(x,s),r:"3"}),e.jsx("circle",{fill:"#ff0000",cx:t,cy:sn(h.efficiency,s),r:"3"}),e.jsx(_o,{open:!0,anchorEl:b,placement:"right-end",children:e.jsxs("div",{children:[e.jsx("h3",{children:m}),e.jsxs("h2",{children:[e.jsx(Le,{energy:x}),Math.floor((d+420)/60)%24,":",Math.floor(d%60).toString().padStart(2,"0")]}),e.jsxs("dl",{children:[e.jsxs("dt",{children:[i("help efficiency"),":"]}),e.jsx("dd",{children:h.efficiency}),e.jsxs("dt",{children:[i("energy"),":"]}),e.jsx("dd",{children:Math.ceil(x)})]})]})})]})}),_o=S(is)({pointerEvents:"none",padding:"1rem",zIndex:2147483647,"& > div":{padding:".5rem",background:"rgba(246, 246, 246, 0.8)",borderRadius:"0.8rem",boxShadow:"4px 2px 5px 3px rgba(128, 128, 128, 0.2)","& > h2":{fontSize:"0.9rem",color:"#666",margin:0,display:"flex",alignItems:"center","& > svg":{marginRight:"0.1rem"}},"& > h3":{fontSize:"0.6rem",color:"#889",fontWeight:"normal",margin:0},"& > dl":{fontSize:"0.8rem",display:"grid",gridTemplateColumns:"auto auto",margin:"0.3rem 0 0 0","& > dt":{margin:"0 0.4rem 0 0",color:"#333"},"& > dd":{margin:0,textAlign:"right"}}}}),ke=(n,s)=>(150-n)/150*s,sn=(n,s)=>(210-80*n)/150*s;function Vo(n){const[s,t]=a.useState(null),l=a.useCallback((d,u)=>{if(n.current===null)return;const x=n.current,h=x.createSVGPoint();h.x=d,h.y=u;const m=x.getScreenCTM();if(!m)return;const g=h.matrixTransform(m.inverse());t({x:d,y:u,svgX:g.x})},[n]),r=a.useCallback(d=>{l(d.touches[0].pageX,d.touches[0].pageY)},[l]),o=a.useCallback(()=>{t(null)},[]),i=a.useCallback(d=>{"ontouchstart"in window||l(d.pageX,d.pageY)},[l]),c=a.useCallback(()=>{t(null)},[]);return a.useEffect(()=>{if(n.current===null)return;const d=n.current;return d.addEventListener("touchstart",r),d.addEventListener("touchmove",r),d.addEventListener("touchend",o),d.addEventListener("mousemove",i),d.addEventListener("mouseleave",c),()=>{d.removeEventListener("touchstart",r),d.removeEventListener("touchmove",r),d.removeEventListener("touchend",o),d.removeEventListener("mousemove",i),d.removeEventListener("mouseleave",c)}},[n,r,o,i,c]),s}const qo=a.memo(({open:n,strength:s,result:t,dispatch:l,onClose:r})=>{const{t:o}=B(),[i,c]=a.useState(!1),d=a.useCallback(y=>{l({type:"changeParameter",payload:{parameter:y}})},[l]),u=a.useCallback(y=>{d({...s.parameter,recipeBonus:parseInt(y.target.value)})},[d,s.parameter]),x=a.useCallback(y=>{d({...s.parameter,recipeLevel:parseInt(y.target.value)})},[d,s.parameter]),h=a.useCallback(()=>{c(!0)},[]),m=a.useCallback(()=>{c(!1)},[]);if(!n)return e.jsx(e.Fragment,{});const g=s.parameter;if(g.tapFrequency==="none")return e.jsxs(G,{open:n,onClose:r,children:[e.jsx(J,{style:{fontSize:"0.95rem",whiteSpace:"pre-wrap"},children:o("no ingredient")}),e.jsx(W,{children:e.jsx(M,{onClick:r,children:o("close")})})]});const b=s.pokemonIv.level<30?1:s.pokemonIv.level<60?2:3,f=[[t.ing1]];b>1&&(t.ing2.name==="unknown"||(f[0][0].name===t.ing2.name?f[0].push(t.ing2):f.push([t.ing2]))),b>2&&t.ing3!==void 0&&(t.ing3.name==="unknown"||(f[0][0].name===t.ing3.name?f[0].push(t.ing3):f.length>1&&f[1][0].name===t.ing3.name?f[1].push(t.ing3):f.push([t.ing3])));const k=(g.recipeBonus===0?1:(1+g.recipeBonus/100)*(1+fs[g.recipeLevel]/100))*.8+.2,v=Ce(g.event,g.customEventBonus)?.dish??1;return e.jsxs(zn,{open:n,onClose:r,children:[e.jsx(ae,{children:e.jsxs("article",{children:[e.jsx(le,{sx:{color:"#ff944b"}}),q(Math.round(t.ingStrength))]})}),e.jsxs(J,{children:[e.jsxs("div",{className:`inggrid ings${f.length}`,children:[Vn(s,t,k,b,f[0],o),f.length>1&&Vn(s,t,k,b,f[1],o),f.length>2&&Vn(s,t,k,b,f[2],o)]}),e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box3",children:te(t.ingHelpCount)})}),e.jsx("span",{children:o("ing help count")}),e.jsxs("footer",{children:[$(t.notFullHelpCount),e.jsxs("small",{children:[" (",o("normal help count"),")"]}),e.jsx(e.Fragment,{children:" × "}),$(t.ingRatio*100),"%",e.jsxs("small",{children:[" (",o("ingredient rate"),")"]})]}),e.jsx("div",{children:e.jsx("span",{className:"box box1",children:$(f[0].reduce((y,E)=>y+E.count,0))})}),e.jsx("span",{children:o("ing count")}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:$s[f[0][0].name]})}),e.jsx("span",{children:o("strength per ing")}),e.jsx("div",{children:e.jsx("span",{className:"box box5",children:te(k)})}),e.jsxs("span",{children:[o("recipe multiplier"),e.jsx(ee,{onClick:h})]}),e.jsxs("footer",{children:[e.jsx(e.Fragment,{children:"("}),te(g.recipeBonus===0?1:1+g.recipeBonus/100),e.jsxs("small",{children:[" (",o("recipe bonus"),")"]}),e.jsx(e.Fragment,{children:" × "}),te(1+fs[g.recipeLevel]/100),e.jsxs("small",{children:["(",o("average recipe level"),")"]}),e.jsx(e.Fragment,{children:") × 0.8 + 0.2"})]}),e.jsx("div",{children:e.jsxs("span",{className:"box box4",children:[g.fieldBonus,"%"]})}),e.jsx("span",{children:o("area bonus")}),v!==1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box6",children:v})}),e.jsx("span",{children:o("event bonus")})]})]}),e.jsxs("section",{style:{marginTop:"1.8rem"},children:[e.jsxs("label",{children:[o("recipe bonus"),":"]}),e.jsx(cs,{size:"small",children:e.jsxs(re,{variant:"standard",value:s.parameter.recipeBonus.toString(),onChange:u,children:[e.jsxs(p,{value:0,children:["0% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(",o("mixed recipe"),")"]})]}),e.jsxs(p,{value:19,children:["19% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(7",o("range separator"),"16 ",o("ingredients unit"),")"]})]}),e.jsxs(p,{value:20,children:["20% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(20",o("range separator"),"22 ",o("ingredients unit"),")"]})]}),e.jsxs(p,{value:21,children:["21% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(23",o("range separator"),"26 ",o("ingredients unit"),")"]})]}),e.jsxs(p,{value:25,children:["25% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(17",o("range separator"),"35 ",o("ingredients unit"),")"]})]}),e.jsxs(p,{value:35,children:["35% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(35",o("range separator"),"56 ",o("ingredients unit"),")"]})]}),e.jsxs(p,{value:48,children:["48% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(49",o("range separator"),"77 ",o("ingredients unit"),")"]})]}),e.jsxs(p,{value:61,children:["61% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(78",o("range separator"),"102 ",o("ingredients unit"),")"]})]}),e.jsxs(p,{value:78,children:["78% ",e.jsxs("small",{style:{paddingLeft:"0.3rem"},children:["(103",o("range separator"),"115 ",o("ingredients unit"),")"]})]})]})})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[o("average recipe level"),":"]}),e.jsxs(re,{variant:"standard",value:s.parameter.recipeLevel.toString(),onChange:x,children:[e.jsx(p,{value:1,children:"1"}),e.jsx(p,{value:10,children:"10"}),e.jsx(p,{value:20,children:"20"}),e.jsx(p,{value:30,children:"30"}),e.jsx(p,{value:40,children:"40"}),e.jsx(p,{value:50,children:"50"}),e.jsx(p,{value:55,children:"55"}),e.jsx(p,{value:60,children:"60"}),e.jsx(p,{value:65,children:"65"})]})]})]}),e.jsx(W,{children:e.jsx(M,{onClick:r,children:o("close")})}),e.jsx(Go,{open:i,onClose:m})]})});function Vn(n,s,t,l,r,o){if(n.parameter.tapFrequency==="none")return e.jsx("article",{children:"ー"});const i=r.reduce((x,h)=>x+h.count,0),c=r[0].name,d=n.parameter,u=Ce(d.event,d.customEventBonus)?.dish??1;return e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[e.jsx(je,{name:r[0].name}),$(i)]}),e.jsxs("div",{children:[e.jsx("span",{className:"box box3",children:te(s.ingHelpCount)}),e.jsx(e.Fragment,{children:" × "}),r.length>1?"(":"",r.map((x,h)=>e.jsxs("span",{children:[h===0?"":" + ",e.jsx(ye,{count:x.helpCount,name:c})]},h)),r.length>1?")":"",e.jsx(e.Fragment,{children:l>1?` / ${l}`:""})]}),e.jsxs("span",{style:{marginTop:"-0.5rem"},children:[e.jsx(le,{sx:{color:"#ff944b"},className:"strength"}),Ie(r.reduce((x,h)=>x+h.strength,0),o)]}),e.jsxs("div",{style:{marginTop:"-0.5rem"},children:[e.jsx("span",{className:"box box1",children:$(i)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:$s[c]}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box5",children:te(t)}),e.jsx(e.Fragment,{children:" × "}),e.jsxs("span",{children:[e.jsx(e.Fragment,{children:"(1+"}),e.jsxs("span",{className:"box box4",children:[d.fieldBonus,"%"]}),e.jsx(e.Fragment,{children:")"})]}),u!==1&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box6",children:u})]})]})]})}const Go=a.memo(({open:n,onClose:s})=>{const{t}=B();return e.jsxs(G,{open:n,onClose:s,children:[e.jsxs(J,{children:[e.jsx(pe,{sx:{marginBottom:"16px"},children:e.jsx(Y,{i18nKey:"recipe bonus help",components:{raenonx:e.jsx("a",{href:t("recipe bonus list"),children:"raenonx"})}})}),e.jsx(pe,{variant:"body2",children:t("recipe strength help")})]}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:t("close")})})]})}),Uo=a.memo(({open:n,dispatch:s,onClose:t,strength:l,result:r})=>{const{t:o}=B(),[i,c]=a.useState(!1),[d,u]=a.useState(l.pokemonIv),[x,h]=a.useState(1),m=a.useCallback((P,z)=>{c(!0);const O=new ve(ls.find(U=>U.type===P)?.name??"Bulbasaur");O.level=z,u(O),h(new ss(O,l.parameter).berryStrengthBonus)},[l.parameter]),g=a.useCallback(()=>{c(!1)},[]),b=a.useCallback((P,z)=>{if(z===null)return;const O=l.pokemonIv.clone();O.skillLevel=parseInt(z,10),s({type:"updateIv",payload:{iv:O}})},[s,l.pokemonIv]),f=l.parameter;if(f.period<=Ee||f.tapFrequency==="none")return e.jsxs(G,{open:n,onClose:t,children:[e.jsx(J,{style:{fontSize:"0.95rem",whiteSpace:"pre-wrap"},children:o("strength skill info.not triggered")}),e.jsx(W,{children:e.jsx(M,{onClick:t,children:o("close")})})]});const j=l.pokemonIv,k=j.pokemon.skill.replace(" (Random)",""),v=o(`strength skill info.${k}`),y=j.pokemon.skill,E=y==="Metronome"||y.startsWith("Skill Copy"),C=Os(j.pokemon.skill),F=Array.from({length:C},(P,z)=>e.jsx(R,{value:z+1,children:z+1},z+1)),A=l.getSkillLevel(),T=l.bonusEffects,[I,N]=Ko(l,A,o),[H,Z]=Xo(l,A,o);let D=0;const L=Math.ceil(f.period/24);return y==="Berry Burst (Disguise)"&&(D=1-Math.pow(1-.18,r.skillCount/L)),e.jsxs(zn,{open:n,onClose:t,children:[e.jsxs(ae,{children:[e.jsxs("article",{children:[e.jsx(Pe,{mainSkill:y}),Ie(r.skillValue,o)]}),!E&&e.jsxs("footer",{children:[e.jsx("span",{className:"box box1",children:q(r.skillValuePerTrigger)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:te(r.skillCount)}),y==="Ingredient Draw S (Hyper Cutter)"&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box4",children:te(1+js)})]}),y==="Ingredient Draw S (Super Luck)"&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),e.jsxs("span",{className:"box box5",children:[bs*100,"%"]})]}),y==="Berry Burst (Disguise)"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(e.Fragment,{children:" + "}),e.jsx("span",{className:"box box1",children:q(r.skillValuePerTrigger)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box4",children:2*L}),e.jsx(e.Fragment,{children:" × "}),e.jsxs("span",{className:"box box5",children:[$(D*100),"%"]})]})]})]}),e.jsxs(J,{children:[e.jsxs("article",{children:[!E&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box1",children:q(r.skillValuePerTrigger)})}),e.jsx("span",{children:I}),N!==null&&e.jsx("footer",{children:N})]}),e.jsx("div",{children:e.jsx("span",{className:"box box2",children:te(r.skillCount)})}),e.jsx("span",{children:o("skill count")}),y==="Ingredient Draw S (Hyper Cutter)"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:te(1+js)})}),e.jsx("span",{children:o("additional ingredient rate")})]}),y==="Ingredient Draw S (Super Luck)"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("span",{className:"box box5",children:[bs*100,"%"]})}),e.jsx("span",{children:o("ingredient obtain rate")})]}),y==="Berry Burst (Disguise)"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:2*L})}),e.jsx("span",{children:o("great success increasment")}),e.jsx("div",{children:e.jsxs("span",{className:"box box5",children:[$(D*100),"%"]})}),e.jsx("span",{children:o("great success rate")})]})]}),r.skillValue2!==0&&e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"second-skill",style:{marginTop:"1.2rem"},children:[e.jsxs("article",{children:[y==="Ingredient Magnet S (Plus)"?e.jsx(je,{name:j.pokemon.ing1.name}):e.jsx(Pe,{mainSkill:y,second:!0}),Ie(r.skillValue2,o)]}),e.jsxs("footer",{children:[e.jsx("span",{className:"box box4",children:q(r.skillValuePerTrigger2)}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box2",children:te(r.skillCount)})]})]}),e.jsxs("article",{children:[e.jsx("div",{children:e.jsx("span",{className:"box box4",children:q(r.skillValuePerTrigger2)})}),e.jsx("span",{children:H}),Z!==null&&e.jsx("footer",{children:Z})]})]}),!E&&e.jsxs("section",{style:{marginTop:"1.8rem"},children:[e.jsxs("label",{children:[o("skill level"),":"]}),e.jsx(cs,{size:"small",children:e.jsx(X,{exclusive:!0,value:j.skillLevel,onChange:b,children:F})})]}),e.jsx(oe,{in:!E&&(T.skillLevel>0||f.maxSkillLevel)&&A!==j.skillLevel,children:e.jsx("div",{className:"skillLevelNotice",children:e.jsx(Y,{i18nKey:f.maxSkillLevel?"max skill level affected":"skill level bonus affected",components:{level:e.jsx("strong",{children:A}),bonus:e.jsx("strong",{children:T.skillLevelReason==="event+ex"?o("event bonus")+o("text separator")+o("expert mode"):T.skillLevelReason==="event"?o("event bonus"):o("expert mode")})}})})}),ta(l,s,m,o),v!==""&&e.jsx("div",{className:"footnote",children:v})]}),e.jsx(W,{children:e.jsx(M,{onClick:t,children:o("close")})}),e.jsx(yt,{open:i,onClose:g,iv:d,fieldBonus:f.fieldBonus,berryBonus:x})]})});function Ko(n,s,t){const l=n.pokemonIv.pokemon.skill;if(l.startsWith("Charge Energy"))return Jo(n,s,t);if(l.startsWith("Charge Strength"))return Yo(n,s,t);if(l.startsWith("Ingredient Magnet S")||l.startsWith("Ingredient Draw S"))return Qo(n,s,t);if(l.startsWith("Dream Shard Magnet"))return Zo(n,s,t);if(l==="Energizing Cheer S"){const r=Te(l,s);return Zn(r,s,t,t("nature effect.Energy recovery"))}if(l.startsWith("Energy for Everyone S")){const r=Te(l,s);return Zn(r,s,t,t("e4e per pokemon"))}return l.startsWith("Cooking Power-Up S")?un(t,t("pot size power up")):l==="Tasty Chance S"?un(t,t("tasty chance increase")):l==="Extra Helpful S"?un(t,t("help count")):l==="Helper Boost"?un(t,t("help count per pokemon")):l.startsWith("Berry Burst")?vt(n,t,t("berry strength per berry burst")):[null,null]}function Xo(n,s,t){const l=n.pokemonIv.pokemon.skill;if(l==="Ingredient Draw S (Super Luck)")return ea(n,s,t,t("expected dream shard"));if(l==="Ingredient Magnet S (Plus)")return na(n,s,t);if(l==="Ingredient Magnet S (Present)")return sa(n,s,t);if(l==="Cooking Power-Up S (Minus)"){const r=kn(l,s);return Zn(r,s,t,t("nature effect.Energy recovery"))}return l==="Energy for Everyone S (Lunar Blessing)"?vt(n,t,t("berry strength per berry burst")):[null,null]}function Jo(n,s,t){const l=n.pokemonIv,r=n.pokemonIv.pokemon.skill,o=t("value per skill",{value:t("nature effect.Energy recovery")}),i=Te(r,s);return[e.jsxs(e.Fragment,{children:[o,e.jsx("br",{}),e.jsx("span",{className:"box box4",children:i}),e.jsx(e.Fragment,{children:" × "}),e.jsx("span",{className:"box box5",children:l.nature.energyRecoveryFactor}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx("span",{className:"box box4",children:i}),e.jsxs(e.Fragment,{children:[": ",t("base value",{value:t("nature effect.Energy recovery")})]})]}),e.jsxs("li",{children:[e.jsx("span",{className:"box box5",children:l.nature.energyRecoveryFactor}),e.jsxs(e.Fragment,{children:[": ",t("nature factor")]}),l.nature.energyRecoveryFactor>1&&e.jsxs("small",{children:[" (",e.jsx(Ge,{children:t("nature effect.Energy recovery")}),")"]}),l.nature.energyRecoveryFactor<1&&e.jsxs("small",{children:[" (",e.jsx(dn,{children:t("nature effect.Energy recovery")}),")"]})]})]})]}),null]}function Yo(n,s,t){const l=n.parameter,r=n.pokemonIv.pokemon.skill,o=t("value per skill",{value:t("strength2")});let i=null;if(r==="Charge Strength S (Random)"){const[d,u]=Kn(r,s);i=e.jsxs("small",{children:[" (",t("range average",{min:q(d),max:q(u)}),")"]})}else if(r==="Charge Strength S (Stockpile)"){const[d,u]=Kn(r,s);i=e.jsxs("small",{children:[" (",t("range expected",{min:q(d),max:q(u)}),")"]})}const c=Te(r,s);return[e.jsxs(e.Fragment,{children:[o,e.jsx("br",{}),e.jsx("span",{className:"box box4",children:c}),e.jsx(e.Fragment,{children:" × (1 + "}),e.jsxs("span",{className:"box box5",children:[l.fieldBonus,"%"]}),e.jsx(e.Fragment,{children:")"}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx("span",{className:"box box4",children:c}),e.jsxs(e.Fragment,{children:[": ",t("base value",{value:t("strength2")})]}),i]}),e.jsxs("li",{children:[e.jsxs("span",{className:"box box5",children:[l.fieldBonus,"%"]}),e.jsxs(e.Fragment,{children:[": ",t("area bonus")]})]})]})]}),null]}function Qo(n,s,t){const l=n.parameter,r=Te(n.pokemonIv.pokemon.skill,s),o=Ce(l.event,l.customEventBonus)?.ingredientMagnet??1,i=t("value per skill",{value:t("ing count")});return o===1?[i,null]:[i,e.jsxs(e.Fragment,{children:[r,e.jsxs("small",{children:[" (",t("base value",{value:t("ing count")}),")"]}),e.jsx(e.Fragment,{children:" × "}),o,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]}function Zo(n,s,t){const l=n.parameter,r=n.pokemonIv.pokemon.skill,o=Ce(l.event,l.customEventBonus)?.dreamShard??1,i=t("value per skill",{value:t("dream shard")});if(r==="Dream Shard Magnet S"){if(o===1)return[i,null];{const c=Te(r,s);return[i,e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[c,e.jsxs("small",{children:[" (",t("base value",{value:t("dream shard")}),")"]}),e.jsx(e.Fragment,{children:" × "}),o,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})})]}}else if(r==="Dream Shard Magnet S (Random)"){const[c,d]=Kn(r,s);if(o===1)return[i,e.jsx(e.Fragment,{children:t("range average",{min:c,max:d})})];{const u=Te(r,s);return[i,e.jsxs(e.Fragment,{children:[u,e.jsxs("small",{children:[" (",t("range average",{min:c,max:d}),")"]}),e.jsx(e.Fragment,{children:" × "}),o,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]}}return[null,null]}function ea(n,s,t,l){const r=t("value per skill",{value:l}),o=kn("Ingredient Draw S (Super Luck)",s),i=n.parameter,c=Ce(i.event,i.customEventBonus)?.ingredientMagnet??1;return[e.jsxs(e.Fragment,{children:[r,e.jsx("br",{}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsxs("strong",{children:[q(o),c!==1&&e.jsxs(e.Fragment,{children:[" × ",c]})]}),": ",$(Ft*100),"%"]}),e.jsxs("li",{children:[e.jsxs("strong",{children:[q(o*5),c!==1&&e.jsxs(e.Fragment,{children:[" × ",c]})]}),": ",$(zt*100),"%"]})]})]}),null]}function na(n,s,t){const l=t("value per skill",{value:t("additional ingredients")}),r=n.parameter,o=Ce(r.event,r.customEventBonus)?.ingredientMagnet??1;if(o===1)return[l,null];const i=kn(n.pokemonIv.pokemon.skill,s,n.pokemonIv.pokemon.ing1.name);return[l,e.jsxs(e.Fragment,{children:[i,e.jsxs("small",{children:[" (",t("base value",{value:t("additional ingredients")}),")"]}),e.jsx(e.Fragment,{children:" × "}),o,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]}function sa(n,s,t){const l=t("value per skill",{value:t("candy")}),r=n.parameter,o=Ce(r.event,r.customEventBonus)?.ingredientMagnet??1,i=kn(n.pokemonIv.pokemon.skill,s,n.pokemonIv.pokemon.ing1.name);return[l,e.jsxs(e.Fragment,{children:[i,e.jsxs("small",{children:[" (",t("base value",{value:t("candy")}),")"]}),e.jsx(e.Fragment,{children:" × "}),Rt*100,"%",o!==1&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:" × "}),o,e.jsxs("small",{children:[" (",t("event bonus"),")"]})]})]})]}function Zn(n,s,t,l){const r=t("value per skill",{value:l});return[e.jsxs(e.Fragment,{children:[r,e.jsx("br",{}),e.jsxs("ul",{className:"detail",children:[e.jsxs("li",{children:[e.jsx(Ge,{children:t("nature effect.Energy recovery")}),e.jsx(e.Fragment,{children:": "}),Math.floor(n*new we("Bold").energyRecoveryFactor)]}),e.jsxs("li",{children:[t("nature effect.Energy recovery"),e.jsx(e.Fragment,{children:" ーー: "}),n]}),e.jsxs("li",{children:[e.jsx(dn,{children:t("nature effect.Energy recovery")}),e.jsx(e.Fragment,{children:": "}),Math.floor(n*new we("Hasty").energyRecoveryFactor)]})]})]}),null]}function vt(n,s,t){const l=s("value per skill",{value:t}),r=n.parameter,o=Ce(r.event,r.customEventBonus)?.berryBurst??1,i=Dt(n.pokemonIv,n.parameter,o,n.getSkillLevel());return[e.jsxs(e.Fragment,{children:[l,e.jsx("br",{}),e.jsxs("div",{className:"bbgrid",children:[e.jsxs("label",{children:[s(`pokemons.${n.pokemonIv.pokemon.name}`),":"]}),e.jsx("span",{children:q(i.members[0].total)}),e.jsxs("small",{children:["(",i.members[0].perBerry," × ",i.members[0].count,")"]}),e.jsxs("label",{children:[s("other team member")," 1:"]}),e.jsx("span",{children:q(i.members[1].total)}),e.jsxs("small",{children:["(",i.members[1].perBerry," × ",i.members[1].count,")"]}),e.jsxs("label",{children:[s("other team member")," 2:"]}),e.jsx("span",{children:q(i.members[2].total)}),e.jsxs("small",{children:["(",i.members[2].perBerry," × ",i.members[2].count,")"]}),e.jsxs("label",{children:[s("other team member")," 3:"]}),e.jsx("span",{children:q(i.members[3].total)}),e.jsxs("small",{children:["(",i.members[3].perBerry," × ",i.members[3].count,")"]}),e.jsxs("label",{children:[s("other team member")," 4:"]}),e.jsx("span",{children:q(i.members[4].total)}),e.jsxs("small",{children:["(",i.members[4].perBerry," × ",i.members[4].count,")"]})]})]}),null]}function un(n,s){return[n("value per skill",{value:s}),null]}function ta(n,s,t,l){const r=n.parameter;if(!(n.pokemonIv.pokemon.skill.startsWith("Berry Burst")||n.pokemonIv.pokemon.skill==="Energy for Everyone S (Lunar Blessing)"))return e.jsx(e.Fragment,{});const i=n.pokemonIv,c=r.berryBurstTeam.auto,d=At(i,r),u=d.filter(f=>f.type===i.pokemon.type).length+1,x=c?u:r.berryBurstTeam.species,h=f=>{s({type:"changeParameter",payload:{parameter:{...r,berryBurstTeam:{...r.berryBurstTeam,auto:!f.target.checked}}}})},m=(f,j)=>{const k=[...r.berryBurstTeam.members];k[f].type=j,s({type:"changeParameter",payload:{parameter:{...r,berryBurstTeam:{...r.berryBurstTeam,members:k}}}})},g=(f,j)=>{const k=[...r.berryBurstTeam.members];k[f].level=j,s({type:"changeParameter",payload:{parameter:{...r,berryBurstTeam:{...r.berryBurstTeam,members:k}}}})},b=f=>{s({type:"changeParameter",payload:{parameter:{...r,berryBurstTeam:{...r.berryBurstTeam,species:parseInt(f,10)}}}})};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{style:{marginTop:"0.5rem"},children:[e.jsxs("label",{children:[l("events.advanced"),":"]}),e.jsx(se,{checked:!c,size:"small",onChange:h})]}),e.jsxs("section",{style:{paddingLeft:"1rem"},children:[e.jsxs("label",{children:[l(`pokemons.${n.pokemonIv.pokemon.name}`),":"]}),e.jsxs("span",{style:{color:"#999"},children:[e.jsx(He,{size:"small",disabled:!0,type:n.pokemonIv.pokemon.type,onChange:()=>{}}),e.jsx("span",{style:{padding:"0 0.2rem 0 0.6rem"},children:"Lv."}),n.pokemonIv.level,e.jsx(ee,{onClick:()=>t(i.pokemon.type,i.level)})]})]}),[0,1,2,3].map(f=>e.jsxs("section",{style:{paddingLeft:"1rem"},children:[e.jsxs("label",{children:[l("other team member")," ",f+1,":"]}),e.jsxs("span",{style:{color:c?"#999":"inherit"},children:[e.jsx(He,{size:"small",disabled:c,type:d[f].type,onChange:j=>m(f,j)}),e.jsx("span",{style:{padding:"0 0.2rem 0 0.6rem"},children:"Lv."}),c?d[f].level:e.jsx(jn,{value:d[f].level,sx:{width:"1.2rem",fontSize:"0.9rem"},showSlider:!0,onChange:j=>g(f,j)}),e.jsx(ee,{onClick:()=>t(d[f].type,d[f].level)})]})]},f)),i.pokemon.name==="Cresselia"&&e.jsxs("section",{style:{paddingLeft:"1rem"},children:[e.jsxs("label",{children:[l("different species"),":"]}),e.jsx("span",{style:{color:"#999"},children:c?x:e.jsxs(ue,{value:x.toString(),sx:{padding:"0 0.5rem"},onChange:b,children:[e.jsx(p,{dense:!0,value:"1",children:"1"}),u>1&&e.jsx(p,{dense:!0,value:"2",children:"2"}),u>2&&e.jsx(p,{dense:!0,value:"3",children:"3"}),u>3&&e.jsx(p,{dense:!0,value:"4",children:"4"}),u>4&&e.jsx(p,{dense:!0,value:"5",children:"5"})]})})]})]})}const ra=a.memo(({open:n,onClose:s,parameter:t,strength:l,result:r,dispatch:o})=>{const{t:i}=B(),c=a.useCallback(u=>{o({type:"changeParameter",payload:{parameter:{...t,helperBoostLevel:parseInt(u,10)}}})},[o,t]),d=a.useCallback(u=>{o({type:"changeParameter",payload:{parameter:{...t,helperBoostSpecies:parseInt(u,10)}}})},[o,t]);return n?e.jsxs(la,{open:n,onClose:s,children:[e.jsxs("article",{children:[e.jsxs("section",{className:"first",children:[e.jsxs("h2",{children:[i("help yield"),":"]}),e.jsxs("span",{children:[$(Ws(t,l,r)),i("berry unit"),"/",Math.abs(t.period),i("help unit")]})]}),e.jsx("footer",{children:i("help yield description",{n:Math.abs(t.period)})}),e.jsxs("section",{children:[e.jsxs("h2",{children:[i("helps for cap"),":"]}),e.jsxs("span",{children:[$(Pt(l,r)),i("help unit")]})]}),e.jsx("footer",{children:i("helps for cap description")}),e.jsxs("section",{children:[e.jsxs("h2",{children:[i("required helper boost"),":"]}),e.jsxs("span",{children:[$(_s(t,l,r)),i("times unit")]})]}),e.jsx("footer",{children:i("required helper boost description")})]}),e.jsxs("footer",{children:[e.jsxs("h3",{children:[e.jsx(Pe,{mainSkill:"Helper Boost"}),i("skills.Helper Boost")]}),e.jsxs("section",{className:"first",children:[e.jsxs("label",{children:[i("skill level"),":"]}),e.jsxs(ue,{value:t.helperBoostLevel,onChange:c,children:[e.jsx(p,{dense:!0,value:1,children:"1"}),e.jsx(p,{dense:!0,value:2,children:"2"}),e.jsx(p,{dense:!0,value:3,children:"3"}),e.jsx(p,{dense:!0,value:4,children:"4"}),e.jsx(p,{dense:!0,value:5,children:"5"}),e.jsx(p,{dense:!0,value:6,children:"6"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[i("different species"),":"]}),e.jsxs(ue,{value:t.helperBoostSpecies,onChange:d,children:[e.jsx(p,{dense:!0,value:1,children:"1"}),e.jsx(p,{dense:!0,value:2,children:"2"}),e.jsx(p,{dense:!0,value:3,children:"3"}),e.jsx(p,{dense:!0,value:4,children:"4"}),e.jsx(p,{dense:!0,value:5,children:"5"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{children:[i("helps per skill"),":"]}),e.jsxs("span",{children:[Te("Helper Boost",t.helperBoostLevel,t.helperBoostSpecies),i("times unit")]})]})]}),e.jsx(W,{disableSpacing:!0,children:e.jsx(M,{onClick:s,children:i("close")})})]}):e.jsx(e.Fragment,{})}),la=S(G)({"& .MuiPaper-root":{"& > article":{padding:"0.8rem",maxWidth:"18rem","& > section":{display:"flex",flex:"0 auto",marginTop:"0.8rem","&.first":{marginTop:"0.2rem"},"& > h2":{padding:"0 0 .2rem 0",margin:0,fontSize:"0.9rem",marginRight:"auto"},"& > span":{fontSize:"0.8rem"}},"& > footer":{fontSize:"0.7rem",color:"#666",padding:"0.1rem 0 0 0.7rem"}},"& > footer":{margin:"0.2rem 0.7rem 0 0.7rem",fontSize:"0.8rem",background:"#eee",borderRadius:"0.9rem",padding:"0.5rem 0.7rem","& > h3":{display:"flex",alignItems:"center",fontSize:"0.9rem",fontWeight:"bold",color:"#66cc66",margin:0},"& > section":{display:"flex",flex:"0 auto",marginTop:"0.4rem","& > label":{padding:"0 0 .2rem 0",margin:0,marginRight:"auto"},"& > .MuiButtonBase-root":{fontSize:"0.8rem",textAlign:"center",padding:"0 0.5rem"}}}}}),ia=a.memo(({param:n,result:s,open:t,dispatch:l,onClose:r})=>{const{t:o}=B(),i=a.useCallback(d=>{const u=[...n.totalFlags];d<u.length&&(u[d]=!u[d]),l({type:"changeParameter",payload:{parameter:{...n,totalFlags:u}}})},[l,n]),c=a.useCallback(()=>{l({type:"changeParameter",payload:{parameter:{...n,addHelpingBonusEffect:!n.addHelpingBonusEffect}}})},[l,n]);return e.jsxs(oa,{open:t,onClose:r,children:[e.jsxs("article",{children:[e.jsxs("h1",{children:[e.jsx(le,{sx:{color:"#ff944b"}}),e.jsx("span",{style:{transform:"scale(1, 0.9)"},children:q(Math.round(s.totalStrength))})]}),e.jsxs("div",{className:"grid",children:[e.jsx(Be,{disabled:!0,specialty:"Berries"}),e.jsx("div",{className:n.totalFlags[0]?"":"disabled",children:q(Math.round(s.berryTotalStrength))}),e.jsx(K,{size:"small",onClick:()=>i(0),className:n.totalFlags[0]?"":"disabled",children:e.jsx(Rn,{fontSize:"small"})}),e.jsx(Be,{disabled:!0,specialty:"Ingredients"}),e.jsx("div",{className:n.totalFlags[1]?"":"disabled",children:q(Math.round(s.ingStrength))}),e.jsx(K,{size:"small",onClick:()=>i(1),className:n.totalFlags[1]?"":"disabled",children:e.jsx(Rn,{fontSize:"small"})}),e.jsx(Be,{disabled:!0,specialty:"Skills"}),e.jsx("div",{className:n.totalFlags[2]?"":"disabled",children:q(Math.round(s.skillStrength+s.skillStrength2))}),e.jsx(K,{size:"small",onClick:()=>i(2),className:n.totalFlags[2]?"":"disabled",children:e.jsx(Rn,{fontSize:"small"})})]}),e.jsx(an,{show:s.helpingBonusStrength>0,children:e.jsxs("footer",{className:"helpingBonus",children:[e.jsxs("label",{children:[o("helping bonus addition"),": "]}),e.jsx("strong",{children:q(s.helpingBonusStrength)})]})}),e.jsx(hn,{control:e.jsx(Ks,{size:"small",checked:n.addHelpingBonusEffect,onChange:c}),label:o("helping bonus addition label")}),e.jsx(an,{show:n.addHelpingBonusEffect,children:e.jsx("footer",{className:"helpingBonusNote",children:o("helping bonus addition note")})}),e.jsx("p",{children:o("strength detail1")}),e.jsx("p",{children:o("strength detail2")}),e.jsx("ul",{style:{paddingLeft:"1rem"},children:e.jsx("li",{children:o("strength restriction2")})})]}),e.jsx(W,{children:e.jsx(M,{onClick:r,children:o("close")})})]})}),oa=S(G)({"& article":{margin:"0.8rem 0.8rem 0 0.8rem","& > h1":{fontSize:"1.4rem",margin:0,display:"flex",alignItems:"center"},"& > div.grid":{margin:"0.2rem 0 0.5rem 1rem",display:"grid",gridTemplateColumns:"min-content min-content min-content",gridGap:"0.2rem 0rem",alignItems:"center","& > div":{textAlign:"right",fontWeight:"bold",paddingLeft:"0.5rem","&.disabled":{color:"#ccc",textDecoration:"line-through #ff0000"}},"& > button":{"& > svg":{fill:"#ccc"},"&.disabled > svg":{fill:"#ff0000"}}},"& footer.helpingBonus":{padding:"0 0 0.5rem 1rem",fontSize:"0.9rem"},"& > label.MuiFormControlLabel-root":{alignItems:"start",marginRight:0,"& > span.MuiFormControlLabel-label":{paddingTop:"0.5rem",fontSize:"0.9rem"}},"& footer.helpingBonusNote":{padding:"0 0 0.5rem 1.8rem",fontSize:"0.8rem",color:"#999"},"& > p":{margin:"0.5rem 0",fontSize:"0.9rem"},"& > ul":{margin:0,fontSize:"0.9rem"}}}),aa=S("div")({display:"grid",gridTemplateColumns:"1fr 1fr 1fr",margin:"0 -0.5rem","& > h2":{gridColumn:"1 / -1",display:"flex",alignItems:"center",margin:"0 0.2rem",fontSize:"1.5rem","& > span.strength":{transform:"scale(1, 0.9)"},"& > span.evolved":{paddingLeft:"0.8rem",fontSize:"0.8rem"}},"& > section":{borderLeft:"2px dotted #ccc",position:"relative",padding:"0 0 2rem","&:first-of-type":{borderLeft:0},"& > h3":{width:"calc(100% - 1rem)",fontSize:".8rem",fontWeight:400,textAlign:"center",color:"white",borderRadius:".8rem",verticalAlign:"20%",margin:".3rem 0 .1rem 0.5rem","& > button":{position:"absolute",top:"0.45rem",right:"0.7rem","& > svg":{color:"#f0f0f0",width:"16px",height:"16px"}}},"& > article":{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",fontWeight:600,textAlign:"center",verticalAlign:"middle",fontSize:"1.1rem",margin:"auto 0",height:"3rem","& span":{verticalAlign:"middle"},"& svg":{verticalAlign:"middle"},"& span.unit":{display:"inline-block",paddingLeft:".1rem",fontSize:"0.6rem",verticalAlign:"bottom"},"&.ingc":{display:"grid",gridTemplateColumns:"auto auto","& > span.ing":{textAlign:"right","& > svg":{width:"0.6em",height:"0.6em",paddingRight:"0.1rem"},"& > span":{fontSize:"0.8em"}},"& > span.strength":{paddingLeft:"0.3rem",textAlign:"right","& > svg":{width:"0.6em",height:"0.6em"},"& > span":{fontSize:"0.6em"}}},"&.ing2":{lineHeight:"50%"},"&.ing3":{"& > span.ing > svg":{width:"0.4em",height:"0.4em"},fontSize:"0.8em",lineHeight:"50%"},"&.skill2":{lineHeight:"1.6",fontSize:"0.8rem","& > div > svg":{width:"16px",height:"16px"}},"&.skillc":{display:"grid",gridTemplateColumns:"auto auto","&.skill1":{fontSize:"0.9rem","& > div > svg":{width:"0.8em",height:"0.8em"}},"& > span.strength":{paddingLeft:"0.3rem",textAlign:"right",fontSize:"0.7em","& > svg":{width:"0.6em",height:"0.6em"}}}},"& > footer":{fontSize:"0.7rem",bottom:0,color:"#666",position:"absolute",right:"1rem","& > div":{textAlign:"right"}}},"& > footer":{gridColumn:"1 / -1",fontSize:"0.7rem",color:"#666",padding:".6rem .8rem 0","& > span":{paddingRight:"0.8rem","& > small":{fontSize:"0.6rem",padding:"0 0.1rem"}},"& > span:last-of-type":{paddingRight:0}}}),ca=a.memo(({pokemonIv:n,settings:s,energyDialogOpen:t,dispatch:l})=>{const{t:r}=B(),[o,i]=a.useState(!1),[c,d]=a.useState(0),[u,x]=a.useState(!1),[h,m]=a.useState(!1),[g,b]=a.useState(!1),[f,j]=a.useState(!1),k=new ss(n,s,c),v=k.calculate();let y=[];n.pokemon.name!==k.pokemonIv.pokemon.name&&(y=n.decendants),n=k.pokemonIv;const E=a.useCallback(()=>{x(!0)},[]),C=a.useCallback(()=>{x(!1)},[]),F=a.useCallback(()=>{m(!0)},[]),A=a.useCallback(()=>{m(!1)},[]),T=a.useCallback(()=>{b(!0)},[]),I=a.useCallback(()=>{b(!1)},[]),N=a.useCallback(()=>{l({type:"openEnergyDialog"})},[l]),H=a.useCallback(()=>{j(!0)},[]),Z=a.useCallback(()=>{j(!1)},[]),D=a.useCallback(()=>{l({type:"closeEnergyDialog"})},[l]),L=q(Math.round(v.berryTotalStrength)),P=da(v,s,r),z=ua(n,v,s,r),O=a.useCallback(()=>{i(!0)},[i]),U=a.useCallback(()=>{i(!1)},[i]),Q=a.useCallback(_=>{d(parseInt(_.target.value,10))},[]);return e.jsxs(aa,{children:[e.jsxs("h2",{children:[e.jsx(le,{sx:{color:"#ff944b"}}),e.jsx("span",{className:"strength",children:q(Math.round(v.totalStrength))}),e.jsx(ee,{onClick:O}),e.jsx(ia,{param:s,result:v,open:o,dispatch:l,onClose:U}),y.length===1&&e.jsx("span",{className:"evolved",children:r("strength of x",{x:r(`pokemons.${n.pokemon.name}`)})}),y.length>1&&e.jsx("span",{className:"evolved",children:e.jsx(re,{variant:"standard",value:n.pokemon.id.toString(),onChange:Q,children:y.map(_=>e.jsx(p,{value:_.id,children:r("strength of x",{x:r(`pokemons.${_.name}`)})},_.id))})})]}),e.jsxs("section",{children:[e.jsxs("h3",{style:{background:"#24d76a"},children:[r("berry"),e.jsx(ee,{onClick:E})]}),e.jsx("article",{children:e.jsxs("div",{children:[e.jsx(le,{sx:{color:"#ff944b"}}),e.jsx("span",{children:L})]})}),e.jsxs("footer",{children:[e.jsxs("div",{children:[$(v.berryRatio*100),"%"]}),e.jsxs("div",{children:[$(v.berryHelpCount),r("times unit")]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{style:{background:"#fab855"},children:[r("ingredient"),e.jsx(ee,{onClick:F})]}),P,e.jsxs("footer",{children:[e.jsxs("div",{children:[$(v.ingRatio*100),"%"]}),e.jsxs("div",{children:[$(v.ingHelpCount),r("times unit")]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{style:{background:"#44a2fd"},children:[r("skill"),e.jsx(ee,{onClick:T})]}),z,e.jsxs("footer",{children:[e.jsxs("div",{children:[$(v.skillRatio*100),"%"]}),e.jsxs("div",{children:[te(v.skillCount),r("times unit")]})]})]}),s.period>Ee&&e.jsxs("footer",{children:[v.energy.canBeFullInventory&&s.period>=24?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[r("full inventory while sleeping (short)"),": ",v.energy.timeToFullInventory<0?r("none"):new _e(v.energy.timeToFullInventory).toString(r)]}),e.jsxs("span",{children:[r("skill trigger after wake up (short)"),e.jsx(e.Fragment,{children:": "}),n.pokemon.specialty!=="Skills"&&n.pokemon.specialty!=="All"?$(v.energy.skillProbabilityAfterWakeup.once*100)+"%":e.jsxs(e.Fragment,{children:["❶",$(v.energy.skillProbabilityAfterWakeup.once*100),"%",e.jsx(e.Fragment,{children:" "}),"❷",$(v.energy.skillProbabilityAfterWakeup.twice*100),"%"]})]})]}):e.jsx(e.Fragment,{children:e.jsxs("span",{children:[r("help efficiency"),": ",v.energy.averageEfficiency.total,s.period>=24&&e.jsxs(e.Fragment,{children:[" (",r("awake"),": ",v.energy.averageEfficiency.awake,", ",r("asleep"),": ",v.energy.averageEfficiency.asleep,")"]})]})}),e.jsx(ee,{onClick:N})]}),s.period<0&&e.jsxs("footer",{children:[e.jsxs("span",{children:[r("help yield"),": ",$(Ws(s,k,v)),r("berry unit"),"/",Math.abs(s.period),r("help unit")]}),e.jsxs("span",{children:[r("required helper boost"),": ",$(_s(s,k,v))]}),e.jsx(ee,{onClick:H})]}),k.pokemonIv.pokemon.skill==="Ingredient Magnet S (Present)"&&e.jsx("div",{style:{gridColumn:"1 / -1",border:"1px solid red",background:"#ffeeee",color:"red",fontSize:"0.8rem",borderRadius:"0.5rem",margin:".2rem .5rem 0",padding:"0 0.3rem"},children:r("present assumption")}),e.jsx(Ao,{open:u,onClose:C,strength:k,result:v}),e.jsx(qo,{open:h,onClose:A,dispatch:l,strength:k,result:v}),e.jsx(Uo,{open:g,onClose:I,dispatch:l,strength:k,result:v}),e.jsx(Po,{open:t,onClose:D,iv:n,energy:v.energy,parameter:s,dispatch:l}),e.jsx(ra,{open:f,onClose:Z,parameter:s,strength:k,result:v,dispatch:l})]})});function da(n,s,t){if(s.period!==Ee&&s.tapFrequency==="none")return e.jsx("article",{children:"ー"});const l=e.jsx(e.Fragment,{children:n.ingredients.map(r=>e.jsxs(a.Fragment,{children:[e.jsxs("span",{className:"ing",children:[e.jsx(je,{name:r.name}),e.jsx("span",{children:$(r.count)})]}),e.jsxs("span",{className:"strength",children:[e.jsx(le,{sx:{color:"#ff944b"}}),e.jsx("span",{children:Ie(Math.floor(r.strength),t)})]})]},r.name))});return e.jsx("article",{className:`ingc ing${n.ingredients.length}`,children:l})}function ua(n,s,t,l){if(t.period<=Ee||t.tapFrequency==="none")return e.jsx("article",{children:"ー"});const r=n.pokemon.skill,o=Ie(s.skillValue,l),i=s.skillValue2===0?"":Ie(s.skillValue2,l),c=e.jsxs("div",{children:[e.jsx(Pe,{mainSkill:r}),e.jsx("span",{style:{paddingLeft:"0.2rem"},children:o})]});let d=null;s.skillValue!==s.skillStrength&&s.skillStrength>0&&(d=e.jsxs("span",{className:"strength",children:[e.jsx(le,{sx:{color:"#ff944b"}}),e.jsx("span",{children:Ie(s.skillStrength,l)})]}));let u=null;s.skillValue2!==s.skillStrength2&&s.skillStrength2>0&&(u=e.jsxs("span",{className:"strength",children:[e.jsx(le,{sx:{color:"#ff944b"}}),e.jsx("span",{children:Ie(s.skillStrength2,l)})]}));let x=null;i!==""&&(x=e.jsxs("div",{style:d!==null&&u===null?{gridColumn:"1 / -1"}:{},children:[r==="Ingredient Magnet S (Plus)"?e.jsx(je,{name:n.pokemon.ing1.name}):e.jsx(Pe,{mainSkill:r,second:!0}),e.jsx("span",{style:{paddingLeft:"0.2rem"},children:i})]}));const h=d!==null||u!==null?" skillc":"";return e.jsxs("article",{className:i!==""?`skill2${h}`:`skill1${h}`,children:[c,d,x,u]})}const zn=S(G)({"& > div.MuiDialog-container > div.MuiPaper-root":{width:"100%",margin:"20px",maxHeight:"calc(100% - 90px)"},"& .MuiPaper-root":{"& > h2.MuiDialogTitle-root, & > div.MuiDialogContent-root > header.second-skill":{margin:"0.5rem 0.5rem 0 0.5rem",padding:0,display:"grid",gridTemplateColumns:"auto 1fr",gridGap:".4rem",alignItems:"start","& > article":{fontSize:"1.4rem",margin:0,display:"flex",alignItems:"center"},"& > footer":{display:"inline-block",fontWeight:"normal",fontSize:"0.9rem",margin:"0.3rem 0 0 0.5rem",lineHeight:"1.8"}},"& > ul":{margin:0,marginTop:"-0.2rem",paddingLeft:"1.5rem",gridColumn:"span 2","& > li > footer":{fontSize:"0.8rem"}},"& > .MuiDialogContent-root":{padding:0,"& > div.inggrid":{margin:"0 0 1rem 1.5rem",display:"grid",gridTemplateColumns:"auto 1fr",gridGap:"0.7rem 0.5rem",alignItems:"start","& > span":{display:"flex",alignItems:"center",fontWeight:"bold","& > svg":{width:"15px",height:"15px",paddingRight:"4px"},"& > svg.strength":{width:"18px",height:"18px",paddingRight:0}},"& > div":{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"0.1rem","& > span.box":{padding:"0.1rem 0.2rem"},"& > span > span.MuiBadge-root":{marginRight:0,"& > svg":{paddingTop:"3px",width:"15px",height:"15px"},"& > .MuiBadge-badge":{top:"18px",right:"10px"}}},"&.ings1, &.ings2":{fontSize:"0.9rem","& > div":{fontSize:"0.8rem"}},"&.ings3":{fontSize:"0.8rem","& > div":{fontSize:"0.7rem"}}},"& > article":{margin:"0.5rem .5rem 0 .5rem",display:"grid",gridGap:".5rem",rowGap:".8rem",gridTemplateColumns:"max-content 1fr",fontSize:"0.9rem","& > div":{textAlign:"right"},"& > span > ul.detail":{margin:"0.2rem 0 0 1rem",padding:0,fontSize:"0.8rem","& span.box":{padding:"0 0.3rem"}},"& > span > div.bbgrid":{display:"grid",fontSize:"0.8rem",gridTemplateColumns:"auto auto 1fr",alignItems:"center",gap:"0 0.1rem",background:"#f0f0f0",borderRadius:"0.3rem",padding:"0.1rem 0.5rem","& > label":{fontWeight:"bold",color:"#666"},"& > span":{paddingLeft:"0.8rem",textAlign:"right"},"& > small":{paddingLeft:"0.4rem"}},"& > ul":{margin:0,marginTop:"-0.2rem",paddingLeft:"1.5rem",gridColumn:"span 2","& > li > footer":{fontSize:"0.8rem"}},"& > footer":{margin:"-0.3rem 0 0 1.5rem",fontSize:"0.8rem",gridColumn:"span 2"},"& > span > footer":{margin:"0.2rem 0 0 -1.5rem",fontSize:"0.8rem"}},"& > div.footnote":{margin:"1rem 1rem 0 1rem",fontSize:"0.7rem",whiteSpace:"pre-wrap",color:"#999"},"& > section":{margin:"0.2rem 0.5rem",fontSize:".9rem",display:"flex",flex:"0 auto","&.mt":{marginTop:"1rem"},"& > label":{marginRight:"auto",marginTop:0,textWrap:"nowrap"},"& > span":{display:"flex",alignItems:"center"},"& > div > div > button.MuiToggleButton-root":{margin:0,padding:"0 0.5rem"}},"& div.skillLevelNotice":{fontSize:"0.7rem",color:"#999",margin:"0.2rem 0.5rem 0 2rem"}}},"& span.box":{borderRadius:".3rem",padding:".1rem .4rem",margin:"0",color:"white",textAlign:"center"},"& span.box1":{background:"#1ebee1"},"& span.box2":{background:"#27c18e"},"& span.box3":{background:"#e7c300"},"& span.box4":{background:"#ce5052"},"& span.box5":{background:"#ce3fa3"},"& span.box6":{background:"#ff8822"}}),ma=a.memo(({state:n,dispatch:s})=>{const{t}=B(),[l,r]=a.useState(!1),[o,i]=a.useState(!1),c=n.parameter,d=a.useCallback(()=>{s({type:"changeLowerTab",payload:{index:2}})},[s]),u=a.useCallback(()=>{r(!0)},[]),x=a.useCallback(()=>{r(!1)},[]),h=a.useCallback(F=>{s({type:"changeParameter",payload:{parameter:F}})},[s]),m=a.useCallback(()=>{s({type:"changeParameter",payload:{parameter:{...c,maxSkillLevel:!1}}})},[s,c]),g=a.useCallback(()=>{s({type:"changeParameter",payload:{parameter:{...c,isGoodCampTicketSet:!c.isGoodCampTicketSet}}})},[s,c]),b=a.useCallback(F=>{F==="advanced"&&(F="custom"),s({type:"changeParameter",payload:{parameter:{...c,event:F}}})},[s,c]),f=a.useCallback(()=>{i(!0)},[]),j=a.useCallback(()=>{i(!1)},[]);let k;c.fieldIndex===Un?k=t("favorite berry")+": "+t("all"):c.fieldIndex===Gn?k=t("favorite berry")+": "+t("none"):c.fieldIndex===0?k=c.favoriteType.map(F=>t(`types.${F}`)).join(t("text separator")):ts(c.fieldIndex)?k=e.jsxs(e.Fragment,{children:[t(`types.${c.favoriteType[0]}`),e.jsxs("small",{children:[" (",t("main"),")"]}),t("text separator"),t(`types.${c.favoriteType[1]}`),t("text separator"),t(`types.${c.favoriteType[2]}`)]}):k=t(`area.${c.fieldIndex}`);const v=e.jsxs("small",{children:[" (",c.fieldBonus,"%)"]}),y=Vs(new Date).map(F=>F.name).reverse();c.event!=="none"&&c.event!=="custom"&&y.indexOf(c.event)<0&&y.unshift(c.event);const E=y.length>0,C=["none",...y,"custom"].map(F=>{const A=F==="none"?t("no event"):F==="custom"?t("event")+": "+t("events.advanced"):t(`events.${F}`);return e.jsx(p,{value:F,dense:!0,style:{textTransform:"none"},children:A},F)});return e.jsxs(xa,{children:[e.jsx("span",{className:"edit",children:e.jsx(M,{onClick:d,size:"small",children:t("details")})}),e.jsx("span",{children:e.jsxs(Oe,{onClick:u,children:[k,v]})}),e.jsx("span",{children:e.jsx(pt,{dispatch:s,value:c})}),c.level!==0&&e.jsx("span",{className:"level",children:e.jsx(hs,{value:c,dispatch:s})}),c.maxSkillLevel&&e.jsx("span",{children:e.jsx(Oe,{onClick:m,children:e.jsx("strong",{children:t("calc with max skill level (short)")})})}),c.period!==Ee&&e.jsxs("span",{children:[e.jsxs(e.Fragment,{children:[t("good camp ticket (short)"),": "]}),e.jsx(Oe,{onClick:g,style:{width:"2rem"},children:t(c.isGoodCampTicketSet?"on":"off")})]}),E&&e.jsxs("span",{children:[e.jsx(ue,{value:c.event,onChange:b,children:C}),c.event==="custom"&&e.jsx(K,{size:"small",style:{padding:"2px"},onClick:f,children:e.jsx(Qs,{})})]}),e.jsx(ct,{open:l,onClose:x,value:n.parameter,onChange:h}),e.jsx(ft,{open:o,onClose:j,value:n.parameter,onChange:h})]})}),xa=S("div")({marginTop:"0.2rem",padding:".4rem .6rem",border:"1px solid #ccc",borderRadius:"1rem",background:"#f3f5f0",fontSize:"0.8rem",lineHeight:1.8,"& > span":{float:"left",textWrap:"none",paddingRight:"1rem","&:last-child":{paddingRight:0},"& > button.MuiButtonBase-root":{"&::before":{borderBottomColor:"rgba(0, 0, 0, 0.25)"},marginTop:"-2px",fontSize:"0.8rem",lineHeight:1.5,"& > svg":{fontSize:"1rem"}},"&.level > button":{fontWeight:"bold"},"&.edit":{float:"right",padding:0,"& > button":{textTransform:"none",minWidth:0,textWrap:"nowrap"}}},"&::after":{content:"''",display:"table",clear:"both"}}),ha=a.memo(({state:n,dispatch:s})=>{const t=n.pokemonIv,l=n.parameter,r=n.lowerTabIndex;return e.jsxs("div",{children:[e.jsx(ca,{pokemonIv:t,settings:l,energyDialogOpen:n.energyDialogOpen,dispatch:s}),e.jsx(oe,{in:r!==2,children:e.jsx(ma,{state:n,dispatch:s})})]})}),ga=a.memo(({pokemonIv:n,width:s})=>{const{t}=B(),[l,r]=a.useState(!1),o=a.useCallback(()=>{r(!0)},[r]),i=a.useCallback(()=>{r(!1)},[r]),d=new Lt(n).calculate(),u=400,x=h=>(h=Math.round(h*10)/10,t("num",{n:Math.floor(h)})+"."+h*10%10);return e.jsxs("div",{children:[e.jsxs("p",{style:{margin:"0"},children:[t("rate subskill and nature"),e.jsx(ee,{onClick:o})]}),e.jsx(jt,{berryValue:e.jsxs(e.Fragment,{children:[x(d.berryScore),e.jsx("span",{children:"pt"})]}),berryProb:x(d.berryRatio*100),berrySubValue:"",ingredientValue:e.jsxs(e.Fragment,{children:[x(d.ingScore),e.jsx("span",{children:"pt"})]}),ingredientProb:x(d.ingRatio*100),ingredientSubValue:"",skillValue:e.jsxs(e.Fragment,{children:[x(d.skillScore),e.jsx("span",{children:"pt"})]}),skillProb:x(d.skillRatio*100),skillSubValue:""}),e.jsx(bt,{width:s,height:u,specialty:n.pokemon.specialty,berry:d.berryScore/100,ingredient:d.ingScore/100,skill:d.skillScore/100}),e.jsx(pa,{open:l,onClose:i})]})}),pa=a.memo(({open:n,onClose:s})=>{const{t}=B();return e.jsxs(G,{open:n,onClose:s,children:[e.jsx(ae,{children:t("rating")}),e.jsxs(J,{dividers:!0,style:{fontSize:"0.95rem"},children:[e.jsx("p",{style:{marginTop:0},children:t("rating detail1")}),e.jsx("p",{children:t("rating detail2")})]}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:t("close")})})]})}),fa=a.forwardRef(function(s,t){return e.jsx(br,{direction:"up",ref:t,...s})}),ja=a.memo(({open:n,boxItem:s,isEdit:t,onClose:l,onChange:r})=>(t||(s=new mn(new ve("Venusaur"),void 0,-1)),s===null?e.jsx(e.Fragment,{}):e.jsx(ka,{open:n,onClose:l,fullScreen:!0,slots:{transition:fa},children:e.jsx(ba,{originalBoxItem:s,isEdit:t,onClose:l,onChange:r})}))),ba=a.memo(({originalBoxItem:n,isEdit:s,onChange:t,onClose:l})=>{const{t:r}=B(),[o,i]=a.useState(n),[c,d]=a.useState(n.nickname),[u,x]=a.useState(new tn(o.iv).calculate().rp),[h,m]=a.useState(!1),g=r(`pokemons.${o.iv.pokemonName}`),b=a.useCallback(C=>{i(new mn(C,o.nickname,o.id)),x(new tn(C).calculate().rp),c===g&&d("")},[i,o,x,g,c]),f=a.useCallback(C=>{d(C.target.value)},[d]),j=a.useCallback(()=>{m(!0),c===""&&d(g)},[m,d,c,g]),k=a.useCallback(()=>{m(!1),c===g&&d("")},[d,m,c,g]),v=a.useCallback(()=>{s&&t(new mn(o.iv,c,o.id)),l()},[s,t,l,o,c]),y=a.useCallback(()=>{s||t(new mn(o.iv,c,o.id)),l()},[s,t,l,o,c]);let E=c;return!h&&c===""&&(E=r(`pokemons.${o.iv.pokemonName}`)),e.jsxs(e.Fragment,{children:[e.jsxs("article",{children:[e.jsx(kt,{rp:u,iv:o.iv}),e.jsx("div",{className:"icon",children:e.jsx(Fn,{idForm:o.iv.idForm,size:80})}),e.jsx("div",{className:"nickname",children:e.jsx(ce,{variant:"standard",size:"small",value:E,onChange:f,onFocus:j,onBlur:k})}),e.jsx(ht,{pokemonIv:o.iv,fixMode:s,onChange:b})]}),e.jsxs(W,{children:[e.jsx(M,{onClick:v,children:r("close")}),!s&&e.jsx(M,{onClick:y,children:r("add")})]})]})}),ka=S(G)({"& div.MuiDialog-paper":{"& > article":{padding:".5rem .5rem 4rem .5rem","& > div.icon":{margin:".2rem auto",width:"82px"},"& > div.nickname":{margin:"0 auto 1.2rem auto",width:"10rem","& input":{fontSize:"1.2rem",fontWeight:"bold",textAlign:"center"}}},"& > div.MuiDialogActions-root":{position:"fixed",padding:"0 0.5rem 1rem 0.5rem",margin:0,background:"rgba(255, 255, 255, 0.8)",width:"calc(100% - 1rem)",bottom:0}}}),ya=a.memo(({box:n,open:s,onClose:t})=>{const[l,r]=a.useState(!1),{t:o}=B(),i=n.items.map(u=>u.serialize()).join(`
`),c=a.useCallback(()=>{ns(i).then(()=>{r(!0)}).catch(()=>{})},[r,i]),d=a.useCallback(()=>{r(!1)},[r]);return e.jsxs(G,{open:s,onClose:t,children:[e.jsx(ae,{children:o("export")}),e.jsxs(J,{children:[e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:o("export message1")}),e.jsx("p",{style:{fontSize:"0.9rem",margin:"0.5rem 0 1rem 0"},children:o("export message2")}),e.jsx(ce,{label:o("box data"),multiline:!0,fullWidth:!0,rows:6,defaultValue:i})]}),e.jsxs(W,{children:[e.jsx(M,{onClick:c,children:o("copy to clipboard")}),e.jsx(M,{onClick:t,children:o("close")})]}),e.jsx(Me,{open:l,autoHideDuration:2e3,onClose:d,message:o("copied to clipboard")})]})}),va=a.memo(({box:n,open:s,onClose:t})=>{const[l,r]=a.useState(""),[o,i]=a.useState(""),{t:c}=B(),d=a.useCallback(g=>{r(g.target.value)},[r]),u=a.useCallback(()=>{r(""),t()},[r,t]),x=a.useCallback(()=>{const g=l.split(/\n/g);let b=0;for(const f of g){if(!n.canAdd)break;const j=n.deserializeItem(f);j!==null&&(n.add(j.iv,j.nickname),b++)}b===0?i(c("failed to import")):(n.save(),i(c("imported N pokemon",{n:b})),u())},[n,i,c,u,l]),h=a.useCallback(()=>{i("")},[i]),m=o!=="";return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:s,onClose:u,children:[e.jsx(ae,{children:c("import")}),e.jsxs(J,{children:[e.jsx("p",{style:{fontSize:"0.9rem",margin:"0 0 1rem 0"},children:c("import message")}),e.jsx(ce,{label:c("box data"),multiline:!0,fullWidth:!0,rows:6,value:l,onChange:d})]}),e.jsxs(W,{children:[e.jsx(M,{onClick:x,children:c("import")}),e.jsx(M,{onClick:u,children:c("close")})]})]}),e.jsx(Me,{open:m,autoHideDuration:2e3,onClose:h,message:o})]})}),Ca=a.memo(({box:n,open:s,onClose:t})=>{const[l,r]=a.useState(!1),{t:o}=B(),i=a.useCallback(()=>{n.removeAll(),r(!0),t()},[n,t]),c=a.useCallback(()=>{r(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:s,onClose:t,children:[e.jsx(ae,{children:o("delete all")}),e.jsx(J,{children:e.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:o("delete all message")})}),e.jsxs(W,{children:[e.jsx(M,{onClick:i,color:"error",children:o("delete")}),e.jsx(M,{onClick:t,children:o("cancel")})]})]}),e.jsx(Me,{open:l,autoHideDuration:2e3,onClose:c,message:o("deleted all pokemon")})]})}),Sa=S(vn)({minHeight:"36px",marginBottom:"clamp(.3rem, 0.6vh, .7rem)"}),qn=S(Cn)({minHeight:"36px",padding:"6px 16px"}),Ia=Hl(),wa=a.memo(()=>{const[n,s]=a.useReducer(Wl,Ia),{t}=B(),l=Ba(),r=n.box.getById(n.selectedItemId),o=a.useCallback(j=>{s({type:"updateIv",payload:{iv:j}})},[]),i=a.useCallback((j,k)=>{s({type:"changeUpperTab",payload:{index:k}})},[]),c=a.useCallback(()=>{s({type:"restoreItem"})},[]),d=a.useCallback(()=>{s({type:"saveItem"})},[]),u=a.useCallback(()=>{s({type:"closeAlert"})},[]),x=a.useCallback(()=>{s({type:"editDialogClose"})},[]),h=a.useCallback(j=>{s({type:"addOrEditDone",payload:{item:j}})},[]),m=r!==null&&!r.iv.isEqual(n.pokemonIv),g=a.useCallback(()=>{s({type:"exportClose"})},[]),b=a.useCallback(()=>{s({type:"importClose"})},[]),f=a.useCallback(()=>{s({type:"deleteAllClose"})},[]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{padding:"0 .5rem",position:"sticky",top:0,zIndex:1,background:"#f9f9f9"},children:[e.jsxs(Sa,{value:n.tabIndex,onChange:i,children:[e.jsx(qn,{label:t("rp")}),e.jsx(qn,{label:t("strength2")}),e.jsx(qn,{label:t("rating")})]}),n.tabIndex===0&&e.jsx(Fo,{state:n,width:l}),n.tabIndex===1&&e.jsx(ha,{state:n,dispatch:s}),n.tabIndex===2&&e.jsx(ga,{pokemonIv:n.pokemonIv,width:l}),n.pokemonIv.pokemon.ratioNotFixed&&e.jsx("div",{style:{border:"1px solid red",background:"#ffeeee",color:"red",fontSize:"0.9rem",borderRadius:"0.5rem",marginTop:"3px",padding:"0 0.3rem"},children:t("ratio is not fixed")}),e.jsx(_l,{state:n,dispatch:s,isBoxEmpty:n.box.items.length===0})]}),n.lowerTabIndex===0&&e.jsx("div",{style:{margin:"0 0.5rem 10rem 0.5rem"},children:e.jsx(ht,{pokemonIv:n.pokemonIv,onChange:o})}),n.lowerTabIndex===1&&e.jsx(Ai,{items:n.box.items,iv:n.pokemonIv,selectedId:n.selectedItemId,dispatch:s,parameter:n.parameter}),n.lowerTabIndex===2&&e.jsx(wo,{value:n.parameter,hasHelpingBonus:n.pokemonIv.hasHelpingBonusInActiveSubSkills,dispatch:s}),e.jsx(ja,{open:n.boxItemDialogOpen,boxItem:r,isEdit:n.boxItemDialogIsEdit,onClose:x,onChange:h},n.boxItemDialogKey),e.jsx(ya,{box:n.box,open:n.boxExportDialogOpen,onClose:g}),e.jsx(va,{box:n.box,open:n.boxImportDialogOpen,onClose:b}),e.jsx(Ca,{box:n.box,open:n.boxDeleteAllDialogOpen,onClose:f}),e.jsx(Me,{open:n.alertMessage!=="",message:t(n.alertMessage),autoHideDuration:2e3,onClose:u}),e.jsx(Me,{open:m,message:t("pokemon in the box is edited"),action:e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:c,children:t("reset")}),e.jsx(M,{onClick:d,children:t("save")})]})})]})});function Ba(){const[n,s]=a.useState(0);return a.useEffect(()=>{const t=()=>{s(document.documentElement.clientWidth)};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),n}function Ta({open:n,onClose:s}){const{t}=B();return e.jsxs(G,{open:n,onClose:s,children:[e.jsx(ae,{children:t("about")}),e.jsxs(J,{dividers:!0,children:[e.jsx(pe,{sx:{marginBottom:"16px"},children:e.jsx(Y,{i18nKey:"about1",components:{profile:e.jsx("a",{href:t("profile"),children:"profile"})}})}),e.jsx(pe,{sx:{marginBottom:"16px"},children:e.jsx(Y,{i18nKey:"about2",components:{x:e.jsxs("a",{href:`https://twitter.com/${t("x username")}`,children:["@",t("x username")]}),github:e.jsx("a",{href:"https://github.com/nitoyon/pokesleep-tool/discussions",children:"GitHub"})}})}),e.jsxs(pe,{sx:{marginBottom:"16px"},children:[e.jsx(Y,{i18nKey:"about3",components:{wiki:e.jsx("a",{href:"https://wikiwiki.jp/poke_sleep/",children:"wiki"}),rp:e.jsx("a",{href:"https://docs.google.com/spreadsheets/d/1kBrPl0pdAO8gjOf_NrTgAPseFtqQA27fdfEbMBBeAhs/#gid=1673887151",children:"RP collection project"}),raenonx:e.jsx("a",{href:"https://pks.raenonx.cc/",children:"RaenonX"})}}),e.jsx(Y,{i18nKey:"about4"})]})]}),e.jsx(W,{children:e.jsx(M,{onClick:s,children:t("close")})})]})}function Na({app:n,open:s,onClose:t}){const{t:l}=B();return e.jsxs(G,{open:s,onClose:t,children:[e.jsx(ae,{children:l("how to use")}),e.jsxs(J,{dividers:!0,children:[e.jsx(pe,{sx:{marginBottom:"16px"},children:l(`${n}.description`)}),e.jsx(pe,{sx:{marginBottom:"16px"},children:l(`${n}.notice detail1`)}),e.jsx(pe,{sx:{marginBottom:"16px"},children:l(`${n}.notice detail2`)})]}),e.jsx(W,{children:e.jsx(M,{onClick:t,children:l("close")})})]})}function Ma({open:n,app:s,onAppConfigChange:t,onClose:l}){const r=a.useContext(En),[o,i]=a.useState(r.iconUrl??""),[c,d]=a.useState(!1),{t:u,i18n:x}=B(),h=x.language,m=(E,C)=>{x.changeLanguage(C)},g=[],b=x.options.resources;for(const E in b){const C=x.getResource(E,"translation","langname");g.push(e.jsx(R,{value:E,"aria-label":E,children:C},E))}let f=!1,j="";o!==""&&(o.match(/^https?:\/\//)?o.match(/@ID[1-4]@/)||(f=!0,j=u("custom icon id not found")):(f=!0,j=u("custom icon invalid url")));const k=a.useCallback(E=>{i(E.target.value)},[i]),v=a.useCallback(()=>{if(f){d(!0);return}t({...r,language:h,iconUrl:o!==""?o:null}),l()},[t,l,r,f,o,h]),y=a.useCallback(()=>{d(!1)},[d]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{open:n,onClose:v,fullWidth:!0,children:[e.jsxs(J,{children:[e.jsx("h3",{style:{margin:"0 0 .3rem 0"},children:u("change language")}),e.jsx(X,{value:h,orientation:"vertical",exclusive:!0,onChange:m,children:g}),s==="IvCalc"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{margin:"1rem 0 0 0"},children:u("custom icon")}),e.jsx("p",{style:{margin:"0.3rem 0",fontSize:"0.9rem"},children:u("custom icon summary")}),e.jsx(ce,{variant:"standard",fullWidth:!0,value:o,placeholder:u("custom icon placeholder"),error:f,helperText:j,onChange:k}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#888",lineHeight:1.1,fontSize:"0.8rem"},children:[u("custom icon details"),e.jsx("br",{}),u("custom icon details japanese only")]})]})]}),e.jsx(W,{children:e.jsx(M,{onClick:v,children:u("close")})})]}),e.jsx(us,{open:c,onClose:y,message:u("custom icon invalid message")})]})}function Ea({app:n,onAppChange:s,onAppConfigChange:t}){const{t:l}=B(),[r,o]=w.useState(null),i=!!r,c=()=>{s("ResearchCalc"),o(null)},d=()=>{s("IvCalc"),o(null)},u=A=>{o(A.currentTarget)},x=()=>{o(null)},[h,m]=w.useState(!1),g=()=>{m(!0),o(null)},b=()=>{m(!1)},[f,j]=w.useState(!1),k=()=>{j(!0),o(null)},v=()=>{j(!1)},[y,E]=w.useState(!1),C=()=>{E(!0),o(null)},F=()=>{E(!1)};return e.jsxs(Fa,{children:[e.jsx("div",{className:"title",children:l(`${n}.title`)}),e.jsx(K,{"aria-label":"actions",color:"inherit",onClick:u,children:e.jsx(os,{})}),e.jsxs(ln,{anchorEl:r,open:i,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[e.jsxs(p,{onClick:c,children:[e.jsx(ne,{children:n==="ResearchCalc"?e.jsx(fe,{}):e.jsx(Xn,{})}),l("ResearchCalc.short title")]}),e.jsxs(p,{onClick:d,children:[e.jsx(ne,{children:n==="IvCalc"?e.jsx(fe,{}):e.jsx(Xn,{})}),l("IvCalc.short title")]}),e.jsx(Ne,{}),e.jsxs(p,{onClick:g,children:[e.jsx(ne,{children:e.jsx(kr,{})}),l("how to use")]}),e.jsxs(p,{onClick:k,children:[e.jsx(ne,{children:e.jsx(Ve,{})}),l("about")]}),e.jsxs(p,{onClick:C,children:[e.jsx(ne,{children:e.jsx(yr,{})}),l("settings")]})]}),e.jsx(Ta,{open:f,onClose:v}),e.jsx(Na,{app:n,open:h,onClose:b}),e.jsx(Ma,{open:y,app:n,onAppConfigChange:t,onClose:F})]})}const Fa=S("div")({background:"#665500",color:"white",padding:".2rem .5rem",fontSize:"1rem",display:"flex",alignItems:"center","@media all and (display-mode: standalone)":{background:"#002244"},"& > div.title":{flexGrow:1}}),za=a.memo(({appType:n,onAppConfigChange:s})=>{const{t}=B(),l=a.useContext(En),r=a.useCallback(()=>{c(!0)},[]),o=a.useCallback(()=>{c(!1)},[]),[i,c]=a.useState(!1),d=Wt.getArticles(n);if(d.length===0)return e.jsx(e.Fragment,{});const u=d[0],x=l.news[n];if(u.id===x)return e.jsx(e.Fragment,{});const h=()=>{const m={...l,news:{...l.news}};m.news[n]=u.id,s(m)};return e.jsxs(Ra,{children:[e.jsx(Ve,{}),e.jsxs("div",{children:[e.jsx("span",{children:t(`${n}.news.${u.id}.headline`)}),e.jsxs(M,{onClick:r,children:["[",t("details"),"]"]})]}),e.jsx(K,{onClick:h,children:e.jsx(wn,{})}),e.jsx(Da,{open:i,onClose:o,appType:n,article:u})]})}),Ra=S("div")({margin:"0.2rem .2rem",background:"#e5f6fd",border:"1px solid #d9e9e9",color:"#014343",borderRadius:"0.5rem",display:"grid",gridTemplateColumns:"26px 1fr 40px","& > svg":{color:"#0288d1",width:"18px",height:"18px",padding:"4px"},"& > div":{fontSize:"0.8rem",padding:"0.2rem 0",color:"#014480","& > span":{marginRight:".3rem"},"& > button":{padding:0,minWidth:0,fontSize:"0.8rem"}},"& > button":{width:"40px",height:"40px"}}),Da=a.memo(({appType:n,article:s,open:t,onClose:l})=>{const{t:r,i18n:o}=B();if(!t)return e.jsx(e.Fragment,{});const i=r(`${n}.news.${s.id}.detail`).split(/\n/g),c=r(`${n}.news.${s.id}.headline`);let d="";if(Intl&&Intl.RelativeTimeFormat){const u=Math.max(0,new Date().getTime()-s.date.getTime()),x=new Intl.RelativeTimeFormat(o.language,{style:"long"});u>31536e6?d=x.format(-Math.floor(u/31536e6),"year"):u>2592e6?d=x.format(-Math.floor(u/2592e6),"month"):u>864e5?d=x.format(-Math.floor(u/864e5),"day"):u>36e5?d=x.format(-Math.floor(u/36e5),"hour"):d=x.format(-Math.floor(u/6e4),"minute")}else d=s.date.toLocaleDateString();return e.jsxs(Aa,{open:t,onClose:l,children:[e.jsx("time",{children:d}),e.jsx("header",{children:c}),i.map((u,x)=>e.jsx("p",{children:u},x)),e.jsx(W,{disableSpacing:!0,children:e.jsx(M,{onClick:l,children:r("close")})})]})}),Aa=S(G)({"& .MuiPaper-root":{padding:"1rem 1rem 0 1rem","& > time":{fontSize:"0.7rem",color:"#888"},"& > header":{fontSize:"1rem",fontWeight:"bold",marginBottom:"0.3rem"},"& > p":{fontSize:"0.9rem",margin:"0.4rem 0 0 0"}}});let Ze;const Pa=3,La=a.memo(({app:n,pwaCount:s,onClose:t})=>{const{t:l}=B();let r=!1;/iP(hone|od|ad)/.test(navigator.userAgent)&&!window.matchMedia("(display-mode: standalone)").matches&&s>=Pa&&(r=!0);const[o,i]=w.useState(r),[c,d]=w.useState(!1),u=w.useCallback(g=>{Ze=g,i(!0)},[]);w.useEffect(()=>(window.addEventListener("beforeinstallprompt",u),()=>{window.removeEventListener("beforeinstallprompt",u)}),[u]);const x=w.useCallback(()=>{Ze!==void 0?(i(!1),Ze.prompt(),Ze.userChoice.then(()=>{Ze=void 0})):d(!0)},[i]),h=w.useCallback(()=>{i(!1),t()},[i,t]),m=w.useCallback(()=>{d(!1)},[d]);return e.jsx(Oa,{open:o,children:e.jsxs("div",{className:"pwa_banner_container",children:[n==="ResearchCalc"?e.jsx(Gr,{}):e.jsx(Ur,{}),e.jsxs("div",{className:"pwa_banner_body",children:[e.jsx("p",{children:e.jsx(Y,{i18nKey:"pwa notice",values:{app:l(`${n}.short title`)}})}),e.jsx(M,{variant:"contained",size:"small",className:"add",onClick:x,children:l("add to home screen")}),e.jsx(M,{className:"later",onClick:h,children:l("later")})]}),e.jsx(K,{onClick:h,children:e.jsx(wn,{})}),e.jsx(Ha,{app:n,open:c,onClose:m})]})})}),Oa=S(Me)({background:"white",borderRadius:"1rem 1rem 0 0",boxShadow:"0 -.2rem .4rem #ccc",padding:".5rem",bottom:0,zIndex:1e3,"& > div.pwa_banner_container":{display:"flex","& > svg":{alignItems:"flex-start",paddingTop:".5rem",paddingRight:"6px",width:"24px",flexShrink:0},"& > div.pwa_banner_body":{flexGrow:1,paddingTop:".5rem","& > p":{margin:"0 0 .5rem 0"},"& > button":{fontSize:".8rem","&.add":{borderRadius:"1rem",background:"#24da6d"},"&.later":{color:"black"}}},"& > button.MuiIconButton-root":{marginRight:"auto",alignSelf:"start"}}}),Ha=a.memo(({app:n,open:s,onClose:t})=>{const{t:l,i18n:r}=B(),[o,i]=w.useState(!1),c=w.useCallback(async()=>{let u="https://nitoyon.github.io/pokesleep-tool/"+(n==="IvCalc"?"iv/":"");r.language!=="en"&&(u+="index."+r.language+".html"),ns(u).then(()=>{i(!0)}).catch(()=>{})},[n,i,r.language]),d=w.useCallback(()=>{i(!1)},[i]);return e.jsxs($a,{open:s,onClose:t,children:[e.jsx(ae,{children:l("how to add to home screen")}),e.jsx(K,{onClick:t,className:"close_button",children:e.jsx(wn,{})}),e.jsxs(J,{dividers:!0,children:[e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx(Y,{i18nKey:"open in safari",components:{safari:e.jsx(Kr,{})}}),e.jsx("div",{children:e.jsxs(M,{onClick:c,children:["[",l("copy url"),"]"]})})]}),e.jsx("li",{children:e.jsx(Y,{i18nKey:"push share icon",components:{share:e.jsx(as,{})}})}),e.jsx("li",{children:e.jsx(Y,{i18nKey:"select add to home screen",components:{add:e.jsx(vr,{})}})})]}),e.jsx(Me,{open:o,onClose:d,autoHideDuration:1e3,message:l("copied")})]}),e.jsx(W,{children:e.jsx(M,{onClick:t,children:l("close")})})]})}),$a=S(G)({"& div.MuiDialogContent-root":{padding:"1rem","& > ol":{margin:0,paddingLeft:"1.6rem",listStyleType:"none","& > li":{counterIncrement:"step-counter",position:"relative",paddingBottom:".6rem","&::before":{content:"counter(step-counter)",position:"absolute",left:"-1.8rem",top:".6rem",backgroundColor:"#24da6d",color:"white",borderRadius:"1rem",width:"18px",height:"18px",fontSize:"0.8rem",fontWeight:"bold",textAlign:"center",lineHeight:1.5},"& button":{padding:0,paddingTop:".2rem"},"& > svg":{position:"relative",top:".4rem"}}}},"& button.close_button":{position:"absolute",right:"8px",top:"12px"}}),Wa=ds({typography:{allVariants:{fontFamily:'"M PLUS 1p"'}}}),_a=ds({typography:{allVariants:{fontFamily:'"Noto Sans TC"'}}}),Va=ds({typography:{allVariants:{fontFamily:'"Noto Sans SC"'}}});function nc({config:n}){const s=qa(n),[t,l]=Ga(s),[r,o]=w.useState(n),i=w.useCallback(x=>{l(x)},[l]),c=w.useCallback(x=>{Yn(x),o(x)},[o]),d=w.useCallback(()=>{r.pwacnt=0,Yn(r),o(r)},[r,o]);let u=Wa;return s==="zh-TW"?u=_a:s==="zh-CN"&&(u=Va),e.jsx(Cr,{theme:u,children:e.jsxs(En.Provider,{value:r,children:[e.jsx(Ea,{app:t,onAppChange:i,onAppConfigChange:c}),e.jsx(za,{appType:t,onAppConfigChange:c}),t==="ResearchCalc"&&e.jsx(Ol,{}),t==="IvCalc"&&e.jsx(wa,{}),e.jsx(La,{app:t,pwaCount:n.pwacnt,onClose:d})]})})}function qa(n){const{i18n:s}=B(),[t,l]=w.useState(n.language),r=w.useCallback(o=>{l(o),Yn({...n,language:o})},[n,l]);return w.useEffect(()=>(s.on("languageChanged",r),()=>{s.off("languageChanged",r)}),[s,r]),t}function Ga(n){const s=window.location.pathname.startsWith("/pokesleep-tool/iv/")?"IvCalc":"ResearchCalc",{t,i18n:l}=B(),[r,o]=w.useState(s);return w.useEffect(()=>{document.title=t(`${r}.title`);const i=document.querySelector("link[rel='manifest']");if(i!==null){const m=i.href;i.href=m.replace(/manifest.*/,"manifest."+n+".json")}const c=document.querySelector("meta[name='description']");c!==null&&(c.content=t(`${r}.description`));const d=document.querySelector("html");d!==null&&(d.lang=n.toLowerCase());const u=document.querySelector("link[rel='stylesheet'][href*='https']");u!==null&&(n==="zh-TW"?u.href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap":n==="zh-CN"?u.href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap":u.href="https://fonts.googleapis.com/css2?family=M+PLUS+1p&display=swap");let x=document.location.origin+"/pokesleep-tool/";r==="IvCalc"&&(x+="iv/"),n!=="en"&&(x+=`index.${n.toLowerCase()}.html`);const h=document.location.search+document.location.hash;window.history.replaceState(null,"",x+h)},[n,l,t,r]),[r,o]}export{nc as A,ec as l,Yn as s};
